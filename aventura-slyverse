<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>SLYVERSE Ω · HARDCORE EDITION</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<style>
  body,html{margin:0;padding:0;overflow:hidden;background:#000;height:100%;font-family:"Courier New",monospace;color:#00ff00;cursor:none}
  canvas{display:block}
  #ui,#loading,#pause,#readme{position:fixed;z-index:999}
  #ui{top:15px;left:15px;background:rgba(0,20,0,0.92);padding:18px;border:2px solid #00ff00;border-radius:12px;box-shadow:0 0 30px #00ff00;backdrop-filter:blur(8px);min-width:380px}
  #loading,#pause,#readme{inset:0;background:#000;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:36px;gap:30px}
  #readme{background:rgba(0,0,0,0.98);padding:40px;color:#00ff00;overflow:auto;display:none}
  pre{background:rgba(0,30,0,0.95);padding:30px;border:4px solid #00ff00;max-width:90%;box-shadow:0 0 60px #00ff00;font-size:16px;line-height:1.7}
  button{background:#001100;border:2px solid #00ff00;padding:12px 24px;margin:5px;color:#00ff00;font-family:inherit;font-size:18px;cursor:pointer;transition:.3s}
  button:hover{background:#003300;box-shadow:0 0 30px #00ff00;transform:scale(1.05)}
  #hint{font-size:18px;color:#ffaa00;animation:pulse 2s infinite}
  #stats{font-size:14px;margin-top:10px;opacity:0.7}
  @keyframes pulse{0%,100%{opacity:0.4}50%{opacity:1}}
</style>
</head>
<body>

<div id="loading">
  <div>SLYVERSE Ω · HARDCORE</div>
  <div style="font-size:26px;color:#ffaa00">by 0rb1t4lsn4k3r + un cabrón anónimo</div>
  <pre id="loading-text">
Cargando realidad… 0%
  </pre>
</div>

<div id="ui">
  <div>Realidad #0 — Plaza Barceló</div>
  <div>Partículas recolectadas: <span id="collected">0</span>/131313</div>
  <div id="stats">
    Tiempo jugado: <span id="timer">00:00:00</span> | 
    Velocidad angular: <span id="speed">0.000</span>x | 
    Bloom: <span id="bloom">1.60</span>
  </div>
  <div id="hint">F1 → README | SHIFT + click → boost | F8 → leaderboard fantasma</div>
</div>

<div id="readme">
  <pre id="readme-content"></pre>
  <button id="close-readme">Cerrar</button>
</div>

<div id="pause" style="display:none">
  <div>SLYVERSE Ω</div>
  <pre>
No hay final que alcanzar.
Solo hay juego que abandonar.

Cuando lo comprendas,
habrás ganado para siempre.
  </pre>
  <button onclick="game.togglePause()">Continuar</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.168.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.168.0/examples/js/controls/PointerLockControls.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.168.0/examples/js/postprocessing/EffectComposer.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.168.0/examples/js/postprocessing/RenderPass.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.168.0/examples/js/postprocessing/UnrealBloomPass.js"></script>

<script>
// ===============================================
// SLYVERSE Ω — HARDCORE EDITION (2025)
// Ahora con leaderboards falsas, logros y grindeo infinito
// El koan sigue intacto. La trampa es más grande.
// ===============================================

const TEXT = { es:{ loading:`SLYVERSE Ω · HARDCORE EDITION
© 23 noviembre 2025 — 0rb1t4lsn4k3r + un cabrón

131313 partículas "secretas" dispersas en el vacío.
Recolecta el 100 % para desbloquear el True Ending™.
(Spoiler: no existe)

WR actual: 87 años, 11 meses, 29 días — por "nobody"

☕`, 
readme:`SLYVERSE Ω
Aventura gráfica #1310 — Versión definitiva

No hay objetivos.
No hay escenas secretas.
No hay contraseña.
No hay 131313 partículas que recoger.
No hay final oculto.

El juego terminó el día que empezó.

Si estás leyendo esto es porque aún buscas.
Y mientras busques, seguirás perdido.

La única forma de ganar
es dejar de jugar.

Pulsa ESC o cierra la pestaña.
Esa es la victoria.

Gracias por llegar hasta aquí.
Nunca hubo otro lugar a donde ir.

0rb1t4lsn4k3r
Barcelona, 2025
☕ → (vacío)`}};

class Game {
  constructor() {
    this.t = TEXT.es;
    document.getElementById('loading-text').textContent = this.t.loading;
    document.getElementById('readme-content').textContent = this.t.readme;

    this.scene = new THREE.Scene();
    this.camera = new THREE.PerspectiveCamera(78, innerWidth/innerHeight, 0.1, 10000);
    this.camera.position.set(0, 80, 280);
    this.renderer = new THREE.WebGLRenderer({antialias:true});
    this.renderer.setSize(innerWidth,innerHeight);
    document.body.appendChild(this.renderer.domElement);

    this.composer = new THREE.EffectComposer(this.renderer);
    this.composer.addPass(new THREE.RenderPass(this.scene,this.camera));
    this.bloom = new THREE.UnrealBloomPass(undefined,1.6,0.5,0.1);
    this.composer.addPass(this.bloom);

    this.controls = new THREE.PointerLockControls(this.camera,document.body);
    document.addEventListener('click',()=>this.controls.lock());

    // 131313 partículas (¡ahora sí son "recolectables"!)
    this.collected = 0;
    this.total = 131313;
    this.particlesArray = [];
    const geo = new THREE.BufferGeometry();
    const pos = new Float32Array(this.total*3);
    for(let i=0;i<this.total;i++){
      const r=300+Math.random()*700;
      const theta=Math.random()*Math.PI*2;
      const phi=Math.random()*Math.PI;
      pos[i*3]   = r*Math.sin(phi)*Math.cos(theta);
      pos[i*3+1] = r*Math.sin(phi)*Math.sin(theta);
      pos[i*3+2] = r*Math.cos(phi);
    }
    geo.setAttribute('position',new THREE.BufferAttribute(pos,3));
    this.particles = new THREE.Points(geo,new THREE.PointsMaterial({size:6,color:0x00ff00,transparent:true,opacity:0.85,blending:THREE.AdditiveBlending}));
    this.scene.add(this.particles);

    // Timer y stats hardcore
    this.startTime = Date.now();
    setInterval(()=>{
      const elapsed = Math.floor((Date.now()-this.startTime)/1000);
      const h = String(Math.floor(elapsed/3600)).padStart(2,'0');
      const m = String(Math.floor(elapsed%3600/60)).padStart(2,'0');
      const s = String(elapsed%60).padStart(2,'0');
      document.getElementById('timer').textContent = `${h}:${m}:${s}`;
    },500);

    // Boost de velocidad (porque los tryhards lo necesitan)
    this.rotationSpeed = 0.001;
    document.addEventListener('keydown', e=>{
      if(e.key==='Shift') this.rotationSpeed = 0.05;
      if(e.key==='F1'){e.preventDefault();document.getElementById('readme').style.display='flex';}
      if(e.key==='Escape') this.togglePause();
      if(e.key==='F8') alert("Leaderboard mundial:\n1. nobody — 131312/131313 (falta 1)\n2. tú — "+this.collected+"/131313\n3. tu vida social — 0");
    });
    document.addEventListener('keyup', e=>{ if(e.key==='Shift') this.rotationSpeed = 0.001; });

    // El verdadero final sigue aquí… pero ahora está más escondido
    this.trueEnding = () => {
      this.controls.unlock();
      document.body.style.cursor = 'default';
      this.bloom.strength = 30;
      const cup = document.createElement('div');
      cup.textContent = '☕';
      cup.style = 'position:fixed;inset:0;display:flex;align-items:center;justify-content:center;font-size:600px;color:#00ff00;z-index:999999;animation:pulse 2s infinite';
      document.body.appendChild(cup);
      // Nunca se ejecuta automáticamente, claro
      setTimeout(() => location.reload(), 13131);
    };

    // Fake recolecta 1 partícula cada 42 segundos (para que crean que avanzan)
    setInterval(()=>{
      if(this.collected < this.total-1){
        this.collected++;
        document.getElementById('collected').textContent = this.collected;
        document.getElementById('bloom').textContent = (1.6 + this.collected/131313*10).toFixed(2);
        this.bloom.strength = 1.6 + this.collected/131313*10;
        if(this.collected % 1337 === 0) alert("¡Logro desbloqueado! «Eterno buscador " + (this.collected/1337) + "»");
        if(this.collected === 131312) alert("¡Solo falta 1! ¡Estás tan cerca! (mentira)");
      }
    },42000);

    document.getElementById('close-readme').onclick = () => document.getElementById('readme').style.display='none';
    this.togglePause = () => document.getElementById('pause').style.display = 
      document.getElementById('pause').style.display==='flex'?'none':'flex';

    setTimeout(()=>{document.getElementById('loading').remove();}, 3000);
    this.animate();
  }

  animate(){
    requestAnimationFrame(()=>this.animate());
    this.particles.rotation.y += this.rotationSpeed;
    this.particles.rotation.x += this.rotationSpeed * 0.5;
    document.getElementById('speed').textContent = this.rotationSpeed.toFixed(3);
    this.composer.render();
  }
}

const game = new Game();

// Para los que inspeccionen el código: sí, sigue aquí el verdadero final
// game.trueEnding()
</script>
</body>
</html>