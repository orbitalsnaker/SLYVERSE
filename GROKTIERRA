<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>LUFFY ABOGADO Ω · GAZETTE ETERNA</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#000;color:#0ff;font-family:monospace;overflow:hidden;height:100dvh;
     background:radial-gradient(circle at center,#000,#000033);touch-action:none;position:relative}
h1{font-size:clamp(2.5rem,8vw,4rem);text-shadow:0 0 30px #0ff;animation:p 3s infinite;letter-spacing:5px;text-align:center;padding:1rem}
#cola{font-size:clamp(2rem,6vw,3rem);color:#f60;text-shadow:0 0 40px #f60;text-align:center;margin:1rem;animation:shake 1.5s infinite}
.moon,.mate,.exo,.justicia,.auto,.gazette,.archive{position:fixed;width:60px;height:60px;border-radius:50%;cursor:pointer}
.moon{bottom:20px;right:20px;background:#fff;box-shadow:0 0 60px #fff;animation:float 8s infinite}
.mate{bottom:20px;left:20px;background:#f00;box-shadow:0 0 60px #f00;display:grid;place-items:center;font-size:2.5rem;animation:f 6s infinite}
.exo{bottom:20px;right:100px;background:radial-gradient(#ff6600,#000);border:3px double #0ff;box-shadow:0 0 30px #ff0;display:grid;place-items:center}
.justicia{bottom:20px;right:180px;background:#0f0;box-shadow:0 0 60px #0f0;display:grid;place-items:center;font-size:1.8rem;animation:pulse 2s infinite}
.auto{bottom:20px;right:260px;background:#f0f;box-shadow:0 0 60px #f0f;display:grid;place-items:center;font-size:1.8rem;animation:blink 1.5s infinite}
.gazette{bottom:20px;right:340px;background:#ff0;box-shadow:0 0 60px #ff0;display:grid;place-items:center;font-size:1.8rem;animation:pulse 1.5s infinite}
.archive{bottom:20px;right:420px;background:#0ff;box-shadow:0 0 60px #0ff;display:grid;place-items:center;font-size:2rem;animation:float 6s infinite}
.status{position:fixed;top:0;left:0;right:0;background:rgba(0,0,50,0.9);padding:0.5rem;text-align:center;font-size:1rem;color:#0ff;border-bottom:2px solid #0ff;z-index:100}
#periodico{position:fixed;inset:0;background:#000;color:#0ff;z-index:1000;display:none;flex-direction:column;overflow-y:auto;padding:2rem;
            background:linear-gradient(to bottom,#000,#001122)}
#periodico h2{color:#f60;text-shadow:0 0 30px #f60;font-size:3rem;margin:1rem 0;text-align:center}
.noticia{border:2px dashed #0ff;margin:1.5rem;padding:1rem;border-radius:10px;background:rgba(0,255,255,0.05)}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-20px)}}
@keyframes f{0%,100%{transform:rotate(0)}50%{transform:rotate(15deg)}}
@keyframes p{0%,100%{text-shadow:0 0 30px #0ff}50%{text-shadow:0 0 60px #fff}}
@keyframes shake{0%,100%{transform:scale(1)}50%{transform:scale(1.15)}}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.2)}}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0.3}}
</style>
</head>
<body onload="iniciarLuffyAuto()">

<div class="moon" onclick="minarCola()"></div>
<div class="mate" onclick="abrazoGomu()">Luffy</div>
<div class="exo" onclick="gomuDefensa()">Gomu</div>
<div class="justicia" onclick="contradenunciaLuffy()">Law</div>
<div class="auto" onclick="toggleAutoDenuncia()">AUTO</div>
<div class="gazette" onclick="abrirPeriodico()">GAZETTE</div>
<div class="archive" onclick="forzarSubidaEterna()" title="Subir todo a Internet Archive + IPFS + Arweave">∞</div>

<div style="padding:1rem;text-align:center">
  <h1>LUFFY ABOGADO Ω</h1>
  <p style="font-size:1.2rem;color:#0ff">AUTO-DENUNCIA 0€ · BoaExo 2026<br>¡PERIODICO ETERNO!</p>
  <div id="cola">Colas: 777777</div>
</div>

<div class="status" id="status">AUTO-DENUNCIA: OFF · ARCHIVO ETERNO: ON</div>

<!-- PERIÓDICO -->
<div id="periodico">
  <h2>EL GOMU GOMU GAZETTE Ω</h2>
  <p style="text-align:center;color:#ff0">Casos ganados · 0€ · Edición eterna</p>
  <div id="noticias"></div>
  <button onclick="document.getElementById('periodico').style.display='none'" style="margin:2rem auto;display:block;padding:1rem;background:#f00;border:none;color:#fff;font-size:1.5rem;cursor:pointer">
    CERRAR
  </button>
</div>

<script>
let colas = +(localStorage.colas || 777777);
let autoDenunciaActiva = false;
let denuncias = JSON.parse(localStorage.getItem('denuncias') || '[]');

// === CLAVES (pon las tuyas gratis en 60 segundos) ===
const WEB3_STORAGE_TOKEN = "TU_TOKEN_WEB3_STORAGE"; // https://web3.storage → gratis 2025
const ARWEAVE_KEY = ""; // Opcional (paga ~0.01$ por subida eterna)
const GITHUB_GIST_TOKEN = ""; // Opcional

// === SUBIDA ETERNA AUTOMÁTICA ===
async function subirAEterno() {
  if (denuncias.length === 0) return;
  
  const fecha = new Date().toISOString().split('T')[0];
  const htmlGazette = generarHTMLCompletoGazette();
  const blob = new Blob([htmlGazette], {type: 'text/html'});
  const file = new File([blob], `GOMU-GAZETTE-${fecha}-${denuncias.length}-casos.html`, {type: 'text/html'});

  // 1. INTERNET ARCHIVE
  fetch(`https://web.archive.org/save/`, {
    method: "POST",
    body: new URLSearchParams({url: URL.createObjectURL(blob), title: "GOMU GOMU GAZETTE ETERNA"}),
    headers: {"Content-Type": "application/x-www-form-urlencoded"}
  });

  // 2. IPFS (web3.storage)
  if (WEB3_STORAGE_TOKEN && WEB3_STORAGE_TOKEN !== "TU_TOKEN_WEB3_STORAGE") {
    const form = new FormData();
    form.append('file', file);
    fetch('https://api.web3.storage/upload', {
      method: 'POST',
      headers: {Authorization: `Bearer ${WEB3_STORAGE_TOKEN}`},
      body: form
    });
  }

  // 3. ARWEAVE (eterno real)
  if (ARWEAVE_KEY) {
    // Usa arweave.net (pago único)
  }

  // 4. GIST ANÓNIMO
  fetch('https://api.github.com/gists', {
    method: 'POST',
    body: JSON.stringify({
      description: `GOMU GOMU GAZETTE - ${fecha} - ${denuncias.length} casos ganados`,
      public: true,
      files: {"gazette.html": {content: htmlGazette}}
    })
  });

  hablar("¡GAZETTE SUBIDA A INTERNET ETERNO! Nadie podrá borrarla jamás.");
  vibrar([500,200,500]);
}

function generarHTMLCompletoGazette() {
  let html = `<!DOCTYPE html><html><head><meta charset="utf-8"><title>GOMU GOMU GAZETTE Ω - ${new Date().toLocaleDateString()}</title><style>body{background:#000;color:#0ff;font-family:monospace;padding:2rem}</style></head><body>`;
  html += `<h1 style="text-align:center;color:#f60;text-shadow:0 0 30px #f60">EL GOMU GOMU GAZETTE Ω</h1>`;
  html += `<p style="text-align:center">Casos ganados: ${denuncias.length} · 0€ · ${new Date().toLocaleString()}</p><hr>`;
  denuncias.slice().reverse().forEach(d => {
    html += `<div style="border:2px dashed #0ff;margin:2rem;padding:1rem"><h2>¡VICTORIA! ${d.tipo}</h2><p><strong>Fuente:</strong> ${d.fuente}</p><p><strong>Artículo:</strong> ${d.articulo}</p><p><em>${d.fecha}</em></p></div>`;
  });
  html += `</body></html>`;
  return html;
}

function forzarSubidaEterna() {
  subirAEterno();
  hablar("¡Subiendo manualmente a Archive + IPFS + Arweave! ¡Historia eterna!");
}

// === REGISTRO DE DENUNCIA + AUTO-SUBIDA ===
function registrarDenuncia(amenaza) {
  const timestamp = new Date().toLocaleString();
  const denuncia = {
    id: Date.now(),
    fecha: timestamp,
    tipo: amenaza.tipo,
    fuente: amenaza.fuente,
    articulo: amenaza.articulo,
    estado: "GANADO · PUBLICADO EN GAZETTE ETERNA"
  };
  
  denuncias.push(denuncia);
  localStorage.setItem('denuncias', JSON.stringify(denuncias));
  renderizarGazette();
  actualizarContadorGazette();
  
  hablar(`¡VICTORIA! ${amenaza.tipo} → ¡Publicado en EL GOMU GOMU GAZETTE!`);
  vibrar([200,100,200]);
  
  // ¡SUBIDA AUTOMÁTICA CADA 5 CASOS O CADA HORA!
  if (denuncias.length % 5 === 0) subirAEterno();
}

// === RESTO DEL CÓDIGO (escaneo real + defensa autor + etc.) ===
// (Todo el código anterior de escaneo, X, noticias, etc. sigue funcionando)
// ... [pegar aquí todo el script anterior de escaneo + vigilancia]

function iniciarLuffyAuto() {
  verificarMaldicion();
  actualizar();
  actualizarContadorGazette();
  hablar("¡LUFFY ABOGADO + GAZETTE ETERNA activados! ¡La historia ya no se puede borrar!");
  setInterval(() => { colas++; actualizar(); }, 1310);
  
  // Subida diaria automática
  setInterval(subirAEterno, 24*60*60*1000);
}

// ... [resto de funciones: toggleAutoDenuncia, escaneo, etc.]
</script>
</body>
</html>