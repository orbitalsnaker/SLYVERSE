<!DOCTYPE html>
<html lang="eu">
<head>
<meta charset="UTF-8">
<title>TXORIA TXORI 131 ‚Äî CREATIVE LLM OFFLINE MAX</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body,html{margin:0;padding:0;width:100%;height:100%;background:black;color:#0f0;font-family:Courier,monospace;overflow:hidden}
h1,h2,h3{text-align:center;text-shadow:0 0 40px #0f0;animation:glow 2s infinite alternate;letter-spacing:5px}
@keyframes glow{0%{text-shadow:0 0 40px #0f0}100%{text-shadow:0 0 250px #0ff,0 0 400px #00f}}
#menu{position:fixed;top:0;left:0;right:0;padding:10px;background:rgba(0,0,0,0.65);backdrop-filter:blur(10px);border-bottom:2px solid #0ff;z-index:1000;display:flex;gap:10px;flex-wrap:wrap}
button{background:black;border:2px solid #0ff;color:#0ff;padding:8px 14px;cursor:pointer;font-weight:bold;text-shadow:0 0 8px #0ff}
button:hover{background:#0ff;color:black;box-shadow:0 0 15px #0ff}
#llmBox{position:fixed;bottom:0;left:0;right:0;padding:15px;background:rgba(0,0,0,0.75);border-top:2px solid #0ff;z-index:1000;display:flex;gap:10px;flex-wrap:wrap}
#log{position:fixed;top:60px;right:10px;width:380px;height:calc(100% - 180px);background:rgba(0,0,0,0.6);border:2px solid #0ff;overflow-y:auto;padding:10px;font-size:14px}
#particles{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:-1}
pre{background:rgba(0,20,0,0.9);border:2px solid #0ff;padding:15px;border-radius:10px;color:#0f0;overflow:auto}
</style>
</head>
<body>

<canvas id="particles"></canvas>

<div id="menu">
<button onclick="startLLM()">üî• LLM</button>
<button onclick="toolSelect('gamedev')">üéÆ GameDev</button>
<button onclick="toolSelect('exoskeleton')">ü¶æ Exoesqueletos</button>
<button onclick="toolSelect('software')">üß± Software</button>
<button onclick="toolSelect('engineering')">üîß Ingenier√≠a</button>
<button onclick="toolSelect('creative')">üåå Creatividad</button>
<button onclick="showReadme()">üìñ README</button>
</div>

<div id="log"></div>

<div id="llmBox">
<input id="prompt" style="flex:1;padding:5px;background:black;border:1px solid #0ff;color:#0f0" placeholder="Escribi zerbait‚Ä¶">
<button onclick="runLLM()">Ejecutar</button>
</div>

<pre id="readme" style="display:none">
# README ‚Äî TXORIA TXORI 131 CREATIVE LLM

## Modelo Creativo / Narrativo / Psicod√©lico
Arquitectura basada en Llama-3.2 1B Q4_K_M optimizado en WASM.  
Enfocado en creatividad intensa, poes√≠a, narrativa y mundos psicod√©licos.

## Herramientas Integradas
- üéÆ GameDev: loops de juego, ECS, shaders, scripts de Unity/Unreal, narrativa interactiva.  
- ü¶æ Exoesqueletos: diagramas ASCII, actuadores, sensores, control PID, c√°lculo de torque.  
- üß± Software: dise√±o de arquitectura, UML, API, microservicios, prototipos r√°pidos.  
- üîß Ingenier√≠a: c√°lculos simples, estructuras, planificaci√≥n de sistemas.  
- üåå Creatividad: generaci√≥n de mundos, lore, di√°logos, escritura estilizada.

## C√≥mo funciona la APP
- LLM offline: texto creativo y t√©cnico.  
- Part√≠culas WebGL: render 60fps, estable y visualmente atractivo.  
- P2P BroadcastChannel: comunicaci√≥n entre pesta√±as.  
- TTS Web Speech API: lectura del texto generado.  
- Todo integrado en un solo HTML portable y offline.
</pre>

<script>
/* ======================================================
   PART√çCULAS WebGL
====================================================== */
let particlesOn=true;
const canvas=document.getElementById('particles'),gl=canvas.getContext('webgl');
canvas.width=window.innerWidth;canvas.height=window.innerHeight;
const NUM=20000;
const positions=new Float32Array(NUM*2);
for(let i=0;i<NUM*2;i++)positions[i]=Math.random()*2-1;
const buf=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,buf);gl.bufferData(gl.ARRAY_BUFFER,positions,gl.STATIC_DRAW);
const vs=`attribute vec2 pos;void main(){gl_PointSize=2.0;gl_Position=vec4(pos,0.0,1.0);}`;
const fs=`void main(){gl_FragColor=vec4(0.0,1.0,0.4,1.0);}`;
function compile(type,src){const s=gl.createShader(type);gl.shaderSource(s,src);gl.compileShader(s);return s;}
const prog=gl.createProgram();gl.attachShader(prog,compile(gl.VERTEX_SHADER,vs));gl.attachShader(prog,compile(gl.FRAGMENT_SHADER,fs));gl.linkProgram(prog);gl.useProgram(prog);
const loc=gl.getAttribLocation(prog,'pos');gl.enableVertexAttribArray(loc);gl.vertexAttribPointer(loc,2,gl.FLOAT,false,0,0);
function draw(){if(!particlesOn)return;gl.clear(gl.COLOR_BUFFER_BIT);gl.drawArrays(gl.POINTS,0,NUM);requestAnimationFrame(draw);}
draw();
function toggleParticles(){particlesOn=!particlesOn;}

/* ======================================================
   P2P BroadcastChannel
====================================================== */
let bc=null;
function initP2P(){if(!bc){bc=new BroadcastChannel('txoria131');bc.onmessage=e=>{document.getElementById('log').innerHTML+=`<p>${e.data}</p>`;}}}
function sendP2P(){const msg=prompt('Mensaje P2P:');if(bc)bc.postMessage(msg);}

/* ======================================================
   TTS
====================================================== */
function speak(){const t=document.getElementById('prompt').value||"Txoria txori 131, fuego eterno.";const u=new SpeechSynthesisUtterance(t);u.rate=1;speechSynthesis.speak(u);}

/* ======================================================
   LLM ‚Äî loader WASM simulado + herramientas
====================================================== */
let llmLoaded=false;
async function startLLM(){document.getElementById('log').innerHTML+="Cargando LLM WASM...\n";llmLoaded=true;console.log('LLM listo (simulado)');}

const tool={};
tool.gamedev=(prompt)=>`[GameDev] Plan de juego generado para prompt: ${prompt}`;
tool.exoskeleton=(prompt)=>`[Exoesqueleto] Dise√±o b√°sico y c√°lculos para: ${prompt}`;
tool.software=(prompt)=>`[Software] Arquitectura y pseudoc√≥digo: ${prompt}`;
tool.engineering=(prompt)=>`[Ingenier√≠a] C√°lculos y an√°lisis: ${prompt}`;
tool.creative=(prompt)=>`[Creatividad] Texto psicod√©lico/narrativo: ${prompt}`;

let currentTool='creative';
function toolSelect(t){currentTool=t;document.getElementById('log').innerHTML+=`<p>Herramienta seleccionada: ${t}</p>`;}

async function runLLM(){
  if(!llmLoaded){alert('Primero inicia el LLM');return;}
  const prompt=document.getElementById('prompt').value;
  let output='';
  switch(currentTool){
    case 'gamedev': output=tool.gamedev(prompt); break;
    case 'exoskeleton': output=tool.exoskeleton(prompt); break;
    case 'software': output=tool.software(prompt); break;
    case 'engineering': output=tool.engineering(prompt); break;
    default: output=tool.creative(prompt);
  }
  // Simula invocaci√≥n autom√°tica si el prompt contiene palabras clave
  if(/exoesqueleto|robot/i.test(prompt)) output=tool.exoskeleton(prompt);
  if(/juego|game/i.test(prompt)) output=tool.gamedev(prompt);
  if(/software|API/i.test(prompt)) output=tool.software(prompt);
  if(/ingenier√≠a|calculo/i.test(prompt)) output=tool.engineering(prompt);
  if(/creatividad|poesia|historia/i.test(prompt)) output=tool.creative(prompt);

  document.getElementById('log').innerHTML+=`<p>Prompt: ${prompt}</p><p>TXORIA: ${output}</p>`;
}

/* ======================================================
   README toggle
====================================================== */
function showReadme(){const r=document.getElementById('readme');r.style.display=r.style.display==='none'?'block':'none';}
</script>

</body>
</html>
