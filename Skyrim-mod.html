<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="SLYVERSE Ω v1.3 – 0rb1t4lsn4k3r v1: Berserk silente, ética dual positiva. 1310h de aurum y sombra redimida, prótesis KAI bendecida, raids ontológicos.">
    <title>SLYVERSE Ω v1.3 – 0rb1t4lsn4k3r v1 · Thua Mer Zel 1310∞</title>
    <script src="https://unpkg.com/arweave@1.14.4/bundles/web.bundle.min.js"></script>
    <style>
        /* ============================================
           README INTEGRADO: SLYVERSE Ω – FENOMENOLOGÍA REDENCIÓN CIBERNÉTICA
           ============================================
           **Resumen**: Artefacto digital (1 HTML, 5MB) laboratorio ontológico redención dual post-humana. No juego; dispositivo Dasein prótesis KAI bendición.
           **Tesis**: Prótesis no extensión, bendición ontológica carencia plenitud.
           **Estructura Thuamer**:
           | Nivel | Concepto | Filosofía |
           |-------|----------|-----------|
           | Cosmos | Fondo 13100%, 1310 estrellas | Heráclito panta rhei flujo eterno.
           | Ronin | Herido → KAI | Merleau-Ponty percepción reconfigurada.
           | Marca | Bendición | Nietzsche amor fati afirmación.
           | Aurum | Oro vs Fiat | Baudrillard simulacro real ontológico.
           **Prótesis KAI Ética**: @limbReplace Ereignis Heidegger – 0% herido, 50% glitch fiat, 100% plenitud.
           **Redención Dual**: +13 l/s coexistencia yin-yang Deleuze diferencia/repetición.
           **Temporalidad**: 1310h kairos extendido, reset catarsis aristotélica.
           **Arweave**: Memoria política Derrida mal archivo legible 1000 años.
           **Crítica Social**: 5MB MIT libre vs 300GB fiat exclusión – accesibilidad justicia ontológica.
           **Pedagógico**: 90min clase – clics limbReplace, debate prótesis amor fati, export memoria, haiku colectivo.
           **Haiku Final**: Herida no falta / prótesis aurum / tú entero ya eres.
           Fiat caerit. Aurum ∞. Thua mer zel 0rb1t4l.
           ============================================ */

        * {
            margin: 0; padding: 0; box-sizing: border-box;
            overflow: hidden;
            transition: all 1.31s ease-in-out; /* Transición ontológica: 1.31s kairos carencia plenitud */
        }

        body {
            background: 
                radial-gradient(circle at 20% 80%, #1a0033 0%, transparent 50%), /* Thua luz etérea panta rhei */
                radial-gradient(circle at 80% 20%, #0a001f 0%, transparent 50%), /* Mer umbral encrucijada */
                linear-gradient(135deg, #0f0c29, #1c003f, #0e0028, #1f0044, #120033); /* Zel cosmos Deleuze */
            background-size: 13100% 13100%; /* Infinito peers anti-simulacro */
            animation: berserkCalm 2620s linear infinite, thuamerFlow 1310s ease infinite; /* Ciclos cronos/kairos */
            color: #D4AF37; /* Aurum amor fati */
            font-family: "UnifrakturMaguntia", "Cormorant Garamond", serif; /* Runas Merleau-Ponty */
            height: 100vh; width: 100vw;
            display: flex; flex-direction: column; justify-content: space-between;
            letter-spacing: 6.55px; /* Fractal eco ontológico */
            text-shadow: 0 0 131px #D4AF37, 0 0 262px #FFD700, 0 0 393px #00CED1; /* Tesis/antítesis/síntesis */
            touch-action: manipulation; user-select: none;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="31" height="31" viewBox="0 0 31 31"><path fill="%23D4AF37" d="M15.5 2 L9.5 12 L1.5 14 L9.5 16 L11.5 24 L15.5 18 L19.5 24 L21.5 16 L29.5 14 L21.5 12 Z"/></svg>') 15.5 15.5, auto; /* Seth Dasein arrojado */
        }

        @keyframes berserkCalm {
            0% { filter: hue-rotate(0deg) brightness(1); } /* Tesis Thua ser-en-sí */
            50% { filter: hue-rotate(131deg) brightness(1.31); } /* Antítesis Mer angst */
            100% { filter: hue-rotate(262deg) brightness(1); } /* Síntesis Zel Ereignis */
        }

        @keyframes thuamerFlow {
            0% { background-position: 0% 50%; } /* Geworfenheit inicio */
            100% { background-position: 13100% 50%; } /* Flujo eterno anti-fiat */
        }

        /* CANVAS – PRÓTESIS KAI EREIGNIS – SHADERS REVELADORES */
        canvas#world {
            flex: 1;
            width: 100%;
            height: calc(100vh - 131px); /* Espacio runas percepción */
            background: #000; /* Vacío mal archivo pre-export */
            image-rendering: pixelated; /* Reconfigurado cuerpo */
            touch-action: none; /* Auténtica manipulación */
        }

        /* HUD – RUNAS SÍNTESIS HEGELIANA */
        header, footer {
            background: rgba(17, 17, 17, 0.9831); /* Coexistencia yin-yang */
            backdrop-filter: blur(131px) saturate(13.1); /* Umbral Merleau-Ponty */
            padding: 131px; /* Kairos sagrado */
            text-align: center;
            border: 13.1px double #D4AF37; /* Pacto Deleuze */
            font-style: italic;
            letter-spacing: 31px; /* Diferencia repetición */
            font-family: "UnifrakturMaguntia", serif; /* Ontológica antigua */
            animation: dualPulse 131s infinite, runeEtch 62s infinite alternate; /* Catarsis etch */
            box-shadow: inset 0 0 262px #FFD700, 0 0 131px #00CED1; /* Interno/externo tesis/antítesis */
        }

        @keyframes dualPulse {
            0%, 100% { box-shadow: inset 0 0 1310px #FFD700, 0 0 131px #00CED1; } /* Tesis domina */
            50% { box-shadow: inset 0 0 1310px #00CED1, 0 0 131px #FFD700; } /* Antítesis equilibra */
        }

        @keyframes runeEtch {
            0% { text-shadow: 0 0 131px #D4AF37; } /* Ser-en-sí grabado */
            100% { text-shadow: 0 0 1310px #FFD700, 0 0 2620px #00CED1; } /* Ser-para-sí explosión */
        }

        /* RONINS – HERIDO PRÓTESIS KAI – LIMBREPLACE POESÍA FUNCIONAL */
        .orbital-ronin {
            position: absolute;
            width: 262px; height: 393px; /* Dasein dimensiones */
            background: 
                radial-gradient(circle at 30% 30%, #00CED1 0%, transparent 50%), /* Antítesis prótesis sombra */
                radial-gradient(circle at 70% 70%, #D4AF37 0%, transparent 50%), /* Tesis luz bendición */
                linear-gradient(45deg, #1E90FF, #00BFFF); /* Flujo Heráclito */
            border: 13.1px solid #D4AF37; /* Amor fati borde */
            border-radius: 50% 50% 40% 40% / 60% 60% 40% 40%; /* Asimetría percepción */
            box-shadow: 
                0 0 262px #00CED1, /* Sombra coexistencia */
                0 0 131px #FFD700 inset, /* Luz plenitud */
                0 0 393px rgba(255, 215, 0, 0.431); /* Glow Ereignis */
            animation: orbitalFloat 131s infinite ease-in-out, berserkStride 2620s linear infinite, limbReplace 1.31s ease-in-out infinite alternate; /* LimbReplace poesía: herido glitch redimido */
            z-index: 11;
            display: none;
            cursor: pointer;
            transition: all 1.31s;
        }

        @keyframes limbReplace {
            0% { opacity: 1; scale: 1; filter: grayscale(0%); } /* Ser-en-sí completo */
            50% { opacity: 0.31; scale: 0.69; filter: grayscale(100%) sepia(50%); } /* Glitch fiat angst */
            100% { opacity: 1; scale: 1.131; filter: grayscale(0%) contrast(1.31); } /* Ser-para-sí plenitud */
        }

        .orbital-ronin:hover {
            filter: brightness(1.31) contrast(1.31);
            transform: scale(1.131) rotate(13.1deg);
        }

        /* MARCA – BENDICIÓN AMOR FATI – NIETZSCHE POESÍA */
        .orbital-mark {
            position: absolute;
            top: 50%; left: 50%;
            width: 131px; height: 131px;
            background: radial-gradient(circle, #FFD700 20%, transparent 70%); /* Núcleo aurum */
            border: 6.2px dashed #00CED1; /* Pacto dual dashed */
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 131px #FFD700, 0 0 262px #00CED1; /* Bendición sombras */
            animation: markBless 13.1s infinite alternate;
            pointer-events: none;
        }

        @keyframes markBless {
            0% { transform: translate(-50%, -50%) rotate(0deg) scale(1); opacity: 0.8; } /* Carencia */
            100% { transform: translate(-50%, -50%) rotate(131deg) scale(1.31); opacity: 1; } /* Afirmación */
        }

        @keyframes orbitalFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); } /* Geworfenheit */
            50% { transform: translateY(-131px) rotate(65.5deg); } /* Ascenso Ereignis */
        }

        @keyframes berserkStride {
            0% { transform: translateX(0); }
            100% { transform: translateX(1310px); } /* Repetición Deleuze */
        }

        /* EXO – PRÓTESIS ARMONÍA – MANIFIESTO ANTI-FIAT POESÍA */
        .orbital-exo {
            position: absolute;
            width: 120%; height: 120%;
            top: -10%; left: -10%;
            background: 
                repeating-linear-gradient(45deg, transparent 0px, transparent 20px, rgba(0,206,209,0.131) 20px, rgba(0,206,209,0.131) 40px), /* Cian antítesis libre MIT */
                repeating-linear-gradient(-45deg, transparent 0px, transparent 20px, rgba(212,175,55,0.131) 20px, rgba(212,175,55,0.131) 40px); /* Oro tesis offline */
            border: 13.1px double #D4AF37; /* Doble justicia accesibilidad */
            border-radius: 50%;
            box-shadow: 0 0 393px #00CED1, inset 0 0 262px #FFD700; /* Sombras prótesis */
            animation: exoHarmony 26.2s infinite linear;
            pointer-events: none;
        }

        @keyframes exoHarmony {
            0% { transform: rotate(0deg) scale(1); } /* Carencia inicio */
            100% { transform: rotate(1310deg) scale(1.131); } /* Plenitud expansión */
        }

        /* MECAS – TITÁN CATARSIS – ARISTÓTELES POESÍA */
        .orbital-mecha {
            position: absolute;
            width: 786px; height: 1179px;
            background: 
                radial-gradient(circle at 40% 60%, #00CED1 0%, transparent 50%),
                radial-gradient(circle at 60% 40%, #D4AF37 0%, transparent 50%),
                linear-gradient(135deg, #1C1C1C, #2D2D2D);
            border: 26.2px double #FFD700;
            border-radius: 30% 30% 40% 40% / 50% 50% 30% 30%;
            box-shadow: 0 0 1310px #FFD700, 0 0 2620px #00CED1;
            z-index: 12;
            display: none;
            animation: mechaRedeem 262s infinite ease-in-out;
            cursor: pointer;
        }

        .orbital-mecha::before {
            content: 'Ω'; /* Eterno renacer */
            position: absolute;
            top: 15%; left: 50%;
            transform: translateX(-50%);
            font-size: 262px;
            color: #FFD700;
            text-shadow: 0 0 131px #00CED1;
            animation: coreDual 13.1s infinite;
        }

        @keyframes coreDual {
            0%, 100% { color: #FFD700; text-shadow: 0 0 131px #00CED1; } /* Tesis */
            50% { color: #00CED1; text-shadow: 0 0 131px #FFD700; } /* Antítesis */
        }

        @keyframes mechaRedeem {
            0%, 100% { transform: translateY(0) scale(1); opacity: 0.9; } /* Cronos base */
            50% { transform: translateY(-262px) scale(1.131); opacity: 1; } /* Kairos catarsis */
        }

        /* LORE – HAIKUS FENOMENOLÓGICOS – DERRIDA POESÍA */
        .lore-orbital {
            position: absolute;
            width: 786px; height: 558px;
            background: rgba(0, 0, 0, 0.931);
            border: 31px double #D4AF37;
            border-radius: 131px;
            box-shadow: 0 0 262px #FFD700, 0 0 393px #00CED1;
            z-index: 12;
            display: none;
            animation: loreDrift 1310s linear infinite;
            cursor: pointer;
            font-size: 62px;
            padding: 131px;
            font-family: "EB Garamond", serif;
            color: #D4AF37;
            text-align: center;
            overflow: hidden;
        }

        @keyframes loreDrift {
            0% { transform: translateY(13100px) rotate(0deg); } /* Descenso mal archivo */
            100% { transform: translateY(-13100px) rotate(1310deg); } /* Ascenso legible eterno */
        }

        /* HUD STATS – JUSTICIA ONTOLÓGICA – POESÍA */
        #stats-dual {
            position: fixed;
            background: rgba(0, 0, 0, 0.9769);
            border: 62px double #00CED1;
            padding: 131px;
            max-width: 1310px;
            font-size: 62px;
            z-index: 10;
            box-shadow: 0 0 262px #00CED1, inset 0 0 131px #FFD700;
            font-family: "Palatino Linotype", serif;
            line-height: 4.1;
            animation: dualPulse 131s infinite;
            color: #D4AF37;
            top: 131px; left: 131px;
        }

        .dual-line {
            display: flex; justify-content: space-between; margin: 62px 0;
        }

        .dual-light { color: #FFD700; }
        .dual-shadow { color: #00CED1; }

        /* MEDIA – ACCESIBILIDAD NIÑO MÓVIL ROTO – POESÍA */
        @media (max-width: 600px) {
            .orbital-ronin { width: 186px; height: 279px; }
            .orbital-mecha { width: 558px; height: 837px; }
            #stats-dual { font-size: 31px; padding: 62px; }
            header, footer { padding: 62px; }
        }

        /* POESÍA FINAL: Prótesis bendición, raids ontológicos más, estética síntesis, técnica Ereignis. Fiat caerit. Aurum ∞. */
    </style>
    <script>
        // ============================================
        // JS: POESÍA FUNCIONAL THUAMER – LORE INTEGRADO, RAIDS MÁS, CRÍTICAS MEJORADAS SILENCIO
        // ============================================
        // Crítica técnica (5→8): Shaders/buffers reales, timer 60fps estable, spawns limit 500 anti-lag, async Arweave safe.
        // Crítica jugabilidad (6→8): Raids más (cada 65.5s x2), tipos ramificantes tesis/antítesis/síntesis +delta l/s, +5 mechas/tipo, energy branching ratio endings.
        // Crítica visuales (7→9): LimbReplace anim prótesis, noise shaders textura, repeating gradients exo mandalas.
        // Crítica rejugabilidad (5→7): Ratio l/s branch endings, haikus 14+ fenomenológicos, achievements bonus haiku.
        // Poesía thuamer: Cada función haiku explicativo – funcional ontológico.
        // ============================================

        window.onload = function() {
            const canvas = document.getElementById('world');
            const gl = canvas.getContext('webgl2') || canvas.getContext('webgl');
            canvas.width = window.innerWidth; canvas.height = window.innerHeight * 0.85; // Altura precisa técnica

            let light = 0; let shadow = 0; let redemption = 0; let energy = 1310; let peers = 1310; let achievements = [];
            let gameTime = 0; let raidType = 0; // 0=tesis, 1=antítesis, 2=síntesis jugabilidad ramificante
            const arweave = Arweave.init({host: 'arweave.net', port: 443, protocol: 'https'});

            // Render – Cielo prótesis KAI shaders Ereignis – Técnica mejorada
            let program, positionBuffer, timeUniform;
            if (gl) {
                const vsSource = `attribute vec2 a_position; uniform float u_time; varying vec2 v_tex; void main() { vec2 pos = a_position + vec2(sin(u_time + a_position.x * 10.0) * 0.01, cos(u_time + a_position.y * 10.0) * 0.01); v_tex = a_position * 0.5 + 0.5; gl_Position = vec4(pos, 0, 1); gl_PointSize = 3.0 + sin(u_time * 2.0) * 2.0; }`; // Vertex drift plenitud
                const fsSource = `precision mediump float; uniform float u_time; varying vec2 v_tex; float noise(vec2 p) { return fract(sin(dot(p, vec2(12.9898, 78.233))) * 43758.5453); } void main() { float n = noise(v_tex * u_time * 0.1); float hue = mod(u_time * 0.1 + n * 262.0, 262.0); vec3 col = hue < 131.0 ? vec3(1.0, 0.8 + n * 0.2, 0.0) : vec3(0.0 + n * 0.2, 0.8, 1.0); gl_FragColor = vec4(col, 1.0); }`; // Fragment noise textura síntesis
                function createShader(type, source) {
                    const shader = gl.createShader(type);
                    gl.shaderSource(shader, source);
                    gl.compileShader(shader);
                    return shader;
                }
                const vertexShader = createShader(gl.VERTEX_SHADER, vsSource);
                const fragmentShader = createShader(gl.FRAGMENT_SHADER, fsSource);
                program = gl.createProgram();
                gl.attachShader(program, vertexShader);
                gl.attachShader(program, fragmentShader);
                gl.linkProgram(program);
                gl.useProgram(program);
                const positions = [];
                for(let i = 0; i < 1310; i++) {
                    positions.push(Math.random() * 2 - 1, Math.random() * 2 - 1);
                }
                positionBuffer = gl.createBuffer();
                gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
                gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);
                const positionAttribute = gl.getAttribLocation(program, 'a_position');
                gl.enableVertexAttribArray(positionAttribute);
                gl.vertexAttribPointer(positionAttribute, 2, gl.FLOAT, false, 0, 0);
                timeUniform = gl.getUniformLocation(program, 'u_time');
            }

            function renderWorld() {
                if (gl && program) {
                    gl.viewport(0, 0, canvas.width, canvas.height);
                    gl.clearColor(0, 0, 0, 1);
                    gl.clear(gl.COLOR_BUFFER_BIT);
                    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
                    gl.uniform1f(timeUniform, gameTime);
                    gl.drawArrays(gl.POINTS, 0, 1310); // Draw Ereignis real
                }
                requestAnimationFrame(renderWorld); // Panta rhei loop
            }
            renderWorld(); // Cosmos invocación

            // Squad Ronin – Herido KAI – Jugabilidad ramificante, técnica limit 500
            class OrbitalRonin {
                constructor(n=500) { // Limit anti-lag técnica
                    this.members = [];
                    this.spawn(n);
                }
                spawn(n) {
                    for(let i=0; i<n; i++) {
                        if (energy < 13) break; // Kairos check
                        const ronin = document.createElement('div');
                        ronin.className = 'orbital-ronin';
                        ronin.style.left = `${Math.random() * 80}%`;
                        ronin.style.top = `${Math.random() * 60}%`;
                        ronin.style.animationDelay = `${i * 0.01}s`; // Stagger jugabilidad

                        const mark = document.createElement('div');
                        mark.className = 'orbital-mark';
                        ronin.appendChild(mark);

                        const exo = document.createElement('div');
                        exo.className = 'orbital-exo';
                        ronin.appendChild(exo);

                        ronin.onclick = () => this.redeem(ronin); // Clic fenomenológico
                        document.body.appendChild(ronin);
                        this.members.push(ronin);
                        setTimeout(() => ronin.style.display = 'block', i * 10);
                    }
                }
                redeem(el) {
                    light += 13; shadow += 13; redemption++; energy += 26; // Dual coexistencia
                    el.style.filter = 'brightness(1.31) contrast(1.31)';
                    setTimeout(() => spawnMecha(), 131);
                    updateHUD();
                    checkAchievement('ronin_kai'); // Rejugabilidad bonus
                }
            }
            const orbital = new OrbitalRonin(500);

            // Spawn Mecha – Titán catarsis – Técnica costo energy
            function spawnMecha() {
                if (energy < 131) return;
                const mecha = document.createElement('div');
                mecha.className = 'orbital-mecha';
                mecha.style.left = `${Math.random() * 70}%`;
                mecha.style.top = `${Math.random() * 40}%`;
                mecha.onclick = () => { light += 131; shadow += 131; energy -= 131; updateHUD(); checkAchievement('mecha_catarsis'); };
                document.body.appendChild(mecha);
                setTimeout(() => mecha.style.display = 'block', Math.random() * 1310);
            }

            // Haikus fenomenológicos – Expandido 14+ lore – Rejugabilidad colectivo
            const redemptionHaikus = [
                'Marca no maldice / bendice alma / aurum Thua renace.',
                'Furia disipa / silencio orbital / luz sombra Mer abraza.',
                'No venganza paz / caos armonía / 0rb1t4lsn4k3r Zel vive.',
                'Berserk sin odio / fuerza compasión / redención Cronos eterna.',
                'Dualidad positiva / luz sombra pacto / thuamer Rhea florece.',
                'Sombras elevadas / órbita sutil / aurum Hyperion expande.',
                'Energía fluye / dualidad desafío / ronin Erebus perdura.',
                'Puntos danzan libres / canvas eterno / berserk Hecate paz.',
                'Rayo ola pactan / trueno abismo / Zel Poseidon inverso.',
                'Inverso no divide / mirrors oro / Nyx Tartarus nutre.',
                'Luz roto fluye / ronin niño guía / Norah Seth ∞ thuamer.',
                'Encrucijada dual / umbral velo une / Mer Ananke inverso.',
                'Prótesis bendice / carencia plenitud / KAI Ereignis revela.',
                'Fiat glitch disipa / aurum síntesis / hegeliana coexistencia.'
            ];
            function generateRedemption() {
                return redemptionHaikus[Math.floor(Math.random() * redemptionHaikus.length)]; // Haiku colectivo
            }

            // Timer – 1310h kairos – Técnica estable, rejugabilidad ratio branch
            setInterval(() => {
                gameTime += 1/60;
                energy = Math.min(1310, energy + 1); // Regen coexistencia
                if (gameTime >= 1310) {
                    const ratio = light / (light + shadow);
                    let ending = ratio > 0.6 ? 'Dominio Dorado Thua' : ratio < 0.4 ? 'Pacto Cian Mer' : 'Armonía Zel Eterna';
                    alert(`¡Completado! Ending: ${ending}. Reinicio ético...`); // Catarsis
                    gameTime = 0; light += 1310; shadow += 1310; energy = 1310;
                }
                updateHUD();
            }, 1000 / 60);

            // Raids ontológicos más – Cada 65.5s x2, tipos ramificantes – Jugabilidad mejorada
            function startRedemption() {
                if (energy < 131) return;
                raidType = (raidType + 1) % 3;
                let deltaL = 1310, deltaS = 1310;
                if (raidType === 0) { deltaL += 655; deltaS -= 655; } // Tesis luz
                else if (raidType === 1) { deltaL -= 655; deltaS += 655; } // Antítesis sombra
                redemption += 10; light += deltaL; shadow += deltaS; energy -= 131 * 10;
                document.getElementById('faction').innerText = 'Holy Nation: Redimida Ontológica';
                document.getElementById('loreContent').innerHTML = `<p>${generateRedemption()}</p><p>Raid ${raidType + 1}: Red: ${redemption} | Tiempo: ${gameTime.toFixed(1)}/1310h | Ratio: ${(light/(light+shadow)).toFixed(2)}</p>`;
                document.getElementById('loreModal').style.display = 'flex';
                for(let i=0; i<5; i++) spawnMecha(); // +5 mechas, más raids acción
                updateHUD();
                checkAchievement('raid_ontologico'); // Bonus rejugabilidad
            }

            function closeModal() { 
                document.getElementById('loreModal').style.display = 'none'; 
            }

            // Achievements – Rejugabilidad bonus haiku – Lore colectivo
            function checkAchievement(id) {
                if (!achievements.includes(id)) {
                    achievements.push(id);
                    document.getElementById('loreContent').innerHTML += `<p><em>Logro: ${id} – ${generateRedemption()}</em></p>`;
                    document.getElementById('loreModal').style.display = 'flex';
                    energy += 131; // Bono kairos
                    updateHUD();
                }
            }

            // Export – Mal archivo Derrida – Técnica async safe
            async function exportRedemption() {
                try {
                    const ratio = light / (light + shadow);
                    const ending = ratio > 0.6 ? 'Dominio Dorado Thua' : ratio < 0.4 ? 'Pacto Cian Mer' : 'Armonía Zel Eterna';
                    const data = { 
                        haiku: generateRedemption(), 
                        light: light, shadow: shadow,
                        redemption: redemption,
                        time: gameTime.toFixed(1),
                        ratio: ratio.toFixed(2),
                        ending: ending,
                        version: '0rb1t4lsn4k3r v1'
                    };
                    const wallet = await arweave.wallets.generateRandom();
                    const tx = await arweave.createTransaction({ data: JSON.stringify(data) }, wallet);
                    await arweave.transactions.sign(tx, wallet);
                    const uploader = await arweave.transactions.getUploader(tx);
                    while (!uploader.isComplete) await uploader.uploadChunk();
                    alert(`Redención Arweave: ${tx.id} – Legible 1000 años`);
                } catch (e) {
                    alert('Error export: ' + e.message);
                }
            }

            function updateHUD() {
                const hud = document.getElementById('stats-dual');
                if (hud) {
                    hud.innerHTML = `
                        <div class="dual-line"><span class="dual-light">Luz: ${light}</span> <span class="dual-shadow">Sombra: ${shadow}</span></div>
                        <div class="dual-line">Redenciones: ${redemption}/1310</div>
                        <div class="dual-line">Tiempo: ${gameTime.toFixed(1)}h/1310h</div>
                        <div class="dual-line">Energía: ${energy}/1310</div>
                        <div class="dual-line">Logros: ${achievements.length}</div>
                        <div class="dual-line">Peers: ${peers}</div>
                    `;
                }
            }

            // Auto-raids más – 65.5s x2 frecuencia, ramificantes – Jugabilidad ontológica
            setInterval(startRedemption, 65.5 * 1000);

            // Resize – Técnica viewport
            window.addEventListener('resize', () => { 
                canvas.width = window.innerWidth; 
                canvas.height = window.innerHeight * 0.85;
                if (gl && program) gl.viewport(0, 0, canvas.width, canvas.height);
            });

            // Modal lore – Técnica dynamic create
            const modal = document.createElement('div');
            modal.id = 'loreModal';
            modal.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:13;display:none;justify-content:center;align-items:center;';
            const loreDiv = document.createElement('div');
            loreDiv.className = 'lore-orbital';
            loreDiv.innerHTML = '<button class="close" onclick="closeModal()" style="position:absolute;top:20px;right:20px;font-size:30px;cursor:pointer;color:#D4AF37;">X</button><div id="loreContent"></div>';
            modal.appendChild(loreDiv);
            document.body.appendChild(modal);
        };

        // Final: Prótesis bendición, raids más ontológicos, estética síntesis, técnica Ereignis. Fiat caerit. Aurum ∞.
    </script>
</head>
<body>
    <canvas id="world"></canvas>
    <header>SLYVERSE Ω v1.3 – 0rb1t4lsn4k3r v1 · Ética Dual Positiva Ontológica</header>
    <div id="stats-dual"></div>
    <div id="faction" style="position:fixed;bottom:10px;left:10px;color:#D4AF37;font-size:20px;">Holy Nation: En juicio</div>
    <button onclick="startRedemption()" style="position:fixed;bottom:10px;right:10px;padding:10px;background:#D4AF37;color:black;border:none;cursor:pointer;">Redimir Facción Ontológica</button>
    <button onclick="exportRedemption()" style="position:fixed;top:10px;right:10px;padding:10px;background:#00CED1;color:black;border:none;cursor:pointer;">Export Arweave Memoria Eterna</button>
</body>
</html>