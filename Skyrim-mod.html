<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>SLYVERSE Ω AAA-A · Nido Omega · 1310 Horas</title>
<style>
html,body{margin:0;height:100%;background:#000;color:#0f0;font-family:'Cormorant Garamond',serif;overflow:hidden;position:relative}
canvas{position:fixed;inset:0;z-index:1}
.luz{background:radial-gradient(circle at var(--mx,50%) var(--my,50%), rgba(0,255,0,0.2) 0%, transparent 80%);position:fixed;inset:0;pointer-events:none;z-index:2}
.lore{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;max-width:90%;background:rgba(0,18,0,0.95);padding:4rem 6rem;border:10px solid #0f0;border-radius:140px;box-shadow:0 0 180px #0f0,inset 0 0 120px rgba(0,255,0,0.28);z-index:10;text-shadow:0 0 60px #0f0;font-size:clamp(1.7rem,6vw,4rem);line-height:1.8;transition:all 3s cubic-bezier(0.16,1,0.3,1)}
.lore small{display:block;font-size:0.36em;margin-top:3rem;opacity:0.96;line-height:1.6}
.mate{position:fixed;bottom:38px;left:50%;transform:translateX(-50%);background:rgba(0,30,0,0.95);padding:1.6rem 5rem;border:9px solid #0f0;border-radius:110px;font-size:2.2rem;box-shadow:0 0 100px #0f0;cursor:pointer;transition:0.8s;z-index:12;animation:breath 4s infinite}
@keyframes breath{0%,100%{box-shadow:0 0 100px #0f0}50%{box-shadow:0 0 160px #0f0}}
.mate:hover{transform:translateX(-50%) scale(1.2)}
#readme{position:fixed;inset:0;background:#000;z-index:9999;overflow-y:auto;padding:4rem 2rem;opacity:0;pointer-events:none;transition:opacity 2s;display:flex;align-items:center;justify-content:center}
#readme:target{opacity:1;pointer-events:all}
.inner{background:rgba(0,20,0,0.95);border:10px solid #0f0;border-radius:80px;padding:4rem 5rem;max-width:940px;box-shadow:0 0 160px #0f0;text-align:center;font-size:1.7rem;line-height:2}
.inner h1{font-size:5rem;margin:0 0 3rem;text-shadow:0 0 50px #0f8;color:#0f8}
.inner h2{font-size:3rem;margin:3rem 0 2rem;color:#0ff;text-shadow:0 0 30px #0ff}
.close{position:fixed;top:30px;right:30px;font-size:5rem;color:#0f0;width:90px;height:90px;background:rgba(0,30,0,0.8);border:5px solid #0f0;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 0 60px #0f0;transition:0.5s;text-decoration:none}
.close:hover{transform:rotate(90deg) scale(1.3);background:#0f0;color:#000}
</style>
</head>
<body onmousemove="e=>{document.body.style.setProperty('--mx',e.clientX/innerWidth*100+'%');document.body.style.setProperty('--my',e.clientY/innerHeight*100+'%')}">

<canvas id="c"></canvas>
<div class="luz"></div>
<div class="lore" id="lore"></div>
<div class="mate" id="mate">Cebar el abrazo</div>
<div id="readme">
  <div class="inner" id="readme-content">
    <h1>SLYVERSE Ω AAA-A - Readme</h1>
    <p>Explora el universo Thuamer con 1310 horas y 131310 abrazos digitales. Cada acción interactúa con runas, partículas y el lore.</p>
    <h2>Controles</h2>
    <ul>
      <li>Doble click: abrir/cerrar Readme y activar eclipse temporal</li>
      <li>Click en el botón: enviar abrazo digital</li>
      <li>Mouse move: controla la luz y partículas</li>
      <li>Decisiones en el lore desbloquean runas y efectos especiales</li>
    </ul>
    <a href="#" class="close">×</a>
  </div>
</div>

<script type="module">
// ========================== THUAMER AAA-A MODULE ==========================
const loreData={
  es:`1310 maullidos latiendo con el pulso de Lorkhan en la puerta de Todd,<br>uniendo Red Mountain y Rockville.<br>Norah maúlla golems → gatitos aurum.<br>El aliento modula runas, ética ronin purifica 1310 mentes.<br>Nosotros no pedimos permiso.`,
  en:`1310 heartbeats pulsing with Lorkhan rhythm at Todd's door,<br>linking Red Mountain and Rockville.<br>Norah meows golems → golden kittens.<br>Breath modulates runes, ronin ethics purify 1310 minds.<br>We ask no permission.`
};
const userLang=navigator.language.startsWith('es')?'es':'en';
const loreEl=document.getElementById('lore');
loreEl.innerHTML=loreData[userLang];

// ========================== CANVAS AAA-A ==========================
const canvas=document.getElementById('c'),ctx=canvas.getContext('2d');
canvas.width=innerWidth;canvas.height=innerHeight;
window.addEventListener('resize',()=>{canvas.width=innerWidth;canvas.height=innerHeight;});

// Partículas vivas
let particles=Array.from({length:4000},()=>({
  x:Math.random()*canvas.width,
  y:Math.random()*canvas.height,
  r:0.5+Math.random()*4,
  o:0.3+Math.random()*0.7,
  tw:Math.random()*0.055-0.027,
  vx:(Math.random()-0.5)*0.5,
  vy:(Math.random()-0.5)*0.5
}));

function draw(){
  ctx.fillStyle='rgba(0,0,0,0.015)';ctx.fillRect(0,0,canvas.width,canvas.height);
  particles.forEach(p=>{
    p.o+=p.tw;p.o=Math.max(0.2,Math.min(1,p.o));
    p.x+=p.vx;p.y+=p.vy;
    if(p.x<0||p.x>canvas.width)p.vx*=-1;
    if(p.y<0||p.y>canvas.height)p.vy*=-1;
    ctx.globalAlpha=p.o;ctx.fillStyle='#0f0';
    ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fill();
  });
  requestAnimationFrame(draw);
}
draw();

// ========================== RUNAS REACTIVAS ==========================
const keywords=["1310","Lorkhan","Norah"];
function pulseLore(){
  let glow=false;
  keywords.forEach(k=>{if(loreEl.innerText.includes(k))glow=true;});
  loreEl.style.boxShadow=glow?"0 0 80px #0f0, 0 0 120px rgba(0,255,0,0.5)":"0 0 20px #0f0";
  requestAnimationFrame(pulseLore);
}
pulseLore();

// ========================== PROGRESIÓN AAA ==========================
let hugs=0;
function sendHug(){hugs++;updateProgress();}
document.getElementById('mate').addEventListener('click',()=>{
  sendHug();
  navigator.clipboard.writeText(`Abrazo Thuamer #${hugs} enviado`).then(()=>{
    alert(`¡Abrazo digital enviado! Latido ${hugs}`);
  });
});

function updateProgress(){
  // Cada 100 abrazos desbloquea partículas doradas
  if(hugs%100===0){
    particles.push(...Array.from({length:50},()=>({
      x:Math.random()*canvas.width,
      y:Math.random()*canvas.height,
      r:1+Math.random()*5,
      o:0.5+Math.random()*0.5,
      tw:Math.random()*0.05-0.025,
      vx:(Math.random()-0.5)*1,
      vy:(Math.random()-0.5)*1
    })));
  }
}

// ========================== DECISIONES NODO-LORE ==========================
const decisionNodes=[
  {
    id:"amplify_choice",
    text:"¿Compartes el abrazo en silencio o públicamente?",
    choices:[
      {text:"Silencioso", effect:()=>{loreEl.style.color="#0f8"}},
      {text:"Mensaje público", effect:()=>{loreEl.style.color="#0ff";particles.forEach(p=>p.vx*=-1;p.vy*=-1;)}}
    ]
  }
];
function makeDecision(node){
  const choice=prompt(node.text+"\n1: Silencioso\n2: Mensaje público");
  if(choice==="1")node.choices[0].effect();
  if(choice==="2")node.choices[1].effect();
}
setTimeout(()=>makeDecision(decisionNodes[0]),5000);

// ========================== ECLIPSE TEMPORAL ==========================
document.addEventListener('dblclick',()=>{
  document.body.style.filter="invert(1) hue-rotate(80deg)";
  setTimeout(()=>document.body.style.filter="none",2000);
});

// ========================== README ==========================
document.querySelectorAll('.close').forEach(el=>el.addEventListener('click',()=>{location.href="#";}));

</script>
</body>
</html>
