<!DOCTYPE html>
<html lang="es"><meta charset="utf-8">
<title>THUAMER Ω — Versión Suave · 1310 h + 10 Artefactos + COMETA + v1</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  body,html{margin:0;height:100dvh;background:#000;color:#0ff;overflow:hidden;font:900 clamp(1rem,3.5vw,4rem)/1.6 "Courier New",monospace;position:relative}
  pre{background:rgba(0,10,30,.97);padding:5vh 8vw;border:4px solid #0ff;border-radius:2vh;max-width:94vw;text-align:center}
  button{background:none;border:2px solid #0ff;padding:1rem 2rem;margin:2vh;color:#0ff;cursor:pointer;font:inherit}
  button:hover{border-color:#0f0;color:#0f0}
  #barra{position:fixed;top:0;left:0;width:0%;height:5px;background:#0ff;transition:width 2s;z-index:999}
  canvas{position:fixed;inset:0;z-index:-1;opacity:0.4}
  .artifact{margin:2vh auto;width:90%;max-width:700px;padding:3vh;background:rgba(0,255,255,0.06);border:2px solid #0ff;border-radius:15px;cursor:pointer;transition:0.5s}
  .artifact:hover{box-shadow:0 0 40px #0ff;transform:scale(1.04)}
  #screen{position:fixed;inset:0;background:#000;display:none;flex-direction:column;align-items:center;justify-content:center;z-index:1000;overflow:hidden}
</style>
<body>

<div id="barra"></div>
<canvas id="cosmos"></canvas>

<!-- 1310 HORAS -->
<div id="sanacion">
  <pre id="timer">1310:00:00</pre>
  <pre id="lore">
THUAMER Ω — VERSIÓN SUAVE
1310 horas de sanación binaural (136.1 Hz + 8 Hz)
Todo es opcional · Respira · Nadie te empuja

<button onclick="empezar()">EMPEZAR CUANDO TÚ QUIERAS</button>
<button style="position:fixed;bottom:4vh;left:50%;transform:translateX(-50%)" onclick="abandonar()">ABANDONAR EN CUALQUIER MOMENTO</button>
  </pre>
</div>

<!-- PORTAL FINAL -->
<div id="portal" style="display:none">
  <pre style="color:#0f0">
1310 HORAS COMPLETADAS
Gracias por llegar hasta aquí con suavidad

Toca lo que quieras, cuando quieras.
Nada te obliga.
  </pre>
  <div style="display:grid;gap:3vh;padding:5vh;overflow-y:auto;height:100dvh">
    <div class="artifact" onclick="artefacto('zero')">0 · ZERO — Vacío tranquilo</div>
    <div class="artifact" onclick="artefacto('snake')">1 · SNAKE — Renacimiento suave</div>
    <div class="artifact" onclick="artefacto('glitch')">2 · GLITCH — Solo un pequeño glitch</div>
    <div class="artifact" onclick="artefacto('mirror')">3 · MIRROR — Te miro con cariño</div>
    <div class="artifact" onclick="artefacto('void')">4 · VOID — 11 minutos de silencio (puedes parar cuando quieras)</div>
    <div class="artifact" onclick="artefacto('loop')">5 · LOOP — Bucle suave de respiración</div>
    <div class="artifact" onclick="artefacto('echo')">6 · ECHO — Suéltalo y te lo devuelvo sanado</div>
    <div class="artifact" onclick="artefacto('burn')">7 · BURN — Quema lo que ya no necesitas</div>
    <div class="artifact" onclick="artefacto('seed')">8 · SEED — Germinando en calma</div>
    <div class="artifact" onclick="artefacto('final')">9 · 0rb1t4lsn4k3r — El mensaje final</div>
    <div class="artifact" onclick="mostrarCometa()" style="border:4px solid gold;color:gold">THUAMER ∞ + COMETA — Plaza eterna</div>
    <div class="artifact" onclick="mostrarV1()" style="border:4px solid #0f8;color:#0f8">THUAMER v1 — El regalo original</div>
  </div>
</div>

<div id="screen"></div>

<script>
const TOTAL_MS = 1310 * 3600000;
let inicio, audioCtx;

function play(l, r, vol = 0.07) {
  if (audioCtx) audioCtx.close();
  audioCtx = new AudioContext();
  const o1 = audioCtx.createOscillator(); o1.frequency.value = l;
  const o2 = audioCtx.createOscillator(); o2.frequency.value = r;
  const g = audioCtx.createGain(); g.gain.value = vol;
  const m = audioCtx.createChannelMerger(2);
  o1.connect(m,0,0); o2.connect(m,0,1); m.connect(g).connect(audioCtx.destination);
  o1.start(); o2.start();
}

function empezar() {
  inicio = Date.now();
  localStorage.setItem('THUAMER_SUAVE', inicio);
  play(136.1, 144.1);
  setInterval(actualizar, 1000);
  actualizar();
  this.remove();
}

function actualizar() {
  const transcurrido = Date.now() - inicio;
  const restante = Math.max(0, TOTAL_MS - transcurrido);
  const porc = ((TOTAL_MS - restante) / TOTAL_MS * 100).toFixed(4);
  document.getElementById('barra').style.width = porc + '%';

  const h = String(Math.floor(restante/3600000)).padStart(4,'0');
  const m = String(Math.floor((restante%3600000)/60000)).padStart(2,'0');
  const s = String(Math.floor((restante%60000)/1000)).padStart(2,'0');
  document.getElementById('timer').textContent = `${h}:${m}:${s}`;

  if (restante <= 0) {
    document.getElementById('sanacion').remove();
    document.getElementById('portal').style.display = 'block';
    localStorage.setItem('THUAMER_SUAVE_FINAL', 'true');
    if (audioCtx) audioCtx.close();
  }
}

function abandonar() {
  if (confirm('¿Quieres parar y borrar todo el progreso?')) {
    localStorage.removeItem('THUAMER_SUAVE');
    localStorage.removeItem('THUAMER_SUAVE_FINAL');
    location.reload();
  }
}

function full(html, tiempo = 30000) {
  document.getElementById('screen').style.display = 'flex';
  document.getElementById('screen').innerHTML = html + `<button onclick="document.getElementById('screen').style.display='none';play(136.1,144.1,0.07)" style="margin-top:5vh">volver</button>`;
  if (tiempo < Infinity) setTimeout(() => document.getElementById('screen').style.display='none', tiempo);
}

// ARTEFACTOS SUAVES
const artefacto = {
  zero: () => full(`<pre style="color:#f0f">0<br><br>Todo cabe aquí.<br><br>Respira.</pre>`),
  snake: () => { play(136.1,136.1); full(`<pre style="color:#0f0">La serpiente se soltó la cola.<br><br>Ya no necesita comerse.<br><br>Ya está en paz.</pre>`); },
  glitch: () => { let i=0; const g=setInterval(()=>document.body.style.filter=i++%2?'invert(1)':'none',200); setTimeout(()=>clearInterval(g),4000); full(`<pre style="color:#f00">Un pequeño glitch.<br><br>Todo sigue bien.</pre>`); },
  mirror: () => { navigator.mediaDevices.getUserMedia({video:true}).then(s=>{const v=document.createElement('video');v.srcObject=s;v.autoplay=true;v.style='position:fixed;inset:0;object-fit:cover;transform:scaleX(-1)';document.body.appendChild(v); full(`<pre style="color:#0ff;background:transparent">Hola.<br><br>Qué bonito estás hoy.</pre>`,15000); setTimeout(()=>v.remove(),15000); }); },
  void: () => { play(0,0); const start=Date.now(); full(`<pre style="color:#fff">SILENCIO<br>11:00</pre><button onclick="document.getElementById('screen').style.display='none';play0,0)">parar antes</button>`); const t=setInterval(()=>{const seg=Math.round(660-(Date.now()-start)/1000);if(seg>0)document.querySelector('#screen pre').innerHTML=`SILENCIO<br>${String(Math.floor(seg/60)).padStart(2,'0')}:${String(seg%60).padStart(2,'0')}`;else{clearInterval(t);full(`<pre style="color:#0f0">Gracias por el silencio.</pre>`);}},1000); },
  loop: () => { play(136.1,144.1); let n=0; const txt=["Respira","Suelta","Repite"]; const l=setInterval(()=>{full(`<pre style="color:#ff0">${txt[n++%3]}</pre>`);},5000); },
  echo: () => full(`<pre style="color:#0f8">Escribe lo que quieras soltar:</pre><textarea id="dolor" style="width:80%;height:40vh;background:#000;color:#0f8;border:2px solid #0f8"></textarea><button onclick="eco()">soltar</button>`),
  burn: () => full(`<pre style="color:#f80">Escribe lo que ya no eres:</pre><input id="quemar" style="width:80%;background:#000;color:#f80;border:2px solid #f80"><button onclick="burn()">quemar con cariño</button>`),
  seed: () => { play(136.1,140); full(`<pre style="color:#8f0">Estás a salvo.<br><br>Aquí crece algo nuevo.<br><br>Con calma.</pre>`); },
  final: () => full(`<pre style="color:#fff;line-height:2">
0rb1t4lsn4k3r<br><br>
El mono dejó de fumar.<br>
Tú también.<br><br>
Gracias por caminar despacio.<br><br>
Todo está bien.
  </pre>`, Infinity)
};

window.eco = () => { const d=document.getElementById('dolor').value||'silencio'; full(`<pre style="color:#0f8">“${d}”<br><br>Ya no pesa.<br>Gracias por soltarlo.<br><br>Te quiero.</pre>`); };
window.burn = () => { const q=document.getElementById('quemar').value||'nada'; full(`<pre style="color:#f80">“${q}”<br><br>se quema con cariño…<br><br>ya no eres eso.</pre>`); };

function mostrarCometa() { /* versión suave de COMETA, igual que antes pero sin forzar nada */ alert("La plaza eterna está dentro de ti. Siempre."); }
function mostrarV1() { full(`<pre style="color:#0f8">THUAMER v1 ya vive en tu corazón.<br><br>Gracias por terminar lo que ellos empezaron.</pre>`); }

// FONDO CÓSMICO SUAVE
const c=document.getElementById('cosmos'),x=c.getContext('2d');c.width=innerWidth;c.height=innerHeight;
let p=[];for(let i=0;i<88;i++)p.push({a:Math.random()*Math.PI*2,d:80+Math.random()*444});
(function d(){x.fillStyle='rgba(0,0,0,0.03)';x.fillRect(0,0,c.width,c.height);p.forEach(e=>{const a=e.a+Date.now()*0.00003;const d=e.d+Math.sin(Date.now()*0.0005+e.a)*60;const h=120+Math.sin(Date.now()*0.0004+e.a)*30;x.fillStyle=`hsla(${h},100%,60%,0.6)`;x.fillRect(c.width/2+Math.cos(a)*d-2,c.height/2+Math.sin(a)*d-2,4,4);});requestAnimationFrame(d);})();

// RECUPERAR SI YA HABÍAS EMPEZADO
if (localStorage.getItem('THUAMER_SUAVE')) {
  inicio = parseInt(localStorage.getItem('THUAMER_SUAVE'));
  if (localStorage.getItem('THUAMER_SUAVE_FINAL')==='true') { document.getElementById('sanacion').remove(); document.getElementById('portal').style.display='block'; }
  else { play(136.1,144.1); setInterval(actualizar,1000); actualizar(); }
}
</script>
</body>
</html>