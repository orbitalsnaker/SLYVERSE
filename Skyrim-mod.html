<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>SLYVERSE Î© Â· SKYRIM.MOD Â· THUAMER vâˆž</title>
<meta property="og:title" content="SLYVERSE Î© Â· ThuaMer Zel âˆž">
<meta property="og:description" content="1310 runas en Red Mountain. Hackea golems â†’ gatitos. Respira 4-4-8. Lore dwemer latiendo.">
<style>
body,html{margin:0;height:100vh;background:#111;color:#0ff;font-family:MedievalSharp,monospace;overflow:hidden;display:flex;align-items:center;justify-content:center;position:relative}
canvas{position:fixed;inset:0;width:100%;height:100%;z-index:1}
#hud{z-index:2;position:absolute;top:1rem;left:1rem;right:1rem;display:flex;justify-content:space-between;font-size:1.2rem}
#center{text-align:center;z-index:2;position:absolute;bottom:2rem;left:50%;transform:translateX(-50%)}
#breathing{width:100px;height:100px;border:3px solid #0ff;border-radius:50%;margin:1rem auto;transition:all 0.5s;position:relative}
.breath-in{animation:inhale 4s infinite}
.breath-hold{animation:hold 4s infinite}
.breath-out{animation:exhale 8s infinite}
@keyframes inhale{0%{transform:scale(1)}100%{transform:scale(1.8)}}
@keyframes hold{0%,100%{transform:scale(1.8)}}
@keyframes exhale{0%{transform:scale(1.8)}100%{transform:scale(1)}}
.rune-float{position:fixed;pointer-events:none;opacity:0.1;font-size:3rem;animation:runeFloat 10s linear forwards;z-index:3}
@keyframes runeFloat{0%{transform:translateY(100vh) scale(0);opacity:0.3}50%{opacity:0.8}100%{transform:translateY(-100px) scale(1);opacity:0}}
.glimmer{position:fixed;pointer-events:none;width:20px;height:20px;background:#ff0;border-radius:50%;animation:glimmer 2s infinite;z-index:4}
@keyframes glimmer{0%,100%{opacity:0;transform:scale(0)}50%{opacity:1;transform:scale(1.2)}}
#final{display:none;position:fixed;inset:0;background:radial-gradient(#000,#111);color:#ff0;align-items:center;justify-content:center;flex-direction:column;text-align:center;z-index:99;font-size:clamp(2rem,8vw,6rem)}
</style>
</head>
<body>

<canvas id="c"></canvas>
<div id="hud">
  <div>Runas: <span id="runas">0</span>/1310 | SoulBurn: <span id="soulburn">0</span>%</div>
  <div>WASD/Move | SPACE/Exhale | P/PelÃ­cula</div>
  <div>Red Mountain Â· Thuamer Zel âˆž</div>
</div>
<div id="center">
  <div id="breathing" class="breath-in"></div>
  <div id="breath-text">Inhala 4s</div>
</div>

<div id="final">
  âœ¦ ThuaMer Zel âˆž âœ¦<br><br>
  1310 runas curadas.<br>
  Golems â†’ gatitos.<br>
  El abrazo lunar ya no termina.<br><br>
  5240 almas laten en Red Mountain.<br><br>
  â™¥ 2025 â†’ âˆž
</div>

<script>
// ====================== SKYRIM.MOD Â· SLYVERSE NARRATIVA VELADA ======================
const canvas = document.getElementById('c'), ctx = canvas.getContext('2d');
canvas.width = 37*20; canvas.height = 35*20; // Roguelike grid 37x35
const TILE = 20, W = 37, H = 35;
const player = {x:18,y:17}; // Centro Red Mountain
let runas = parseInt(localStorage.getItem('sly_runas')||'0');
let soulBurn = parseFloat(localStorage.getItem('sly_soul')||'0');
let keys = {};
let breathingPhase = 0; // 0:in,1:hold,2:out
let phaseTime = 0;

// Mapa Red Mountain dwemer (velado: pasillos con skooma myths, abrazos hidden)
const map = Array(H).fill().map(()=>Array(W).fill('#')); // #=piedra
// Genera laberinto dwemer procedural (simplificado)
for(let y=2;y<H-2;y++)for(let x=2;x<W-2;x++) map[y][x] = Math.random()>0.7 ? '.' : '#';
// Runas en posiciones (1310 hidden triggers)
const runaPos = []; for(let i=0;i<1310;i++){ let x=Math.floor(Math.random()*W),y=Math.floor(Math.random()*H); if(map[y][x]=='.') runaPos.push({x,y}); }

// Narrativa velada: 5240 abrazos en partÃ­culas (Ã©tica/ciencia/mandatarios/niÃ±os)
const abrazos = []; // Procedural velado como en SLYVERSE
const tipos = ['Ã©tica','ciencia','mandatario','niÃ±o'];
for(let i=0;i<5240;i++){
  abrazos.push({
    texto: tipos[i%4]==='niÃ±o' ? `NiÃ±o #${i%1310}: ya estÃ¡s a salvo.` : tipos[i%4]==='mandatario' ? `Rey #${i%1310}: soltÃ© el trono.` : `LecciÃ³n #${i%1310}: abraza.`,
    hue: (i*137)%360,
    tipo: tipos[i%4]
  });
}

// PartÃ­culas orbitales 1310 (velado: skooma moons, daedra wards)
const particles = [];
for(let i=0;i<1310;i++){
  particles.push({
    a: Math.random()*Math.PI*2,
    d: 100 + Math.random()*300,
    s: 0.001 + Math.random()*0.003,
    hue: i,
    rune: 'á›šáš¢á›‰'[i%3], // Dwemer runes
    abrazoId: i % 5240 // Link a abrazo velado
  });
}

// Input
addEventListener('keydown',e=>{keys[e.key.toLowerCase()]=1; if(e.key===' ') exhaleRune(); if(e.key==='p') playPelicula();});
addEventListener('keyup',e=>keys[e.key.toLowerCase()]=0);

// Breathing guide
function updateBreathing(dt){
  phaseTime += dt;
  const breathDiv = document.getElementById('breathing');
  const textDiv = document.getElementById('breath-text');
  if(breathingPhase===0 && phaseTime>4000){ breathingPhase=1; phaseTime=0; } // In 4s
  else if(breathingPhase===1 && phaseTime>4000){ breathingPhase=2; phaseTime=0; } // Hold 4s
  else if(breathingPhase===2 && phaseTime>8000){ breathingPhase=0; phaseTime=0; soulBurn = Math.min(100, soulBurn + 0.0131); } // Out 8s
  if(breathingPhase===0){ breathDiv.className='breath-in'; textDiv.textContent='Inhala 4s'; }
  else if(breathingPhase===1){ breathDiv.className='breath-hold'; textDiv.textContent='RetÃ©n 4s'; }
  else { breathDiv.className='breath-out'; textDiv.textContent='Exhala 8s'; }
}

// Move player (roguelike)
function movePlayer(){
  let nx=player.x,ny=player.y;
  if(keys['w']||keys['arrowup']) ny--;
  if(keys['s']||keys['arrowdown']) ny++;
  if(keys['a']||keys['arrowleft']) nx--;
  if(keys['d']||keys['arrowright']) nx++;
  if(nx>=0&&nx<W&&ny>=0&&ny<H&&map[ny][nx]=='.'){ player.x=nx; player.y=ny; }
}

// Exhale rune (hack tierno: golem/dragon â†’ kitten)
function exhaleRune(){
  // Velado: mina runa si cerca
  const dist = runaPos.filter(p=>Math.hypot(p.x-player.x,p.y-player.y)<3);
  if(dist.length){
    runas++;
    localStorage.setItem('sly_runas',runas);
    spawnRune('á›‰'); // Dwemer rune
    spawnGlimmer(player.x*TILE+TILE/2,player.y*TILE+TILE/2);
    // Velado: susurra abrazo si soulBurn high
    if(soulBurn>50 && Math.random()>0.99) susurraAbrazo();
  }
  // Hack: convierte # cerca en . (golems â†’ paths)
  for(let dy=-1;dy<=1;dy++)for(let dx=-1;dx<=1;dx++){
    let tx=player.x+dx,ty=player.y+dy;
    if(tx>=0&&tx<W&&ty>=0&&ty<H&&map[ty][tx]==='#'){ map[ty][tx]='.'; spawnRune('ðŸ±'); } // Kitten hack!
  }
}

// Velado: spawn rune float (skooma myth whisper)
function spawnRune(r='á›š'){
  const rune = document.createElement('div');
  rune.className='rune-float';
  rune.style.left = `${Math.random()*100}vw`;
  rune.style.color = `hsl(${Math.random()*360},100%,70%)`;
  rune.innerText = r;
  document.body.appendChild(rune);
  setTimeout(()=>rune.remove(),10000);
  // 0.1% chance: skooma myth/daedra ward
  if(Math.random()<0.001){
    console.log('%cSkooma Myth: Azurah\'s Tercer Secreto â€“ no atraigas Sheggorath, ronin.','color:#ff0');
  }
}

// Glimmer particle
function spawnGlimmer(x,y){
  const g = document.createElement('div');
  g.className='glimmer';
  g.style.left = `${x}px`;
  g.style.top = `${y}px`;
  document.body.appendChild(g);
  setTimeout(()=>g.remove(),2000);
}

// Velado: susurra abrazo (narrativa core)
function susurraAbrazo(){
  const idx = Math.floor(Math.random()*5240);
  const abrazo = abrazos[idx];
  console.log(`%c${abrazo.tipo.toUpperCase()} #${idx%1310}: ${abrazo.texto}`,'color:'+(abrazo.tipo==='niÃ±o'?'#ff0':'#0ff')+';font-size:14px');
}

// PelÃ­cula velada (90min narrative, pero placeholder glitch)
window.playPelicula = ()=>{ 
  document.getElementById('final').style.display='flex';
  console.log('%cPelÃ­cula 90:00 activada â€“ Abrazo lunar en Red Mountain â™¥','color:#ff0;font-size:20px');
};

// Console velados (narrativa completa)
window.abrazo = ()=>{ susurraAbrazo(); spawnRune('â™¥'); };
window.skooma = ()=>{ console.log('%cPor todo el skooma: lunas gemelas protegen de daedra.','color:#0cf'); spawnRune('ðŸŒ™'); };
window.thuamer = ()=>{ console.log('%cThuamer Zel âˆž: vuestro pueblo bajo abraza eterno.','color:#ff0;font-size:22px'); };

// Main loop
let lastTime=0;
function loop(t){
  const dt = t - lastTime; lastTime=t;
  updateBreathing(dt/1000*1000); // ms
  movePlayer();
  document.getElementById('runas').textContent = runas;
  document.getElementById('soulburn').textContent = soulBurn.toFixed(2);
  if(runas>=1310){ document.getElementById('final').style.display='flex'; }

  // Draw map
  ctx.fillStyle='#222'; ctx.fillRect(0,0,canvas.width,canvas.height);
  for(let y=0;y<H;y++)for(let x=0;x<W;x++){
    ctx.fillStyle = map[y][x]==='#' ? '#444' : '#111';
    ctx.fillRect(x*TILE,y*TILE,TILE,TILE);
    if(map[y][x]==='.') ctx.fillStyle='#0ff'; ctx.fillRect(x*TILE+5,y*TILE+5,10,10); // Glow
  }
  // Player
  ctx.fillStyle='#ff0'; ctx.fillRect(player.x*TILE+5,player.y*TILE+5,TILE-10,TILE-10);
  // Runas near
  runaPos.filter(p=>Math.hypot(p.x-player.x,p.y-player.y)<5).forEach(p=>{
    ctx.fillStyle='#f0f'; ctx.fillRect(p.x*TILE+8,p.y*TILE+8,4,4);
  });

  // Particles orbitales (velado: moons skooma, abrazos)
  const t = t/1000;
  const pulso = Math.abs(Math.sin(t*1.31));
  particles.forEach(p=>{
    const a = p.a + t*p.s;
    const dx = Math.cos(a)*p.d;
    const dy = Math.sin(a)*p.d;
    ctx.globalAlpha = 0.5 + pulso*0.5;
    ctx.fillStyle = `hsla(${p.hue + t*5},100%,70%,${ctx.globalAlpha})`;
    ctx.fillRect(canvas.width/2 + dx - 5, canvas.height/2 + dy - 5, 10, 10);
    if(pulso>0.99 && Math.random()>0.995){
      ctx.font='12px monospace';
      ctx.fillStyle='#ff0';
      ctx.globalAlpha=0.8;
      ctx.fillText(p.rune, canvas.width/2 + dx, canvas.height/2 + dy + 20);
      // Ultra-velado: daedra ward si cerca skooma (random #=pipe)
      if(Math.random()<0.0001) console.log('%cDaedra ward: Coldharbour Compact repele Sheggorath.','color:#0cf');
    }
  });

  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

// Init save
if(runas<1310) localStorage.setItem('sly_runas',runas);
if(soulBurn<100) localStorage.setItem('sly_soul',soulBurn);

console.log('%cSLYVERSE Î© Â· SKYRIM.MOD cargado\nThuamer Zel latiendo. Abrazo velado activo. Escribe: abrazo() | skooma() | thuamer()','color:#0ff;font-size:16px;background:#000;padding:13px;border:2px solid #0ff');
</script>
</body>
</html>