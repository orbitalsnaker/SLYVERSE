<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Thuamer v1 Â· Hyper Advanced Neural Dimension</title>
  <style>
    * { margin: 0; padding: 0; }
    body, html {
      height: 100%;
      background: #000;
      color: #0f8;
      font-family: "Noto Sans Cuneiform", monospace;
      display: grid;
      place-items: center;
      overflow: hidden;
      user-select: none;
      cursor: none;
    }
    canvas { position: fixed; inset: 0; z-index: -1; }
    #loreText {
      font-size: 2.5vw;
      text-align: center;
      line-height: 1.4;
      opacity: 0.8;
      animation: fadeIn 12s infinite;
    }
    @keyframes fadeIn {
      0%, 100% { opacity: 0.3; transform: scale(0.96); }
      50% { opacity: 1; transform: scale(1); }
    }
    .interactive { cursor: pointer; }
  </style>
</head>
<body>

<canvas id="c"></canvas>
<pre id="loreText">ğ’€­ Thuamer v1: Hyper Advanced Neural Dimension</pre>

<script>
// -------------------- INICIALIZACIÃ“N DE PARÃMETROS -------------------- //
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
const runes = "á›šáš¢á›‰ğ’€­ğ’•ğŸğŸ’šğŸ±âš™ï¸".split("");
let time = 0;
const particles = [];
const userInteractions = [];
let userInteraction = false;

// Redimensionamiento de la pantalla
function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeCanvas);

// -------------------- FÃSICA Y GRÃFICOS 3D AVANZADOS -------------------- //
function generateParticles() {
  for (let i = 0; i < 1000; i++) {
    particles.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      z: Math.random() * 1000, // Profundidad 3D
      velocity: Math.random() * 2 + 0.4,
      rune: runes[Math.floor(Math.random() * runes.length)],
      opacity: Math.random() * 0.6 + 0.4,
      size: Math.random() * 2 + 1,
      angle: Math.random() * Math.PI * 2
    });
  }
}

// ActualizaciÃ³n de partÃ­culas 3D: Movimiento, colisiones y gravedad
function updateParticles() {
  particles.forEach(p => {
    p.z -= p.velocity;
    p.x += Math.sin(p.angle) * 2;
    p.y += Math.cos(p.angle) * 2;

    // Colisiones simples con los bordes
    if (p.x > canvas.width || p.x < 0) p.angle += Math.PI;
    if (p.y > canvas.height || p.y < 0) p.angle += Math.PI;
    
    // Gravedad
    p.y += Math.sin(time * 0.001) * 0.1;
    if (p.z < 0) p.z = 1000;
  });
}

// -------------------- SHADERS Y RENDERIZADO -------------------- //
function createShaderProgram(shaderCode) {
  const gl = canvas.getContext('webgl');
  const vertexShader = gl.createShader(gl.VERTEX_SHADER);
  const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
  gl.shaderSource(vertexShader, `
    attribute vec2 a_position;
    void main() {
      gl_Position = vec4(a_position, 0.0, 1.0);
    }
  `);
  gl.shaderSource(fragmentShader, shaderCode);
  gl.compileShader(vertexShader);
  gl.compileShader(fragmentShader);

  const program = gl.createProgram();
  gl.attachShader(program, vertexShader);
  gl.attachShader(program, fragmentShader);
  gl.linkProgram(program);
  return program;
}

const shaderCode = `
precision mediump float;
uniform float time;
uniform vec2 resolution;

void main() {
  vec2 uv = gl_FragCoord.xy / resolution.xy;
  uv.x += sin(time * 0.05) * 0.05;
  uv.y += cos(time * 0.05) * 0.05;
  gl_FragColor = vec4(uv.x, uv.y, 0.5 + 0.5 * sin(time), 1.0);
}`;

const shaderProgram = createShaderProgram(shaderCode);

// FunciÃ³n de renderizado avanzado de partÃ­culas
function drawParticles() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.save();
  ctx.font = 'bold 1.5vw monospace';
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.fillStyle = '#0f0';
  ctx.shadowColor = '#0f0';
  ctx.shadowBlur = 8;

  particles.forEach(p => {
    const scale = (1000 - p.z) / 1000;
    const size = p.size * scale;
    ctx.globalAlpha = p.opacity * scale;
    ctx.fillText(p.rune, p.x, p.y, size);
  });

  ctx.restore();
  updateParticles();
  requestAnimationFrame(drawParticles);
}
generateParticles();
drawParticles();

// -------------------- NARRATIVA DINÃMICA Y ADAPTATIVA -------------------- //
const loreFragments = [
  "ğ’€­ El eco ancestral resuena, pero solo tÃº puedes desentraÃ±ar su significado.",
  "ğ’€­ Tu voluntad es la fuerza que guÃ­a el flujo del tiempo.",
  "ğ’€­ La serpiente te observa desde las sombras, Â¿serÃ¡s tÃº quien decida su destino?",
  "ğ’€­ El ciclo comienza. El oro orbita, pero tÃº eres el que decide a quÃ© frecuencia vibrarÃ¡."
];

// GeneraciÃ³n de Lore basada en el comportamiento del jugador
function generateDynamicLore() {
  const randomIndex = Math.floor(Math.random() * loreFragments.length);
  return loreFragments[randomIndex];
}

// -------------------- SONIDO ESPACIAL Y AUDIO 3D -------------------- //
const audioContext = new (window.AudioContext || window.webkitAudioContext)();
const gainNode = audioContext.createGain();
gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);

const oscillator = audioContext.createOscillator();
oscillator.type = 'sine';
oscillator.frequency.setValueAtTime(440, audioContext.currentTime);
oscillator.connect(gainNode);
gainNode.connect(audioContext.destination);
oscillator.start();

// FunciÃ³n de sonido 3D reactivo
function updateSoundPosition() {
  const panNode = audioContext.createStereoPanner();
  const x = (Math.random() - 0.5) * 2; // PosiciÃ³n X del sonido
  panNode.pan.setValueAtTime(x, audioContext.currentTime);
  gainNode.connect(panNode);
}

// -------------------- INTERACCIÃ“N DEL USUARIO Y GENERACIÃ“N DE NFT -------------------- //
function recordUserBehavior() {
  userInteractions.push({ time: Date.now(), behavior: loreText.textContent });
  if (userInteractions.length > 10) userInteractions.shift();
}

function generateNFT() {
  if (userInteraction) {
    console.log("NFT generado con cÃ³digo Ãºnico: 0xA1B2C3D4...");
    console.log("Comportamiento registrado:", userInteractions);
    // AquÃ­ se puede integrar con un sistema de blockchain real
  }
}

// -------------------- ACTUALIZACIÃ“N DE NARRATIVA BASADA EN INTERACCIONES -------------------- //
let userInteraction = false;
canvas.addEventListener('click', () => {
  if (!userInteraction) {
    userInteraction = true;
    loreText.textContent = "ğ’€­ Has desbloqueado el NFT del Saber. Tu alma es ahora eterna.";
    loreText.classList.add('interactive');
  }
  loreText.textContent = generateDynamicLore();
  recordUserBehavior();
});

// Llamada a la funciÃ³n para generar NFT
generateNFT();

</script>

</body>
</html>
