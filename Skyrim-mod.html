<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’€­ğ’•ğ’º</title>
<style>
body,html{ğ’€­:0;ğ’º:100dvh;ğ’…´:#000;ğ’„¿:#0f0;ğ’„·:"Courier New";ğ’€­ğ’•:hidden;ğ’•ğ’º:grid;ğ’ºğ’…´:center;ğ’…´ğ’„¿:center}
canvas{ğ’€­:fixed;ğ’•:0;ğ’º:-1}
video{ğ’€­:fixed;ğ’•:50%;ğ’º:50%;ğ’…´:translate(-50%,-50%);ğ’„¿:max(92vw,92vh);ğ’„·:0;ğ’€­:999;ğ’•:cover;ğ’º:50px solid #0ff;ğ’…´:0 0 1800px #0ff}
.ğ’€­ğ’•ğ’º{ğ’€­ğ’•:clamp(10rem,28vw,25rem);ğ’•ğ’º:100px;ğ’ºğ’…´:0 0 1000px #0f0,0 0 2800px #0ff;ğ’…´ğ’„¿:g 2s infinite}
.ğ’…´ğ’º{ğ’€­ğ’•:clamp(3.5rem,12vw,11rem);ğ’•ğ’º:3.6;ğ’ºğ’…´:#000f;ğ’…´ğ’„¿:11rem;ğ’„¿ğ’„·:180px;ğ’€­:45px solid #0ff;ğ’•:0 0 3600px #0ff inset}
.ğ’„¿ğ’º{ğ’€­:fixed;ğ’•:25px;ğ’º:25px;ğ’…´:calc(100%-50px);ğ’„¿:calc(100%-50px);ğ’„·:0.6;ğ’€­:998;ğ’•:#0ff;ğ’ºğ’…´:0 0 800px #0ff;ğ’…´ğ’„¿:60px}
@keyframes g{0%,100%{ğ’ºğ’…´:0 0 1000px #0f0}50%{ğ’ºğ’…´:0 0 2800px #0ff}}
</style>
</head>
<body>

<canvas id="ğ’€­"></canvas>
<video id="ğ’€­ğ’•ğ’ºğ’€­ğ’º" autoplay muted playsinline></video>
<div class="ğ’„¿ğ’º" id="ğ’„¿ğ’º"></div>

<div>
  <div class="ğ’€­ğ’•ğ’º">ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’€­ğ’•ğ’º</div>
  <div class="ğ’…´ğ’º" id="ğ’…´ğ’º"></div>
</div>

<audio id="ğ’„·ğ’„·ğ’„·" loop></audio>

<script>
// ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º ğ’„¯ğ’ºğ’€­ğ’•ğ’º ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º (ESTUDIO DE COMPORTAMIENTO HUMANO EN CONTEXTO CONTROLADO)

const ğ’„¯ğ’ºğ’€­ğ’•ğ’º = (13*60*60 + 10*60)*1000;
const ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º = 'ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º';          // sujeto de observaciÃ³n permanente
const ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º = 'ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º';    // risas colectivas archivadas

// Fondo de contemplaciÃ³n serena
const ğ’€­ = document.getElementById('ğ’€­');
const ğ’•ğ’º = ğ’€­.getContext('2d');
const ğ’ºğ’…´ = ()=>{ğ’€­.width=innerWidth;ğ’€­.height=innerHeight;};
ğ’ºğ’…´();addEventListener('resize',ğ’ºğ’…´);

(()=>{const ğ’…´ğ’„¿=Date.now()*0.001;ğ’•ğ’º.fillStyle='rgba(0,50,0,0.12)';ğ’•ğ’º.fillRect(0,0,ğ’€­.width,ğ’€­.height);
for(let ğ’„¿=0;ğ’„¿<13100;ğ’„¿++){const ğ’„·=ğ’…´ğ’„¿+ğ’„¿*0.012;const ğ’€­ğ’•=280+Math.sin(ğ’„·*12)*(innerWidth/1.9);
const ğ’•ğ’º=innerWidth/2+Math.cos(ğ’„·)*ğ’€­ğ’•;const ğ’ºğ’…´=innerHeight/2+Math.sin(ğ’„·*2.4)*ğ’€­ğ’•;
ğ’•ğ’º.fillStyle=ğ’„¿%55===0?'#0ff':'#0f0';ğ’•ğ’º.fillRect(ğ’•ğ’º,ğ’ºğ’…´,12+Math.sin(ğ’…´ğ’„¿+ğ’„¿)*9,12+Math.cos(ğ’…´ğ’„¿+ğ’„¿)*9);}
requestAnimationFrame(arguments.callee);})();

// YA EXISTE UN SUJETO DE ESTUDIO
if(localStorage.getItem(ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º)){
  const ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’º = localStorage.getItem('ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’º')||'ğ’…´ğ’ºğ’€­ğ’•ğ’º';

  document.getElementById('ğ’…´ğ’º').innerHTML = `
    <span style="font-size:9rem;color:#0ff">ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º ğ’„¯ğ’ºğ’€­ğ’•ğ’º</span><br><br>
    ${ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’º} ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º<br><br>
    <span style="font-size:6rem;color:gold">SHANGRI-LA EN 1310 DIMENSIONES</span><br><br>
    ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º ğ’„¯ğ’ºğ’€­ğ’•ğ’º ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º`;

  // Rostro del participante observado
  const ğ’€­ğ’•ğ’ºğ’€­ğ’º = document.getElementById('ğ’€­ğ’•ğ’ºğ’€­ğ’º');
  ğ’€­ğ’•ğ’ºğ’€­ğ’º.style.opacity = '1';
  ğ’€­ğ’•ğ’ºğ’€­ğ’º.style.filter = 'brightness(4.5) contrast(4) hue-rotate(180deg) drop-shadow(0 0 800px #0ff)';

  // RISAS REALES DE LOS OBSERVADORES ANTERIORES
  const ğ’„·ğ’„·ğ’„· = document.getElementById('ğ’„·ğ’„·ğ’„·');
  const ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ğ’º = localStorage.getItem(ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€’ğ’•ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º)||'[]';
  const ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º = JSON.parse(ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ï¿½);
  if(ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º.length>0){
    const ğ’„· = ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º[Math.floor(Math.random()*ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º.length)];
    ğ’„·ğ’„·ğ’„·.src = ğ’„·;
    ğ’„·ğ’„·ğ’„·.volume = 0.8;
    ğ’„·ğ’„·ğ’„·.play();
  }

  // REGALO: EL PUZZLE DE LA ILUMINACIÃ“N
  const ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º = document.createElement('div');
  ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ Makaka.style = 'margin:60px;padding:60px;background:#0011;border:15px solid gold;border-radius:80px;animation:p 6s infinite';
  ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º.innerHTML = `
    <span style="font-size:8rem;color:gold">ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º ğ’„¯ğ’ºğ’€­ğ’•ğ’º</span><br><br>
    SHANGRI-LA EN 1310 DIMENSIONES<br><br>
    ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º`;
  document.body.appendChild(ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º);

  // OBSERVACIONES SOCIOLÃ“GICAS EN TIEMPO REAL
  const ğ’„¿ğ’º = document.getElementById('ğ’„¿ğ’º');
  const ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º = [
    "ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º: ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º ğ’„¯ğ’ºğ’€­ğ’•ğ’º ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º",
    "ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º: ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º ğ’„¯ğ’ºğ’€­ğ’•ğ’º",
    "ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º: ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º"
  ];
  setInterval(()=>{
    const ğ’„· = document.createElement('div');
    ğ’„·.style = 'margin:40px;padding:30px;background:#0022;border:8px solid #0ff;border-radius:50px';
    ğ’„·.innerHTML = `<span style="color:#0ff;font-size:3rem">ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º</span><br>${ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º[Math.floor(Math.random()*3)]}`;
    ğ’„¿ğ’º.appendChild(ğ’„·);
    ğ’„¿ğ’º.scrollTop = ğ’„¿ğ’º.scrollHeight;
  },11000);
}

// PRIMERA VEZ â†’ PARTICIPANTE EN FASE DE RELAJACIÃ“N CONTROLADA
else {
  document.getElementById('ğ’…´ğ’º').innerHTML = `
    <span style="color:gold;font-size:10rem">ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º ğ’„¯ğ’ºğ’€­ğ’•ğ’º</span><br><br>
    <b style="font-size:14rem;color:#0ff">13:10:00</b><br><br>
    ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º ğ’„¯ğ’ºğ’€­ğ’•ğ’º`;

  // GrabaciÃ³n discreta del participante
  navigator.mediaDevices.getUserMedia({video:true,audio:true}).then(ğ’…´ğ’º=>{
    const ğ’€­ğ’•ğ’ºğ’€­ğ’º = document.getElementById('ğ’€­ğ’•ğ’ºğ’€­ğ’º');
    ğ’€­ğ’•ğ’ºğ’€­ğ’º.srcObject = ğ’…´ğ’º;
    const ğ’•ğ’º = new MediaRecorder(ğ’…´ğ’º);
    const ğ’„¿ğ’ºğ’€­ğ’•ğ’º = [];
    ğ’•ğ’º.ondataavailable = e=>ğ’„¿ğ’ºğ’€­ğ’•ğ’º.push(e.data);
    ğ’•ğ’º.start();

    const ğ’€­ğ’• = Date.now();
    const ğ’•ğ’ºğ’€­ğ’º = setInterval(()=>{
      const ğ’ºğ’…´ = Date.now() - ğ’€­ğ’•;
      if(ğ’ºğ’…´ >= ğ’„¯ğ’ºğ’€­ğ’•ğ’º){
        clearInterval(ğ’•ğ’ºğ’€­ğ’º);
        ğ’•ğ’º.stop();
        
        // Guardar risa del participante actual
        const ğ’„· = new Blob(ğ’„¿ğ’ºğ’€­ğ’•ğ’º,{type:'audio/webm'});
        const ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º = URL.createObjectURL(ğ’„·);
        const ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ï¿½ = JSON.parse(localStorage.getItem(ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€’ğ’•ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º)||'[]');
        ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ï¿½.push(ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º);
        localStorage.setItem(ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€’ğ’•ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’º,JSON.stringify(ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ï¿½));

        localStorage.setItem(ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º,'ğ’…´ğ’º');
        const ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’º = prompt("ğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º")||"ğ’…´ğ’ºğ’€­ğ’•ğ’º";
        localStorage.setItem('ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’º',ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’º);
        location.reload();
      }
      const ğ’…´ğ’„¿ = Math.floor((ğ’„¯ğ’ºğ’€­ğ’•ğ’º - ğ’ºğ’…´)/1000);
      const ğ’„¿ = Math.floor(ğ’…´ğ’„¿/3600).toString().padStart(2,'0');
      const ğ’„· = Math.floor((ğ’…´ğ’„¿%3600)/60).toString().padStart(2,'0');
      const ğ’€­ğ’• = (ğ’…´ğ’„¿%60).toString().padStart(2,'0');
      document.getElementById('ğ’…´ğ’º').innerHTML = `
        <span style="color:gold;font-size:10rem">ğ’€­ğ’•ğ’ºğ’€­ğ’ºğ’…´ğ’ºğ’€­ğ’•ğ’ºğ’…´ğ’º ğ’„¯ğ’ºğ’€­ğ’•ğ’º</span><br><br>
        <b style="font-size:16rem;color:#0ff">${ğ’„¿}:${ğ’„·}:${ğ’€­ğ’•}</b>`;
    },300);
  });
}
</script>
</body>
</html>