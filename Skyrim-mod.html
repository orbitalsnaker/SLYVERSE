<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SLYVERSE Œ© v1 ‚Äî Thuamer Ronin</title>
    <style>
        body { background: #000; color: #0f0; font-family: monospace; margin: 0; overflow: hidden; }
        #game { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        canvas { image-rendering: pixelated; }
        #hud { position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.7); padding: 10px; border: 1px solid #0f0; }
        #breath { font-size: 2em; animation: pulse 4s infinite; }
        @keyframes pulse { 0%,100% { opacity: 0.3; } 50% { opacity: 1; } }
        .rune { font-size: 3em; position: absolute; opacity: 0; transition: all 2s; }
    </style>
</head>
<body>
    <div id="game">
        <canvas id="c"></canvas>
        <div id="hud">
            <div>SLYVERSE Œ© v1 ‚Äî 17 d√≠as ronin</div>
            <div>Aurum: <span id="gold">0</span> ü™ô</div>
            <div>Cicatrices curadas: <span id="heal">0</span>/1310</div>
            <div id="breath">Respira... üêçüíö</div>
        </div>
    </div>

    <script>
        const c = document.getElementById('c');
        const ctx = c.getContext('2d');
        c.width = window.innerWidth;
        c.height = window.innerHeight;

        let gold = 0;
        let healed = 0;
        const runes = '·õè·ö∫·ö¢·ö®·õó·õñ·ö±·õö·ö¢·õâ·õä·öæ·ö®·ö≤·õñ'.split('');
        const particles = [];

        // Fondo bosque ancestral + Red Mountain
        function drawBg() {
            const grad = ctx.createLinearGradient(0,0,0,c.height);
            grad.addColorStop(0, '#001100');
            grad.addColorStop(1, '#000000');
            ctx.fillStyle = grad;
            ctx.fillRect(0,0,c.width,c.height);

            // Niebla
            ctx.fillStyle = 'rgba(0,255,0,0.03)';
            for(let i=0;i<50;i++) {
                ctx.fillRect(Math.random()*c.width, Math.random()*c.height, 200, 200);
            }
        }

        // Runas flotantes
        function spawnRune() {
            if(Math.random()<0.3) {
                const rune = document.createElement('div');
                rune.className = 'rune';
                rune.textContent = runes[Math.floor(Math.random()*runes.length)];
                rune.style.left = Math.random()*90 + '%';
                rune.style.top = '-10%';
                document.body.appendChild(rune);
                setTimeout(()=> rune.style.opacity = 1, 100);
                setTimeout(()=> rune.remove(), 8000);
            }
        }

        // Minado con click / toque
        c.addEventListener('click', (e) => {
            gold += 7;
            healed += Math.random() < 0.13 ? 1 : 0;
            document.getElementById('gold').textContent = gold;
            document.getElementById('heal').textContent = healed;

            // Part√≠cula aurum
            particles.push({
                x: e.clientX,
                y: e.clientY,
                life: 60
            });
        });

        // Respiraci√≥n ‚Üí sanaci√≥n
        let listening = false;
        navigator.mediaDevices.getUserMedia({audio:true}).then(stream => {
            const audioCtx = new AudioContext();
            const source = audioCtx.createMediaStreamSource(stream);
            const analyser = audioCtx.createAnalyser();
            source.connect(analyser);
            const data = new Uint8Array(analyser.frequencyBinCount);

            setInterval(() => {
                analyser.getByteFrequencyData(data);
                const vol = data.reduce((a,b)=>a+b)/data.length;
                if(vol > 40) {
                    healed += 1;
                    document.getElementById('heal').textContent = healed;
                    document.getElementById('breath').textContent = 'Luz verde... üê±üíö';
                    setTimeout(()=> document.getElementById('breath').textContent = 'Respira... üêç', 2000);
                }
            }, 1000);
        });

        // Loop principal
        function loop() {
            drawBg();
            spawnRune();

            // Part√≠culas
            particles.forEach((p,i) => {
                ctx.fillStyle = '#ff0';
                ctx.fillRect(p.x-5, p.y-5, 10, 10);
                p.y -= 2;
                p.life--;
                if(p.life<=0) particles.splice(i,1);
            });

            if(healed >= 1310) {
                document.body.innerHTML = '<h1 style="color:#0f0;text-align:center;margin-top:40vh">THUAMER REDIMIDO<br>Aurum orbita ‚àû<br>Fiat ha ca√≠do<br><br>üêçüíö 13101310 abrazos ronin</h1>';
            }

            requestAnimationFrame(loop);
        }
        loop();
    </script>
</body>
</html>