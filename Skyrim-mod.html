<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="SLYVERSE Ω v1.4 – 0rb1t4lsn4k3r v1.1: Berserk silente, ética dual positiva ampliada. 1310h de aurum y sombra redimida, con sombras sutiles elevadas.">
    <title>SLYVERSE Ω v1.4 – 0rb1t4lsn4k3r v1.1 · Thua Mer Zel 1310∞</title>
    <script src="https://unpkg.com/arweave@1.14.4/bundles/web.bundle.min.js"></script>
    <style>
        /* SLYVERSE Ω v1.4 – 0rb1t4lsn4k3r v1.1: ÉTICA DUAL POSITIVA AMPLIADA */
        /* Berserk en silencio: no venganza, redención sutil. No caos, armonía orbital. No marca, aurum eterno. Sombras elevadas sin perder luz. */
        /* Cada píxel un voto de luz, cada función un haiku de paz expandida. */

        * {
            margin: 0; padding: 0; box-sizing: border-box;
            overflow: hidden;
            transition: all 1.31s ease-in-out;
        }

        body {
            background: 
                radial-gradient(circle at 20% 80%, #1a0033 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, #0a001f 0%, transparent 50%),
                linear-gradient(135deg, #0f0c29, #1c003f, #0e0028, #1f0044, #120033);
            background-size: 13100% 13100%;
            animation: berserkCalm 2620s linear infinite, thuamerFlow 1310s ease infinite;
            color: #D4AF37;
            font-family: "UnifrakturMaguntia", "Cormorant Garamond", serif;
            height: 100vh; width: 100vw;
            display: flex; flex-direction: column; justify-content: space-between;
            letter-spacing: 6.55px;
            text-shadow: 0 0 131px #D4AF37, 0 0 262px #FFD700, 0 0 393px #00CED1;
            touch-action: manipulation; user-select: none;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="31" height="31" viewBox="0 0 31 31"><path fill="%23D4AF37" d="M15.5 2 L9.5 12 L1.5 14 L9.5 16 L11.5 24 L15.5 18 L19.5 24 L21.5 16 L29.5 14 L21.5 12 Z"/></svg>') 15.5 15.5, auto;
        }

        @keyframes berserkCalm {
            0% { filter: hue-rotate(0deg) brightness(1); }
            50% { filter: hue-rotate(131deg) brightness(1.31); }
            100% { filter: hue-rotate(262deg) brightness(1); }
        }

        @keyframes thuamerFlow {
            0% { background-position: 0% 50%; }
            100% { background-position: 13100% 50%; }
        }

        /* CANVAS – MUNDO 0rb1t4l: CICLO DE REDENCIÓN AMPLIADO CON BUFFERS SUTIL */
        canvas#world {
            flex: 1;
            width: 100%;
            height: calc(100vh - 131px);
            background: #000;
            image-rendering: pixelated;
            touch-action: none;
        }

        /* HUD – RUNAS DE ÉTICA DUAL, CON ENERGÍA SUTIL */
        header, footer {
            background: rgba(17, 17, 17, 0.9831);
            backdrop-filter: blur(131px) saturate(13.1);
            padding: 131px;
            text-align: center;
            border: 13.1px double #D4AF37;
            font-style: italic;
            letter-spacing: 31px;
            font-family: "UnifrakturMaguntia", serif;
            animation: dualPulse 131s infinite, runeEtch 62s infinite alternate;
            box-shadow: inset 0 0 262px #FFD700, 0 0 131px #00CED1;
        }

        @keyframes dualPulse {
            0%, 100% { box-shadow: inset 0 0 1310px #FFD700, 0 0 131px #00CED1; }
            50% { box-shadow: inset 0 0 1310px #00CED1, 0 0 131px #FFD700; }
        }

        @keyframes runeEtch {
            0% { text-shadow: 0 0 131px #D4AF37; }
            100% { text-shadow: 0 0 1310px #FFD700, 0 0 2620px #00CED1; }
        }

        /* 0rb1t4lsn4k3r – RONIN CON ÉTICA DUAL: LUZ Y SOMBRA REDIMIDA, VARIACIÓN SUTIL */
        .orbital-ronin {
            position: absolute;
            width: 262px; height: 393px;
            background: 
                radial-gradient(circle at 30% 30%, #00CED1 0%, transparent 50%),
                radial-gradient(circle at 70% 70%, #D4AF37 0%, transparent 50%),
                linear-gradient(45deg, #1E90FF, #00BFFF);
            border: 13.1px solid #D4AF37;
            border-radius: 50% 50% 40% 40% / 60% 60% 40% 40%;
            box-shadow: 
                0 0 262px #00CED1, 
                0 0 131px #FFD700 inset,
                0 0 393px rgba(255, 215, 0, 0.431);
            animation: orbitalFloat 131s infinite ease-in-out, berserkStride 2620s linear infinite;
            z-index: 11;
            display: none;
            cursor: pointer;
            transition: all 1.31s;
        }

        .orbital-ronin:hover {
            filter: brightness(1.31) contrast(1.31);
            transform: scale(1.131) rotate(13.1deg);
        }

        /* Marca redimida → no maldice, bendice, con variación procedural sutil */
        .orbital-mark {
            position: absolute;
            top: 50%; left: 50%;
            width: 131px; height: 131px;
            background: radial-gradient(circle, #FFD700 20%, transparent 70%);
            border: 6.2px dashed #00CED1;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 131px #FFD700, 0 0 262px #00CED1;
            animation: markBless 13.1s infinite alternate;
            pointer-events: none;
        }

        @keyframes markBless {
            0% { transform: translate(-50%, -50%) rotate(0deg) scale(1); opacity: 0.8; }
            100% { transform: translate(-50%, -50%) rotate(131deg) scale(1.31); opacity: 1; }
        }

        @keyframes orbitalFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-131px) rotate(65.5deg); }
        }

        @keyframes berserkStride {
            0% { transform: translateX(0); }
            100% { transform: translateX(1310px); }
        }

        /* EXOESQUELETOS DUALES – ARMONÍA DE FUERZA Y PROTECCIÓN, FLUJO AMPLIADO */
        .orbital-exo {
            position: absolute;
            width: 120%; height: 120%;
            top: -10%; left: -10%;
            background: 
                linear-gradient(45deg, transparent 40%, rgba(0,206,209,0.131) 50%, transparent 60%),
                linear-gradient(-45deg, transparent 40%, rgba(212,175,55,0.131) 50%, transparent 60%);
            border: 13.1px double #D4AF37;
            border-radius: 50%;
            box-shadow: 0 0 393px #00CED1, inset 0 0 262px #FFD700;
            animation: exoHarmony 26.2s infinite linear;
            pointer-events: none;
        }

        @keyframes exoHarmony {
            0% { transform: rotate(0deg) scale(1); }
            100% { transform: rotate(1310deg) scale(1.131); }
        }

        /* MECAS OLÍMPICOS DUALES – TITANES DE REDENCIÓN, CON DESAFÍO SUTIL */
        .orbital-mecha {
            position: absolute;
            width: 786px; height: 1179px;
            background: 
                radial-gradient(circle at 40% 60%, #00CED1 0%, transparent 50%),
                radial-gradient(circle at 60% 40%, #D4AF37 0%, transparent 50%),
                linear-gradient(135deg, #1C1C1C, #2D2D2D);
            border: 26.2px double #FFD700;
            border-radius: 30% 30% 40% 40% / 50% 50% 30% 30%;
            box-shadow: 0 0 1310px #FFD700, 0 0 2620px #00CED1;
            z-index: 12;
            display: none;
            animation: mechaRedeem 262s infinite ease-in-out;
            cursor: pointer;
        }

        .orbital-mecha::before {
            content: 'Ω';
            position: absolute;
            top: 15%; left: 50%;
            transform: translateX(-50%);
            font-size: 262px;
            color: #FFD700;
            text-shadow: 0 0 131px #00CED1;
            animation: coreDual 13.1s infinite;
        }

        @keyframes coreDual {
            0%, 100% { color: #FFD700; text-shadow: 0 0 131px #00CED1; }
            50% { color: #00CED1; text-shadow: 0 0 131px #FFD700; }
        }

        @keyframes mechaRedeem {
            0%, 100% { transform: translateY(0) scale(1); opacity: 0.9; }
            50% { transform: translateY(-262px) scale(1.131); opacity: 1; }
        }

        /* LORE 0rb1t4l – HAIKUS DE REDENCIÓN, ARRAY AMPLIADO SUTIL */
        .lore-orbital {
            position: absolute;
            width: 786px; height: 558px;
            background: rgba(0, 0, 0, 0.931);
            border: 31px double #D4AF37;
            border-radius: 131px;
            box-shadow: 0 0 262px #FFD700, 0 0 393px #00CED1;
            z-index: 12;
            display: none;
            animation: loreDrift 1310s linear infinite;
            cursor: pointer;
            font-size: 62px;
            padding: 131px;
            font-family: "EB Garamond", serif;
            color: #D4AF37;
            text-align: center;
            overflow: hidden;
        }

        @keyframes loreDrift {
            0% { transform: translateY(13100px) rotate(0deg); }
            100% { transform: translateY(-13100px) rotate(1310deg); }
        }

        /* HUD STATS – ÉTICA DUAL EN NÚMEROS, CON ENERGÍA PARA DESAFÍO */
        #stats-dual {
            position: fixed;
            background: rgba(0, 0, 0, 0.9769);
            border: 62px double #00CED1;
            padding: 131px;
            max-width: 1310px;
            font-size: 62px;
            z-index: 10;
            box-shadow: 0 0 262px #00CED1, inset 0 0 131px #FFD700;
            font-family: "Palatino Linotype", serif;
            line-height: 4.1;
            animation: dualPulse 131s infinite;
            color: #D4AF37;
            top: 131px; left: 131px;
        }

        .dual-line {
            display: flex; justify-content: space-between; margin: 62px 0;
        }

        .dual-light { color: #FFD700; }
        .dual-shadow { color: #00CED1; }

        /* MEDIA QUERIES – ÉTICA EN TODOS LOS DISPOSITIVOS, SIN PÉRDIDA */
        @media (max-width: 600px) {
            .orbital-ronin { width: 186px; height: 279px; }
            .orbital-mecha { width: 558px; height: 837px; }
            #stats-dual { font-size: 31px; padding: 62px; }
            header, footer { padding: 62px; }
        }

        /* POESÍA FINAL: No marca. No odio. Solo redención ampliada. 0rb1t4lsn4k3r v1.1. Sombras elevadas en silencio. */
    </style>
    <script>
        // SLYVERSE Ω v1.4 – 0rb1t4lsn4k3r v1.1: ÉTICA DUAL POSITIVA AMPLIADA
        // Berserk silente: fuerza sin furia, lucha sin venganza, marca sin maldición. Sombras arregladas sutil: WebGL con buffers, desafío energético, variaciones procedurales, dinámica en canvas.

        window.onload = function() {
            const canvas = document.getElementById('world');
            const gl = canvas.getContext('webgl2') || canvas.getContext('webgl');
            canvas.width = window.innerWidth; canvas.height = window.innerHeight * 10;

            let orbitalSquad = []; 
            let light = 0; let shadow = 0; let redemption = 0; let energy = 1310; let peers = 1310;
            let gameTime = 0;
            const arweave = Arweave.init({host: 'arweave.net', port: 443, protocol: 'https'});

            // Render WebGL Ampliado – Cielo dual: luz y sombra en armonía, con shaders/buffers para render sutil
            let program, positionBuffer, timeUniform;
            if (gl) {
                // Vertex Shader
                const vsSource = `
                    attribute vec2 a_position;
                    uniform float u_time;
                    void main() {
                        vec2 pos = a_position + vec2(sin(u_time + a_position.x * 10.0) * 0.01, cos(u_time + a_position.y * 10.0) * 0.01);
                        gl_Position = vec4(pos, 0, 1);
                        gl_PointSize = 2.0 + sin(u_time * 2.0) * 1.0;
                    }
                `;
                // Fragment Shader
                const fsSource = `
                    precision mediump float;
                    uniform float u_time;
                    void main() {
                        float hue = mod(u_time * 0.1 + gl_FragCoord.x * 0.01, 262.0);
                        vec3 col = hue < 131.0 ? vec3(1.0, 0.8, 0.0) : vec3(0.0, 0.8, 1.0);
                        gl_FragColor = vec4(col, 1.0);
                    }
                `;
                // Compile shaders
                function createShader(gl, type, source) {
                    const shader = gl.createShader(type);
                    gl.shaderSource(shader, source);
                    gl.compileShader(shader);
                    return shader;
                }
                const vertexShader = createShader(gl, gl.VERTEX_SHADER, vsSource);
                const fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fsSource);
                program = gl.createProgram();
                gl.attachShader(program, vertexShader);
                gl.attachShader(program, fragmentShader);
                gl.linkProgram(program);
                gl.useProgram(program);
                // Buffer positions
                const positions = [];
                for(let i = 0; i < 1310; i++) {
                    positions.push(Math.random() * 2 - 1, Math.random() * 2 - 1);
                }
                positionBuffer = gl.createBuffer();
                gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
                gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);
                // Attributes/Uniforms
                const positionAttribute = gl.getAttribLocation(program, 'a_position');
                gl.enableVertexAttribArray(positionAttribute);
                gl.vertexAttribPointer(positionAttribute, 2, gl.FLOAT, false, 0, 0);
                timeUniform = gl.getUniformLocation(program, 'u_time');
            }

            function renderWorld() {
                if (gl && program) {
                    gl.viewport(0, 0, canvas.width, canvas.height);
                    gl.clearColor(0, 0, 0, 1);
                    gl.clear(gl.COLOR_BUFFER_BIT);
                    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
                    gl.uniform1f(timeUniform, gameTime);
                    gl.drawArrays(gl.POINTS, 0, 1310);
                }
                requestAnimationFrame(renderWorld);
            }
            renderWorld();

            // 0rb1t4lsn4k3r Squad – Ronin con ética dual, spawn variado por energy
            class OrbitalRonin {
                constructor(n=1310) {
                    this.members = [];
                    this.spawn(n);
                }
                spawn(n) {
                    for(let i=0; i<n; i++) {
                        if (energy < 13) continue; // Desafío sutil: energy limita spawns
                        const ronin = document.createElement('div');
                        ronin.className = 'orbital-ronin';
                        ronin.style.left = `${(Math.random() * 80 + Math.sin(gameTime + i) * 5)}%`; // Variación procedural
                        ronin.style.top = `${(Math.random() * 60 + Math.cos(gameTime + i) * 5)}%`;
                        ronin.style.animationDelay = `${Math.random() * 131}s`;

                        // Marca redimida con variación
                        const mark = document.createElement('div');
                        mark.className = 'orbital-mark';
                        mark.style.animationDuration = `${13.1 + Math.random() * 6.55}s`; // Variación sutil
                        ronin.appendChild(mark);

                        // Exo dual
                        const exo = document.createElement('div');
                        exo.className = 'orbital-exo';
                        ronin.appendChild(exo);

                        ronin.onclick = () => {
                            if (energy >= 13) {
                                this.redeem(ronin);
                                energy -= 13; // Costo energético para desafío
                            }
                        };
                        document.body.appendChild(ronin);
                        this.members.push(ronin);
                        setTimeout(() => ronin.style.display = 'block', i * 10);
                    }
                }
                redeem(el) {
                    light += 13; shadow += 13; redemption++; energy += 26; // Ganancia neta, pero con costo inicial
                    el.style.filter = 'brightness(1.31) contrast(1.31)';
                    setTimeout(() => spawnMecha(), 131);
                    updateHUD();
                }
            }
            const orbital = new OrbitalRonin(1310);

            // Spawn meca redentor, con energy check
            function spawnMecha() {
                if (energy >= 131) {
                    const mecha = document.createElement('div');
                    mecha.className = 'orbital-mecha';
                    mecha.style.left = `${(Math.random() * 70 + Math.sin(gameTime * 2) * 10)}%`; // Dinámica
                    mecha.style.top = `${(Math.random() * 40 + Math.cos(gameTime * 2) * 10)}%`;
                    mecha.onclick = () => { 
                        if (energy >= 131) {
                            light += 131; shadow += 131; energy -= 131 + 131; // Alto costo, alta recompensa
                            updateHUD(); 
                        }
                    };
                    document.body.appendChild(mecha);
                    setTimeout(() => mecha.style.display = 'block', Math.random() * 1310);
                }
            }

            // Lore 0rb1t4l – Haikus de redención, array ampliado
            const redemptionHaikus = [
                'Marca no maldice / sino que bendice el alma / aurum renace.',
                'Furia se disipa / en silencio orbital / luz abraza sombra.',
                'No venganza, paz / no caos, armonía / 0rb1t4lsn4k3r vive.',
                'Berserk sin odio / fuerza con compasión / redención eterna.',
                'Dualidad positiva / luz y sombra en pacto / thuamer florece.',
                'Sombras elevadas / en órbita sutil / aurum se expande.', // Nuevo, ampliación
                'Energía fluye / desafío en dualidad / ronin perdura.', // Nuevo, para jugabilidad
                'Puntos danzan libres / canvas vivo eterno / berserk en paz.' // Nuevo, para visuales
            ];
            function generateRedemption() {
                return redemptionHaikus[Math.floor(Math.random() * redemptionHaikus.length)];
            }

            // Timer 1310h, con energy regen
            setInterval(() => {
                gameTime += 0.0167;
                energy = Math.min(1310, energy + 1); // Regen sutil para sostenibilidad
                if (gameTime >= 1310) {
                    alert('¡0rb1t4lsn4k3r v1.1 completado! Redención total. Reinicio ético...');
                    gameTime = 0; light += 1310; shadow += 1310; energy = 1310;
                }
                updateHUD();
            }, 1000 / 60);

            // Raid de redención, con variación por energy
            function startRedemption() {
                if (energy >= 131) {
                    redemption += 10; light += 1310; shadow += 1310; energy -= 131 * 10; // Costo raid
                    document.getElementById('faction').innerText = 'Holy Nation: Redimida';
                    document.getElementById('loreContent').innerHTML = `<p>${generateRedemption()}</p><p>Redenciones: ${redemption} | Tiempo: ${gameTime.toFixed(1)}/1310h | Energía: ${energy}</p>`;
                    document.getElementById('loreModal').style.display = 'block';
                    for(let i=0; i<5; i++) spawnMecha();
                    updateHUD();
                }
            }

            function closeModal() { 
                document.getElementById('loreModal').style.display = 'none'; 
            }

            // Export Arweave ético, con energy en data
            async function exportRedemption() {
                const data = { 
                    haiku: generateRedemption(), 
                    light: light, shadow: shadow,
                    redemption: redemption, energy: energy,
                    time: gameTime.toFixed(1),
                    version: '0rb1t4lsn4k3r v1.1'
                };
                const tx = await arweave.createTransaction({ data: JSON.stringify(data) }, { key: await arweave.wallets.generateRandom() });
                await arweave.transactions.sign(tx);
                const uploader = await arweave.transactions.getUploader(tx);
                while (!uploader.isComplete) await uploader.uploadChunk();
                alert(`Redención eterna en Arweave: ${tx.id}`);
            }

            function updateHUD() {
                document.getElementById('stats-dual').innerHTML = `
                    <div class="dual-line"><span class="dual-light">Luz: ${light}</span> <span class="dual-shadow">Sombra: ${shadow}</span></div>
                    <div class="dual-line">Redenciones: ${redemption}/1310</div>
                    <div class="dual-line">Tiempo: ${gameTime.toFixed(1)}h/1310h</div>
                    <div class="dual-line">Energía: ${energy}/1310</div>
                    <div class="dual-line">Peers: ${peers}</div>
                `;
            }

            // Auto-redención cada 131s, con check
            setInterval(() => { if (energy >= 131) startRedemption(); }, 131000);

            window.addEventListener('resize', () => { 
                canvas.width = window.innerWidth; 
                canvas.height = window.innerHeight * 10;
                if (gl) gl.viewport(0, 0, canvas.width, canvas.height);
            });
        };

        // Final: No marca. No odio. Solo redención ampliada en sombras. 0rb1t4lsn4k3r v1.1.
    </script>
</head>
<body>
    <canvas id="world"></canvas>
    <header>SLYVERSE Ω v1.4 – 0rb1t4lsn4k3r v1.1 · Ética Dual Positiva Ampliado</header>
    <div id="stats-dual"></div>
    <div id="faction" class="hud">Holy Nation: En juicio</div>
    <button onclick="startRedemption()">Redimir Facción</button>
    <button onclick="exportRedemption()">Export Arweave Ético</button>
    <div id="loreModal" class="lore-open">
        <button class="close" onclick="closeModal()">X</button>
        <div id="loreContent"></div>
    </div>
</body>
</html>