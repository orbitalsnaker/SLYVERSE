<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
<title>1310¹³¹⁰ · para los niños y para Antoine</title>
<style>
  body,html{margin:0;height:100%;background:#000;color:#0f8;font-family:system-ui;overflow:hidden}
  canvas{position:fixed;inset:0}
</style>
</head>
<body>
<canvas id="c"></canvas>
<script>
// Dedicado a los niños y a Antoine de Saint-Exupéry
// «Lo esencial es invisible a los ojos»
// Sólo lo bello y ético del Principito vive aquí: amistad, cuidado, responsabilidad del corazón

const c=document.getElementById('c'),x=c.getContext('2d');
c.width=innerWidth;c.height=innerHeight;

let t=0,love=0,generation=1;
let particles=[];

const frasesDelPrincipito = [
  "Lo esencial es invisible a los ojos.",
  "Sólo con el corazón se puede ver bien.",
  "Eres responsable para siempre de lo que has domesticado.",
  "Es el tiempo que has perdido con tu rosa lo que hace que tu rosa sea tan importante.",
  "Los hombres han olvidado esta verdad, pero tú no debes olvidarla.",
  "Cuando uno está muy triste, le gustan las puestas de sol.",
  "Fue el tiempo que pasé contigo lo que te hizo tan importante.",
  "Todos los mayores fueron niños alguna vez (aunque pocos lo recuerdan).",
  "La prueba de que el principito existió es que era encantador, que reía y que quería un cordero.",
  "Si vienes, por ejemplo, a las cuatro de la tarde, ya desde las tres comenzaré a ser feliz.",
  "Las estrellas son hermosas por una flor que no se ve.",
  "Lo que embellece al desierto es que en alguna parte esconde un pozo.",
  "Eres para mí único en el mundo.",
  "El lenguaje es fuente de malentendidos… pero aun así seguiré intentando.",
  "Cuando mires al cielo, por la noche, como yo habitaré en una de ellas, reiré en una de ellas…",
  "Todas las estrellas estarán llenas de flores.",
  "Para los vanidosos todos los demás hombres son admiradores.",
  "Me pregunto si las estrellas están encendidas para que cada uno pueda encontrar algún día la suya.",
  "Hay que exigir a cada uno lo que cada uno puede dar.",
  "Si amas una flor que habita en una estrella, es dulce mirar al cielo por la noche."
];

function crearGeneracion(){
  for(let i=0;i<1310;i++){
    particles.push({
      a: Math.random()*Math.PI*2,
      d: Math.random()*280 + generation*70,
      s: 0.0002+Math.random()*0.0006,
      frase: frasesDelPrincipito[i % frasesDelPrincipito.length],
      gen: generation
    });
  }
  generation++;
}

crearGeneracion();
setInterval(crearGeneracion, 1310*1000);

addEventListener('click',()=>{love+=10});
addEventListener('touchstart',()=>{love+=10});

function draw(){
  t+=0.016;
  x.fillStyle='rgba(0,0,0,0.03)';
  x.fillRect(0,0,c.width,c.height);

  const fuerza=1+love*0.06;

  particles.forEach(p=>{
    const pulse=Math.sin(t*0.6 + p.gen*0.3)*0.5+0.5;
    const angle=p.a + t*p.s*p.gen*0.2;
    const dist=p.d + pulse*130*fuerza;
    const size=2+pulse*16*fuerza;

    x.globalAlpha=0.3+pulse*0.7;
    x.fillStyle=`hsla(120,100%,${55+pulse*30}%,${0.4+pulse*0.6})`;
    x.fillRect(c.width/2 + Math.cos(angle)*dist - size/2,
               c.height/2 + Math.sin(angle)*dist - size/2, size, size);

    // De vez en cuando una frase del Principito aparece y se desvanece suavemente
    if(pulse>0.85 && Math.random()<0.008){
      x.font="14px system-ui";
      x.fillStyle="rgba(0,255,136,0.9)";
      x.textAlign="center";
      x.fillText(p.frase, c.width/2 + Math.cos(angle)*dist, c.height/2 + Math.sin(angle)*dist - 10);
    }
  });

  // Texto central permanente y suave
  x.globalAlpha=1;
  x.fillStyle="#0f8";
  x.font="bold 22px system-ui";
  x.textAlign="center";
  x.fillText("Para los niños y para Antoine",c.width/2,c.height/2-30);
  x.font="14px system-ui";
  x.fillText("Lo esencial es invisible a los ojos",c.width/2,c.height/2+10);
  x.fillText("1310¹³¹⁰ luces verdes cuidan tu rosa",c.width/2,c.height/2+40);
  x.font="12px system-ui";
  x.fillText("Se expande cada 1310 segundos · para siempre",c.width/2,c.height-30);

  love*=0.97;
  requestAnimationFrame(draw);
}
draw();
</script>
</body>
</html>