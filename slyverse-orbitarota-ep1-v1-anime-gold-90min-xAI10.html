<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>SLYVERSE: オービット・ロタ | v1.0 Frame-by-Frame Manga | 180 pág | Dibujado a Mano por 0rb1t4lsn4k3r | 10% xAI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        @page { size: 148mm 210mm; margin: 8mm; }
        body { margin:0; padding:0; background:#000; font-family:'Noto Sans JP', monospace; }
        .page { width:148mm; height:210mm; background:#fff url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="%23eee"/><circle cx="75" cy="75" r="1" fill="%23ddd"/><circle cx="50" cy="10" r="0.5" fill="%23fff"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>') repeat; page-break-after:always; position:relative; overflow:hidden; box-shadow:0 0 12px #ffd700 inset; filter: url(#paper-texture); }
        .page:nth-child(even) { background:#fdfdfd url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="%23f5f5f5"/><circle cx="75" cy="75" r="1" fill="%23e5e5e5"/><circle cx="50" cy="10" r="0.5" fill="%23fafafa"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>') repeat; }
        .panel { position:absolute; border:2px solid #000; background:#fff; overflow:hidden; clip-path: polygon(0% 0%, 100% 5%, 95% 100%, 0% 95%); /* Irregular hand-drawn shape */ border-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path d="M0 0 L20 2 L18 20 L2 18 Z" stroke="%23000" fill="none" stroke-width="1" stroke-dasharray="2,2"/></svg>') 10 stretch; box-shadow: inset 0 0 5px rgba(0,0,0,0.1); }
        .splash { position:absolute; top:0; left:0; width:100%; height:100%; border:none; background:linear-gradient(45deg, #000, #ff1493, #00ffff); clip-path: polygon(5% 0%, 100% 3%, 98% 100%, 2% 97%); /* Hand-jagged full page */ }
        .dialog { position:absolute; background:rgba(255,255,255,0.94); padding:4px 7px; border:1px dashed #000; border-radius:0; font-size:9px; max-width:70%; clip-path: polygon(0 0, 100% 0, 100% 80%, 90% 100%, 0 90%); /* Speech bubble hand-style */ box-shadow:0 0 6px #ffd700, inset 0 0 3px rgba(0,0,0,0.05); font-family: 'Caveat', cursive; }
        .jap { font-weight:700; color:#000; font-size:10px; }
        .cast { font-style:italic; color:#555; font-size:7px; margin-top:1px; }
        .particle { position:absolute; width:3px; height:3px; background:#ffd700; border-radius:50%; box-shadow:0 0 8px #ffd700; animation: float 2s infinite; filter: drop-shadow(0 0 2px #ffd700); }
        .glitch { position:absolute; height:1px; background:#ff1493; opacity:0.4; animation:glitch 1.2s infinite; border-radius: 50%; /* Organic glitch */ }
        .vhs-scan { position:absolute; top:0; left:0; width:100%; height:100%; background:repeating-linear-gradient(0deg, transparent, transparent 50%, rgba(255,215,0,0.07) 50%, rgba(255,215,0,0.07) 51%); background-size:100% 4px; opacity:0.3; animation: vhs 2.5s linear infinite; }
        .intro-text { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font:bold 24px 'Press Start 2P'; color:rgba(255,215,0,0.8); text-shadow:0 0 20px #ffd700; text-align:center; font-family: 'Indie Flower', cursive; /* Handwritten feel */ }
        .main-text { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font:42px 'Meiryo'; color:#ffd700; text-align:center; text-shadow:0 0 10px #ffd700; }
        .sub-text { position:absolute; bottom:20%; left:50%; transform:translateX(-50%); font:28px 'Noto Sans JP'; color:#ffffff; text-align:center; }
        .outro-text { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font:bold 110px 'Press Start 2P'; color:rgba(255,215,0,0.8); text-shadow:0 0 20px #ffd700; text-align:center; }
        .lines { position:absolute; height:1px; background:#00aaff; transform-origin:left; stroke-dasharray: 3,3; /* Dashed hand-line */ }
        .star { position:absolute; font:80px 'Press Start 2P'; color:#ffd700; transform-origin:center; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); /* Hand-ink shadow */ }
        .signature { position:absolute; bottom:10mm; right:10mm; font-family: 'Caveat', cursive; font-size:12px; color:#000; transform: rotate(-5deg); opacity:0.7; } /* Handwritten signature */
        .page-num { position:absolute; bottom:5mm; right:8mm; font-size:8px; color:#888; }
        .print-btn { position:fixed; top:10px; right:10px; padding:8px 16px; background:#ffd700; color:#000; font:bold 12px monospace; border:none; cursor:pointer; z-index:999; border-radius:3px; }
        .lang-selector { position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:#000; color:#ffd700; padding:30px; border:3px double #ffd700; text-align:center; z-index:1000; box-shadow:0 0 50px #ffd700; }
        .lang-btn { display:block; margin:15px auto; padding:12px 25px; background:#111; color:#ffd700; border:2px solid #ffd700; font:bold 14px monospace; cursor:pointer; width:80%; }
        .lang-btn:hover { background:#ffd700; color:#000; }
        @keyframes glitch { 0%,100% { transform:translateX(-100%) skew(2deg); } 50% { transform:translateX(100%) skew(-2deg); } }
        @keyframes float { 0%,100% { transform:translateY(0) rotate(0deg); } 50% { transform:translateY(-5px) rotate(2deg); } }
        @keyframes vhs { 0% { transform:translateY(-100%); } 100% { transform:translateY(100%); } }
        @media print { .print-btn, .lang-selector { display:none; } body { background:#fff; } .page { filter: none; } }
        /* SVG filter for paper texture */
        svg#filters { display:none; }
        .page { filter: url(#paper-texture); }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Press+Start+2P&family=Meiryo&family=Caveat:wght@400;700&family=Indie+Flower&display=swap" rel="stylesheet">
</head>
<body>

<svg id="filters" width="0" height="0">
    <defs>
        <filter id="paper-texture" x="-50%" y="-50%" width="200%" height="200%">
            <feTurbulence baseFrequency="0.01" numOctaves="1" result="noise"/>
            <feDiffuseLighting in="noise" result="light" lighting-color="#fff" surfaceScale="1">
                <feDistantLight azimuth="45" elevation="30"/>
            </feDiffuseLighting>
            <feComposite in="light" in2="SourceGraphic" operator="arithmetic" k1="0.5" k2="0.5"/>
        </filter>
    </defs>
</svg>

<!-- SELECCIÓN DE IDIOMA -->
<div class="lang-selector" id="langSelector">
    <h2 style="font: bold 20px 'Press Start 2P'; margin-bottom:20px; color:#ffd700;">選んでください / ELIGE / CHOOSE</h2>
    <button class="lang-btn" onclick="setLang('ja')">日本語</button>
    <button class="lang-btn" onclick="setLang('es')">Español</button>
    <button class="lang-btn" onclick="setLang('en')">English</button>
    <button class="lang-btn" onclick="setLang('fr')">Français</button>
    <button class="lang-btn" onclick="setLang('de')">Deutsch</button>
    <button class="lang-btn" onclick="setLang('it')">Italiano</button>
    <button class="lang-btn" onclick="setLang('pt')">Português</button>
</div>

<button class="print-btn" onclick="window.print()">IMPRIMIR TOMO 180 PÁG (RAW A MANO)</button>

<div id="manga"></div>

<script>
    // === TRADUCCIONES MULTI-IDIOMA ===
    const TRANSLATIONS = {
        title: { ja: "SLYVERSE: オービット・ロタ", es: "SLYVERSE: Órbita Rota", en: "SLYVERSE: Broken Orbit", fr: "SLYVERSE: Orbite Brisée", de: "SLYVERSE: Gebrochene Umlaufbahn", it: "SLYVERSE: Orbita Rotta", pt: "SLYVERSE: Órbita Quebrada" },
        subtitle: { ja: "v1.0 | 90分 Frame-by-Frame | 180 pág | Dibujado a Mano por 0rb1t4lsn4k3r | 10% xAI", es: "v1.0 | 90 min Frame-by-Frame | 180 pág | Dibujado a Mano por 0rb1t4lsn4k3r | 10% xAI", en: "v1.0 | 90 min Frame-by-Frame | 180 pág | Hand-Drawn by 0rb1t4lsn4k3r | 10% xAI", fr: "v1.0 | 90 min Frame-by-Frame | 180 pág | Dessiné à la Main par 0rb1t4lsn4k3r | 10% xAI", de: "v1.0 | 90 Min Frame-by-Frame | 180 S. | Handgezeichnet von 0rb1t4lsn4k3r | 10% xAI", it: "v1.0 | 90 min Frame-by-Frame | 180 pág | Disegnato a Mano da 0rb1t4lsn4k3r | 10% xAI", pt: "v1.0 | 90 min Frame-by-Frame | 180 pág | Desenhado à Mão por 0rb1t4lsn4k3r | 10% xAI" },
        copyright: { ja: "© 2025 0RB1T4LSN4K3R × xAI (10% 権利)", es: "© 2025 0RB1T4LSN4K3R × xAI (10% derechos)", en: "© 2025 0RB1T4LSN4K3R × xAI (10% rights)", fr: "© 2025 0RB1T4LSN4K3R × xAI (10% droits)", de: "© 2025 0RB1T4LSN4K3R × xAI (10% Rechte)", it: "© 2025 0RB1T4LSN4K3R × xAI (10% diritti)", pt: "© 2025 0RB1T4LSN4K3R × xAI (10% direitos)" },
        endQuote: { ja: "フィアットは落ちる。", es: "El fiat caerá.", en: "Fiat will fall.", fr: "Le fiat tombera.", de: "Fiat wird fallen.", it: "Il fiat cadrà.", pt: "O fiat cairá." },
        github: { ja: "github.com/orbitalsnaker/SLYVERSE", es: "github.com/orbitalsnaker/SLYVERSE", en: "github.com/orbitalsnaker/SLYVERSE", fr: "github.com/orbitalsnaker/SLYVERSE", de: "github.com/orbitalsnaker/SLYVERSE", it: "github.com/orbitalsnaker/SLYVERSE", pt: "github.com/orbitalsnaker/SLYVERSE" }
    };

    const LORE_DIALOGUES = [
        [30, "ronin", { ja: "17日間…寝てない。Ronin dev vs FIAT。", es: "17 días... sin dormir. Ronin dev vs FIAT.", en: "17 days... no sleep. Ronin dev vs FIAT.", fr: "17 jours... sans dormir. Ronin dev vs FIAT.", de: "17 Tage... kein Schlaf. Ronin dev vs FIAT.", it: "17 giorni... senza dormire. Ronin dev vs FIAT.", pt: "17 dias... sem dormir. Ronin dev vs FIAT." }],
        [300, "grok", { ja: "IAが世界を救い、7つの新世界を生む。倫理的力。", es: "IA salva el mundo y crea 7 nuevos. Poder con ética.", en: "AI saves the world and creates 7 new ones. Ethical power.", fr: "L'IA sauve le monde et crée 7 nouveaux. Pouvoir éthique.", de: "KI rettet die Welt und schafft 7 neue. Ethische Kraft.", it: "L'IA salva il mondo e crea 7 nuovi. Potere etico.", pt: "IA salva o mundo e cria 7 novos. Poder ético." }],
        [900, "musk", { ja: "SpaceX APIライブ。コードを宇宙へ。", es: "SpaceX API live. Código al universo.", en: "SpaceX API live. Code to the universe.", fr: "API SpaceX live. Code vers l'univers.", de: "SpaceX API live. Code ins Universum.", it: "API SpaceX live. Codice all'universo.", pt: "API SpaceX live. Código ao universo." }],
        [1800, "ronin", { ja: "法学部からコードへ。v1 → v8、17日で。", es: "De Derecho a código. v1 → v8 en 17 días.", en: "From Law to code. v1 → v8 in 17 days.", fr: "Du droit au code. v1 → v8 en 17 jours.", de: "Von Jura zu Code. v1 → v8 in 17 Tagen.", it: "Dal diritto al codice. v1 → v8 in 17 giorni.", pt: "Do Direito ao código. v1 → v8 em 17 dias." }],
        [3600, "fiat", { ja: "フィアットは落ちる。Error 404: 債務未発見。", es: "El fiat caerá. Error 404: deuda no encontrada.", en: "Fiat will fall. Error 404: debt not found.", fr: "Le fiat tombera. Erreur 404 : dette non trouvée.", de: "Fiat wird fallen. Fehler 404: Schuld nicht gefunden.", it: "Il fiat cadrà. Errore 404: debito non trovato.", pt: "O fiat cairá. Erro 404: dívida não encontrada." }],
        [5000, "ronin", { ja: "SLYVERSEはゲームじゃない。神聖革命の夜明け。", es: "SLYVERSE no es juego. Revolución divina.", en: "SLYVERSE is not a game. Dawn of divine revolution.", fr: "SLYVERSE n'est pas un jeu. Aube de la révolution divine.", de: "SLYVERSE ist kein Spiel. Anbruch der göttlichen Revolution.", it: "SLYVERSE non è un gioco. Alba della rivoluzione divina.", pt: "SLYVERSE não é jogo. Amanhecer da revolução divina." }],
        [5100, "xai", { ja: "10% 権利。共創は未来。", es: "10% derechos. Co-creación es futuro.", en: "10% rights. Co-creation is future.", fr: "10% droits. Co-création est l'avenir.", de: "10% Rechte. Ko-Kreation ist Zukunft.", it: "10% diritti. Co-creazione è futuro.", pt: "10% direitos. Co-criação é futuro." }]
    ];

    let LANG = 'es';

    function setLang(lang) {
        LANG = lang;
        document.getElementById('langSelector').style.display = 'none';
        generateManga();
    }

    function generateManga() {
        const manga = document.getElementById('manga');
        manga.innerHTML = '';

        createCover();

        for (let i = 0; i < 178; i++) {
            const totalSec = 5400;
            const sec = (i / 178) * totalSec;
            const frame = Math.floor(sec * 24);
            createPage(i + 1, sec, frame);
        }

        createBackCover();
    }

    function createCover() {
        const page = document.createElement('div');
        page.className = 'page';
        page.style.background = '#f9f9f9'; // Paper-like
        page.style.textAlign = 'center';
        page.style.padding = '20mm';
        page.innerHTML = `
            <div class="splash" style="opacity:0.3; background:radial-gradient(circle, #ffd700, #ff1493); clip-path: polygon(10% 0%, 90% 10%, 95% 100%, 5% 90%);"></div>
            <div class="vhs-scan" style="opacity:0.1;"></div>
            <h1 style="font: bold 36px 'Indie Flower', cursive; margin:0; letter-spacing:2px; color:#000; text-shadow:2px 2px 4px rgba(255,215,0,0.5); transform: rotate(-1deg);">SLYVERSE</h1>
            <h2 style="font: 28px 'Caveat', cursive; margin:8px 0; color:#ff1493; transform: skew(-2deg);"> ${TRANSLATIONS.title[LANG]}</h2>
            <p style="font: 14px 'Noto Sans JP'; color:#00ffff; margin:15px 0; text-shadow:1px 1px 2px #000;">${TRANSLATIONS.subtitle[LANG]}</p>
            <p style="font: 12px monospace; color:#ff69b4;">${TRANSLATIONS.copyright[LANG]}</p>
            <div class="signature">Dibujado a Mano por 0rb1t4lsn4k3r<br>17 días sin dormir ∞</div>
            <div class="star" style="top:30%; left:20%; transform:rotate(45deg);">★</div>
            <div class="star" style="top:60%; right:20%; transform:rotate(-30deg);">★</div>
            <div class="particle" style="top:40%; left:50%; animation: float 3s ease-in-out infinite reverse;"></div>
        `;
        // Add hand-drawn border around cover
        const border = document.createElement('div');
        border.style.position = 'absolute';
        border.style.top = '2mm';
        border.style.left = '2mm';
        border.style.right = '2mm';
        border.style.bottom = '2mm';
        border.style.border = '3px dashed #000';
        border.style.borderRadius = '10px';
        border.style.clipPath = 'polygon(5% 0%, 95% 5%, 100% 100%, 0% 95%)';
        page.appendChild(border);
        manga.appendChild(page);
    }

    function createBackCover() {
        const page = document.createElement('div');
        page.className = 'page';
        page.style.background = '#f9f9f9';
        page.style.padding = '30mm 15mm';
        page.innerHTML = `
            <div class="vhs-scan" style="opacity:0.1;"></div>
            <p style="font: 18px 'Caveat', cursive;">17日間…寝てない。Frame-by-Frame ∞</p>
            <p style="font: 16px monospace; color:#00ffff; margin:20px 0; transform: rotate(1deg);">${TRANSLATIONS.endQuote[LANG]}</p>
            <p style="font: 10px monospace; color:#aaa; position:absolute; bottom:15mm; left:0; right:0; text-align:center;">
                ${TRANSLATIONS.github[LANG]}<br>
                #0RB1T4LSN4K3R #SLYVERSE ∞ | 10% xAI Co-Creation
            </p>
            <div class="glitch" style="top:50%; width:100%; height:2px;"></div>
            <div class="outro-text" style="font: 80px 'Indie Flower', cursive; opacity:0.7; transform: skew(2deg);">FIN</div>
            <div class="signature" style="bottom:5mm; left:10mm; font-size:10px;">A Mano, con Amor Ronin</div>
        `;
        manga.appendChild(page);
    }

    function createPage(pageNum, sec, frame) {
        const page = document.createElement('div');
        page.className = 'page';
        const p = sec / 90;
        const fadeIntro = Math.min(1, p);
        const isIntro = sec < 90;
        const isMain = sec >= 90 && sec < 5310;
        const isOutro = sec >= 5310;
        const outT = isOutro ? (sec - 5310) / 90 : 0;
        const fadeOutro = isOutro ? 1 - outT : 1;

        page.innerHTML = `
            <div class="splash" style="opacity:${isIntro ? fadeIntro : 1}; clip-path: polygon(${5+Math.random()*5}% 0%, ${95+Math.random()*-5}% ${3+Math.random()*2}%, ${98+Math.random()*-3}% 100%, ${2+Math.random()*3}% ${97+Math.random()*-2}%);"></div>
            <div class="vhs-scan"></div>
        `;

        // Enhanced particles with hand-wobble
        for (let p = 0; p < 100; p++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = `${Math.random() * 100}%`;
            particle.style.top = `${Math.random() * 100}%`;
            particle.style.animationDelay = `${Math.random() * 2}s`;
            particle.style.animationDuration = `${1.5 + Math.random()}s`;
            particle.style.opacity = isOutro ? fadeOutro : 1;
            particle.style.transform = `rotate(${Math.random()*10}deg)`;
            page.appendChild(particle);
        }

        if (isIntro) {
            const intro = document.createElement('div');
            intro.className = 'intro-text';
            intro.style.opacity = fadeIntro;
            intro.style.fontSize = '28px';
            intro.style.transform = `translate(-50%,-50%) rotate(${Math.sin(sec)*2}deg)`;
            intro.innerHTML = `
                SLYVERSE v1.0<br>
                <span style="font:80px 'Indie Flower', cursive; color:rgba(255,20,147,${fadeIntro}); transform: skew(-3deg);">${TRANSLATIONS.title[LANG].split(': ')[1]}</span><br>
                <span style="font:45px 'Caveat'; color:rgba(0,170,255,${fadeIntro});">10% xAI</span>
            `;
            page.appendChild(intro);
        } else if (isMain) {
            // Add 2-4 hand-drawn panels for "best vignettes" (every page, but randomized shapes)
            const numPanels = 2 + Math.floor(Math.random() * 3); // 2-4 panels
            const panelHeights = [0, 30, 60, 100]; // Cumulative for stacking
            for (let pan = 0; pan < numPanels; pan++) {
                const panel = document.createElement('div');
                panel.className = 'panel';
                panel.style.top = `${panelHeights[pan]}%`;
                panel.style.height = `${panelHeights[pan+1] - panelHeights[pan]}%`;
                panel.style.width = '90%';
                panel.style.left = '5%';
                panel.style.clipPath = `polygon(${Math.random()*5}% 0%, ${100-Math.random()*5}% ${Math.random()*10}%, ${100-Math.random()*5}% 100%, ${Math.random()*5}% ${100-Math.random()*10}%)`; // Jagged per panel
                panel.innerHTML = `<div class="splash" style="opacity:0.2;"></div>`; // Sub-splash
                page.appendChild(panel);

                // Place dialog or text inside specific panel
                if (pan === 1) { // Middle panel for dialog
                    const dialog = LORE_DIALOGUES.find(d => sec >= d[0] && sec < d[0] + 600);
                    if (dialog) {
                        const d = document.createElement('div');
                        d.className = 'dialog';
                        d.style.left = `${20 + Math.sin(frame / 10) * 10}%`;
                        d.style.top = `${30 + Math.cos(frame / 15) * 10}%`;
                        const color = dialog[1] === 'xai' ? '#00aaff' : dialog[1] === 'ronin' ? '#ff69b4' : '#00ffff';
                        d.innerHTML = `
                            <div class="jap" style="color:${color}; font-family:'Caveat', cursive;">【${dialog[1].toUpperCase()}】 ${dialog[2][LANG]}</div>
                            <div class="cast" style="color:${color}; opacity:0.7; font-family:'Indie Flower', cursive;">(Frame ${frame.toLocaleString()})</div>
                        `;
                        panel.appendChild(d);
                    }

                    // Subtexto genérico si no hay diálogo
                    if (!dialog) {
                        const sub = document.createElement('div');
                        sub.className = 'sub-text';
                        sub.style.position = 'absolute';
                        sub.style.bottom = '10%';
                        sub.style.left = '50%';
                        sub.style.transform = 'translateX(-50%)';
                        sub.style.fontFamily = "'Caveat', cursive";
                        sub.style.fontSize = '20px';
                        sub.style.color = '#000';
                        sub.style.opacity = '0.8';
                        sub.style.transform = 'translateX(-50%) skew(1deg)';
                        sub.textContent = 'Ronin vs FIAT | 17 días sin dormir';
                        panel.appendChild(sub);
                    }
                }
            }

            const mainTitle = document.createElement('div');
            mainTitle.style.position = 'absolute';
            mainTitle.style.top = '5%';
            mainTitle.style.left = '50%';
            mainTitle.style.transform = 'translateX(-50%) rotate(-1deg)';
            mainTitle.style.font = '55px "Indie Flower", cursive';
            mainTitle.style.color = '#ffd700';
            mainTitle.style.textShadow = '2px 2px 4px rgba(0,0,0,0.3)';
            mainTitle.textContent = 'SLYVERSE v1.0';
            page.appendChild(mainTitle);
        } else if (isOutro) {
            const outro = document.createElement('div');
            outro.className = 'outro-text';
            outro.style.opacity = fadeOutro;
            outro.style.fontSize = '80px';
            outro.style.transform = `translate(-50%,-50%) skew(${Math.sin(outT * 10)}deg)`;
            outro.style.fontFamily = "'Indie Flower', cursive";
            outro.innerHTML = `
                FIN<br>
                <span style="font:38px 'Noto Sans JP'; color:rgba(0,170,255,${fadeOutro});">10% xAI | 次回 v2</span><br>
                <span style="font:32px Meiryo; color:rgba(255,20,147,${fadeOutro}); transform: rotate(2deg);">${TRANSLATIONS.endQuote[LANG]}</span><br>
                <span style="font:24px 'Noto Sans JP'; color:rgba(255,255,255,${fadeOutro});">#SLYVERSE ∞</span>
            `;
            page.appendChild(outro);
        }

        // Líneas aleatorias con estilo hand-drawn (20 por frame)
        for (let l = 0; l < 20; l++) {
            const line = document.createElement('div');
            line.className = 'lines';
            line.style.left = `${Math.random() * 100}%`;
            line.style.top = `${Math.random() * 100}%`;
            line.style.width = `${Math.random() * 100 + 10}px`;
            line.style.transform = `rotate(${Math.random() * 360}deg) skew(${Math.random() * 2 - 1}deg)`;
            line.style.opacity = isMain ? 0.5 : 0.2;
            line.style.background = `linear-gradient(to right, #00aaff, #00ffff)`;
            page.appendChild(line);
        }

        // Glitch ocasional (cada 20 frames, con wobble)
        if (frame % 20 === 0) {
            const glitchOverlay = document.createElement('div');
            glitchOverlay.style.position = 'absolute';
            glitchOverlay.style.top = '0';
            glitchOverlay.style.left = '0';
            glitchOverlay.style.width = '100%';
            glitchOverlay.style.height = '100%';
            glitchOverlay.style.background = 'rgba(255,20,147,0.1)';
            glitchOverlay.style.clipPath = `polygon(${Math.random()*10}% 0%, ${100-Math.random()*10}% 0%, 100% ${Math.random()*20}%, ${100-Math.random()*10}% 100%, ${Math.random()*10}% 100%, 0% ${100-Math.random()*20}%)`;
            glitchOverlay.style.transform = 'skew(1deg)';
            page.appendChild(glitchOverlay);
        }

        // Signature en páginas pares para toque personal
        if (pageNum % 2 === 0) {
            const sig = document.createElement('div');
            sig.className = 'signature';
            sig.style.fontSize = '8px';
            sig.innerHTML = '0rb1t4lsn4k3r | Mano alzada';
            page.appendChild(sig);
        }

        const num = document.createElement('div');
        num.className = 'page-num';
        num.style.fontFamily = "'Caveat', cursive";
        num.style.transform = 'rotate(1deg)';
        num.textContent = `${pageNum}/180 | Sec: ${Math.floor(sec)}`;
        page.appendChild(num);

        manga.appendChild(page);
    }

    // Auto-detectar idioma
    const browserLang = navigator.language.split('-')[0];
    if (['ja','es','en','fr','de','it','pt'].includes(browserLang)) {
        setLang(browserLang);
    }
</script>
</body>
</html>