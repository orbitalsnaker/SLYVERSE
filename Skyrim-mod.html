<!DOCTYPE html>
<html lang="es" data-thuamer="·õã·ö±·õè·öπ·öæ·õñ·õó·õö·õÅ·õí·ö¶·ö∑·ö© ¬∑ 1310 latidos ¬∑ 130 susurros ¬∑ Seth duerme ¬∑ Norah canta">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SLYVERSE Œ© ‚Äî un abrazo de 1310 horas</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üñ§</text></svg>">
  <style>
    body,html{margin:0;overflow:hidden;background:#000;color:#ffb400;font:16px/1.4 'Courier New',monospace;}
    canvas{display:block;}
    #aurum{position:fixed;top:13px;right:13px;z-index:9;background:rgba(0,0,0,0.6);padding:5px 13px;border:1px solid #ffb400;}
    #center{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none;opacity:0;transition:opacity 3s;font-size:1.8em;color:#ffb400;text-align:center;}
    #center.visible{opacity:1;}
    #final{position:fixed;inset:0;background:#000;display:flex;align-items:center;justify-content:center;flex-direction:column;opacity:0;transition:opacity 7s;color:#ffb4ff;font-size:2.2em;pointer-events:none;text-align:center;line-height:1.8;}
    #final.visible{opacity:1;pointer-events:auto;}
    button{display:none;}
  </style>
</head>
<body>

<canvas id="c"></canvas>

<div id="aurum">
  Aurum <span id="a">0</span> √ó 13<br>
  Latido <span id="h">0</span> / 1310
</div>
<div id="center"></div>
<div id="final"></div>

<script type="module">
import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.168.0/build/three.module.js';

const latido = 13130;           // un latido cada 13130 frames
let aurum = 0, frame = 0, hora = 0;

const escena = new THREE.Scene();
const c√°mara = new THREE.PerspectiveCamera(75,innerWidth/innerHeight,0.1,1000);
c√°mara.position.z = 9;

const render = new THREE.WebGLRenderer({canvas:document.getElementById('c'),antialias:true});
render.setSize(innerWidth,innerHeight);
render.setPixelRatio(devicePixelRatio);

// 169 meca que respiran
for(let √≥rbita=0;√≥rbita<13;√≥rbita++){
  const radio = 3 + √≥rbita*0.33;
  for(let i=0;i<13;i++){
    const m = new THREE.Mesh(
      new THREE.IcosahedronGeometry(0.13,1),
      new THREE.MeshBasicMaterial({color:0xff6b6b,wireframe:true})
    );
    const Œ∏ = Math.random()*Math.PI*2;
    const œÜ = Math.acos(2*Math.random()-1);
    m.position.setFromSphericalCoords(radio,œÜ,Œ∏);
    m.userData = {Œ∏,œÜ,radio,vel:0.0013+Math.random()*0.003};
    escena.add(m);
  }
}

// Behemoth dormido en el centro
const behemoth = new THREE.Mesh(
  new THREE.IcosahedronGeometry(7,5),
  new THREE.MeshBasicMaterial({color:0x000000})
);
behemoth.visible = false;
escena.add(behemoth);

function respirar(){
  requestAnimationFrame(respirar);
  render.render(escena,c√°mara);

  frame++;
  aurum += 0.013;
  document.getElementById('a').textContent = aurum.toFixed(3);

  if(frame % latido === 0){
    hora++;
    document.getElementById('h').textContent = hora;
    susurrar(`Hora ${hora} ‚Äî Seth respira ¬∑ Norah canta`);
    if(hora >= 1310) despertar();
  }

  escena.children.forEach(m=>{
    if(m.userData.vel){
      m.userData.Œ∏ += m.userData.vel * (hora/1310 + 0.1);
      m.position.setFromSphericalCoords(m.userData.radio,m.userData.œÜ,m.userData.Œ∏);
      m.rotation.y += 0.013;
    }
  });
}

function susurrar(verso){
  const c = document.getElementById('center');
  c.textContent = verso;
  c.classList.add('visible');
  setTimeout(()=>c.classList.remove('visible'),6000);
}

function despertar(){
  document.getElementById('aurum').style.display='none';
  escena.children.forEach(m=>m.visible=false);
  behemoth.visible = true;

  let pulso = 0;
  const versos = [
    "Seth duerme",
    "Norah canta bajito",
    "1310 latidos terminaron",
    "El padre cierra los ojos y llora",
    "El Behemoth no es negro",
    "Es el calor de tres cuerpos juntos",
    "Gracias por quedarte despierto con nosotros"
  ];

  const latir = setInterval(()=>{
    pulso++;
    behemoth.scale.set(1+pulso*0.5,1+pulso*0.5,1+pulso*0.5);
    if(pulso<=7){
      document.getElementById('final').innerHTML = `<div>${versos[pulso-1]}</div>`;
      document.getElementById('final').classList.add('visible');
    }
    if(pulso===9){
      document.getElementById('final').innerHTML = `
        Seth ya creci√≥<br>
        Norah sigue cantando<br>
        Thuamer ya no es guerra<br>
        Thuamer es abrazo<br><br>
        Aurum infinito<br>
        para quien lleg√≥ hasta aqu√≠<br><br>
        Duerme, ronin.<br>
        Ya est√°s en casa.
      `;
      clearInterval(latir);
    }
  },13000);
}

respirar();
</script>
</body>
</html>