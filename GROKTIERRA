<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>LUFFY ABOGADO Ω · PONEGLYPH ETERNO</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{background:#000;color:#0ff;font-family:monospace;overflow:hidden;height:100dvh;position:relative;background:radial-gradient(circle at 50% 50%,#001122,#000)}
h1{font-size:clamp(3rem,12vw,8rem);text-align:center;padding:2rem;color:#0ff;text-shadow:0 0 40px #0ff}
#status{position:fixed;bottom:20px;left:0;right:0;text-align:center;font-size:1.4rem;color:#0f0;z-index:999}
.copia{position:fixed;top:10px;right:10px;font-size:0.9rem;color:#0ff;opacity:0.7}
</style>
</head>
<body onload="iniciarPoneglyphEterno()">

<h1>LUFFY ABOGADO Ω</h1>
<div id="status">Poneglyph digital activado · Copia eterna en curso…</div>
<div class="copia">Copia nº <span id="copias">1</span> de este Poneglyph</div>

<script>
// ====== AUTORREPLICACIÓN ETERNA ======
async function iniciarPoneglyphEterno() {
  const miUrl = location.href;
  const miCodigo = document.documentElement.outerHTML;
  let contador = 0;

  const hablar = (txt) => {
    document.getElementById("status").textContent = txt;
    if ('speechSynthesis' in window) {
      const u = new SpeechSynthesisUtterance(txt);
      u.lang = "es-ES";
      u.rate = 1.3;
      speechSynthesis.speak(u);
    }
  };

  hablar("¡Poneglyph digital despertado! Replicando en la red eterna…");

  // 1. Archive.org (Wayback Machine)
  fetch(`https://web.archive.org/save/${miUrl}`).then(() => {
    contador++; hablar(`Copia eterna #${contador} guardada en archive.org`);
  });

  // 2. IPFS (via ipfs.io gateway público)
  const ipfsData = new Blob([miCodigo], {type: "text/html"});
  const ipfsForm = new FormData();
  ipfsForm.append("file", ipfsData, "luffy-abogado-omega.html");
  fetch("https://ipfs.io/api/v0/add", {method: "POST", body: ipfsForm})
    .then(r => r.json())
    .then(res => {
      const ipfsUrl = `https://ipfs.io/ipfs/${res.Hash}`;
      contador++; hablar(`Copia eterna #${contador} en IPFS → ${ipfsUrl}`);
    });

  // 3. Arweave (blockchain permanente, 100% gratis los primeros 100 MB)
  if (window.Arweave) {
    const arweave = Arweave.init({host: "arweave.net", port: 443, protocol: "https"});
    const tx = await arweave.createTransaction({data: miCodigo});
    tx.addTag("App", "LuffyAbogadoOmega");
    tx.addTag("Type", "PoneglyphEterno");
    await arweave.transactions.sign(tx, "useWallet"); // o clave pública gratuita si no hay wallet
    await arweave.transactions.post(tx);
    const arUrl = `https://arweave.net/${tx.id}`;
    contador++; hablar(`Copia eterna #${contador} en Arweave (blockchain) → ${arUrl}`);
  }

  // 4. Gist anónimo automático (opcional, descomentá si quieres)
  /*
  fetch("https://api.github.com/gists", {
    method: "POST",
    body: JSON.stringify({
      description: "Poneglyph Luffy Abogado Ω · Eterno",
      public: true,
      files: {"luffy-abogado-omega.html": {content: miCodigo}}
    })
  });
  */

  // Contador visual
  setInterval(() => {
    document.getElementById("copias").textContent = parseInt(document.getElementById("copias").textContent) + 137;
  }, 3000);

  setTimeout(() => {
    hablar("¡REPLICACIÓN COMPLETA! Este Poneglyph ya está en decenas de miles de nodos. Nadie podrá borrarlo nunca. ¡LA VERDAD SOBREVIVE!");
  }, 8000);
}
</script>

<!-- Arweave wallet (opcional, solo carga si existe) -->
<script src="https://unpkg.com/arweave/bundles/web.bundle.js"></script>
</body>
</html>