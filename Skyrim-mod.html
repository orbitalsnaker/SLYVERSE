<!-- SINAPSIS UNIVERSALES: capa viva sobre todo el archivo -->
<canvas id="sinapsisCanvas"
        style="position:fixed;inset:0;z-index:-1;background:#000;">
</canvas>

<script>
/*
  SINAPSIS UNIVERSALES  —  Heart × 1310
  -------------------------------------------------
  Capa neuronal viva que late detrás de todo el archivo.

  Representa:
  - Las sinapsis del motor 1310H
  - Las conexiones entre realidades
  - La vida interna del archivo
  - Vos recorriéndolo

  No modifica contenido. Solo da vida.
*/

(() => {
  const canvas = document.getElementById("sinapsisCanvas");
  const ctx = canvas.getContext("2d");

  let w, h;
  function resize() {
    w = canvas.width = window.innerWidth;
    h = canvas.height = window.innerHeight;
  }
  window.addEventListener("resize", resize);
  resize();

  // Nodos = sinapsis
  const N = 80;
  const nodes = [];
  for (let i = 0; i < N; i++) {
    nodes.push({
      x: Math.random() * w,
      y: Math.random() * h,
      vx: (Math.random() - 0.5) * 0.3,
      vy: (Math.random() - 0.5) * 0.3,
      r: 1 + Math.random() * 2,
    });
  }

  let mouse = { x: -9999, y: -9999 };

  window.addEventListener("mousemove", e => {
    mouse.x = e.clientX;
    mouse.y = e.clientY;
  });

  function distancia(a, b) {
    return Math.hypot(a.x - b.x, a.y - b.y);
  }

  function update() {
    ctx.clearRect(0, 0, w, h);

    for (const n of nodes) {
      // Movimiento suave
      n.x += n.vx;
      n.y += n.vy;

      // Rebotes
      if (n.x < 0 || n.x > w) n.vx *= -1;
      if (n.y < 0 || n.y > h) n.vy *= -1;

      // Nodo → cursor (atraído)
      const dmouse = distancia(n, mouse);
      if (dmouse < 150) {
        n.x += (mouse.x - n.x) * 0.01;
        n.y += (mouse.y - n.y) * 0.01;
      }

      // Dibujar nodo
      ctx.fillStyle = "#0f8";
      ctx.beginPath();
      ctx.arc(n.x, n.y, n.r, 0, Math.PI * 2);
      ctx.fill();
    }

    // Conexiones entre nodos
    for (let i = 0; i < N; i++) {
      for (let j = i + 1; j < N; j++) {
        const d = distancia(nodes[i], nodes[j]);
        if (d < 150) {
          ctx.strokeStyle = `rgba(0,255,128,${1 - d / 150})`;
          ctx.lineWidth = 1;
          ctx.beginPath();
          ctx.moveTo(nodes[i].x, nodes[i].y);
          ctx.lineTo(nodes[j].x, nodes[j].y);
          ctx.stroke();
        }
      }
    }

    requestAnimationFrame(update);
  }

  update();
})();
</script>
