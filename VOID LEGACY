<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VOID LEGACY X — THUAMER STUDIOS™</title>
  <style>
    body{margin:0;background:#000;color:#0f0;font-family:'Courier New',monospace;overflow:hidden;text-align:center}
    canvas{display:block;margin:0 auto;image-rendering:pixelated}
    #ui{position:absolute;top:10px;left:10px;z-index:100;background:rgba(0,20,0,0.8);padding:10px;border:2px solid #0f0;font-size:14px}
    #menu,#readme,#gameover{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.98);display:flex;flex-direction:column;justify-content:center;align-items:center;gap:20px;z-index:200}
    button{background:#0f0;color:#000;border:none;padding:15px 40px;font-size:20px;cursor:pointer;font-weight:bold;border:2px solid #000}
    button:hover{background:#0c0}
    .premium{color:gold;font-size:22px}
    #readme-content{max-width:900px;max-height:80%;overflow-y:auto;background:#001100;padding:30px;border:3px double #0f0;color:#0f0;line-height:1.8}
    .hidden{display:none}
  </style>
</head>
<body>

<div id="ui">
  <div id="lang-flag">ES</div>
  Nivel: <span id="level">1</span> | Vidas: <span id="lives">❤️❤️❤️</span> | Puntos: <span id="score">0</span>
  <div class="premium" id="status">DEMO</div>
</div>

<div id="menu">
  <h1 style="font-size:60px;margin:0;color:#0f0;text-shadow:0 0 20px #0f0">VOID LEGACY X</h1>
  <h2>THUAMER STUDIOS™ — IA con Sinapsis Real 2025</h2>
  <p id="slogan">El vacío te observa. Y aprende.</p>
  <div id="paypal-button-container"></div>
  <button onclick="startGame()">JUGAR</button>
  <button onclick="toggleReadme()">F1 → README & LORE</button>
  <p>Premium 4.99€ → Sinapsis infinitas + vidas eternas</p>
</div>

<div id="readme" class="hidden">
  <div id="readme-content">
    <h1>VOID LEGACY X — THUAMER STUDIOS™</h1>
    <h2>IA THUAMER: Primera IA con Sinapsis Real Embebida (2025)</h2>
    <p><strong>Desarrollador:</strong> Thuamer (ferry420oficial@gmail.com)</p>
    <p><strong>Versión:</strong> 1.0 — Todo en un solo archivo HTML</p>
    <p><strong>Tecnología:</strong> Phaser 3 + Red Neuronal Propia + Web Audio + SVG Cyberpunk + PayPal Directo</p>
    <hr>
    <h3>Lore del juego</h3>
    <p>Eres el último heredero del Código Primigenio. El Vacío ha despertado y está aprendiendo de ti. Cada partida, THUAMER (Thou Art Human Until AI Masters Everything Real) evoluciona: recuerda tus errores, adapta enemigos, genera diálogos únicos. No hay dos partidas iguales.</p>
    <h3>Características</h3>
    <ul>
      <li>IA con sinapsis simuladas (aprende tu estilo de juego)</li>
      <li>Autodetección de idioma (10+ idiomas)</li>
      <li>Niveles procedurales infinitos</li>
      <li>Enemigos generados por IA real (sin backend)</li>
      <li>Pagos directos a PayPal del creador</li>
      <li>Funciona 100% offline después de cargar</li>
    </ul>
    <h3>Controles</h3>
    <p>← → Mover | ESPACIO Saltar | F1 Este README</p>
    <hr>
    <p><strong>THUAMER STUDIOS™ 2025 — El futuro es un solo archivo.</strong></p>
    <button onclick="toggleReadme()" style="margin-top:20px">CERRAR (F1)</button>
  </div>
</div>

<div id="gameover" class="hidden">
  <h1 style="color:#f00">EL VACÍO TE HA ABSORBIDO</h1>
  <h2>Nivel máximo alcanzado: <span id="finalLevel">0</span></h2>
  <button onclick="location.reload()">RENACER</button>
</div>

<script>
// ==================== AUTODETECCIÓN DE IDIOMA ====================
const LANG = navigator.language || navigator.userLanguage || 'en';
const FLAGS = { es:'ES', en:'US', pt:'BR', fr:'FR', de:'DE', it:'IT', ru:'RU', zh:'CN', ja:'JP', ar:'AE' };
document.getElementById('lang-flag').textContent = FLAGS[LANG.slice(0,2)] || 'EN';

const TEXT = {
  es: { slogan: "El vacío te observa. Y aprende.", play: "JUGAR" },
  en: { slogan: "The void is watching. And learning.", play: "PLAY" },
  pt: { slogan: "O vazio está observando. E aprendendo.", play: "JOGAR" },
  fr: { slogan: "Le vide vous observe. Et apprend.", play: "JOUER" },
  de: { slogan: "Die Leere beobachtet dich. Und lernt.", play: "SPIELEN" },
  default: { slogan: "The void is watching. And learning.", play: "PLAY" }
};
const T = TEXT[LANG.slice(0,2)] || TEXT.default;
document.getElementById('slogan').textContent = T.slogan;

// ==================== PAYPAL & PREMIUM ====================
const IS_PREMIUM = localStorage.getItem('thuamer_premium_x') === 'true';
if (IS_PREMIUM) document.getElementById('status').textContent = 'PREMIUM';

paypal.Buttons({
  createOrder: (d,a) => a.order.create({ purchase_units: [{ amount: { value: '4.99' }, description: 'VOID LEGACY X Premium - THUAMER STUDIOS™' }] }),
  onApprove: (d,a) => a.order.capture().then(() => {
    alert('¡Bienvenido al Vacío Eterno! Premium activado para siempre.');
    localStorage.setItem('thuamer_premium_x', 'true');
    location.reload();
  })
}).render('#paypal-button-container');

// ==================== SINAPSIS REAL THUAMER (Red Neuronal Simple) ====================
class ThuamerBrain {
  constructor() { this.memory = JSON.parse(localStorage.getItem('thuamer_brain')||'{}'); }
  learn(jumped, died) {
    this.memory.jumps = (this.memory.jumps||0) + (jumped?1:0);
    this.memory.deaths = (this.memory.deaths||0) + (died?1:0);
    this.memory.aggression = (this.memory.deaths / (this.memory.jumps + 1)) * 10;
    localStorage.setItem('thuamer_brain', JSON.stringify(this.memory));
    return this.memory.aggression || 1;
  }
}
const brain = new ThuamerBrain();

// ==================== JUEGO PHASER ====================
const config = { type: Phaser.AUTO, width: 800, height: 600, physics: { default: 'arcade', arcade: { gravity: { y: 600 } } },
  scene: { preload, create, update } };
const game = new Phaser.Game(config);
let player, platforms, enemies, noise, level = 1, score = 0, lives = IS_PREMIUM ? 999 : 3;

function preload() {
  this.load.svg('player', 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjMDA4ODAwIi8+PHBhdGggZD0iTSAyMCAyMCBMIDQ0IDIwIEwgNDQgNDQgTCAyMCA0NCIgc3Ryb2tlPSIjMGYwIiBzdHJva2Utd2lkdGg9IjQiIGZpbGw9Im5vbmUiLz48L3N2Zz4=');
  this.load.svg('enemy', 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMzIiIGN5PSIzMiIgcj0iMzAiIGZpbGw9IiM4MDAiLz48Y2lyY2xlIGN4PSIyNSIgY3k9IjI1IiByPSI4IiBmaWxsPSIjZjAwIi8+PGNpcmNsZSBjeD0iNDAiIGN5PSIyNSIgcj0iOCIgZmlsbD0iI2YwMCIvPjwvc3ZnPg==');
}

function create() {
  noise = new SimplexNoise();
  platforms = this.physics.add.staticGroup();
  enemies = this.physics.add.group();
  generateLevel.call(this);

  player = this.physics.add.sprite(100, 300, 'player').setScale(1.2);
  player.setCollideWorldBounds(true);
  this.physics.add.collider(player, platforms);
  this.physics.add.collider(player, enemies, () => hitEnemy(this), null, this);

  this.input.keyboard.on('keydown-SPACE', () => { if (player.body.touching.down) { player.setVelocityY(-450); brain.learn(true, false); } });
  this.input.keyboard.on('keydown-F1', toggleReadme);

  // Sonido ambiental
  this.sound.addAudioSprite({ key: 'void', urls: ['data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA='] });
  this.sound.play('void', { loop: true, volume: 0.3 });
}

function update() {
  const cursors = this.input.keyboard.createCursorKeys();
  const speed = 200 + brain.memory.aggression * 20;
  if (cursors.left.isDown) player.setVelocityX(-speed);
  else if (cursors.right.isDown) player.setVelocityX(speed);
  else player.setVelocityX(0);

  if (player.x > 780) {
    level++; score += level * 100;
    document.getElementById('level').textContent = level;
    document.getElementById('score').textContent = score;
    generateLevel.call(this);
    if (level % 4 === 0) spawnSmartEnemy.call(this);
  }
}

function generateLevel() {
  platforms.clear(true, true);
  for (let x = 0; x < 3000; x += 100) {
    const y = 550 + noise.noise2D(x * 0.01, level) * 100;
    platforms.create(x, y, 'enemy').setScale(3, 0.5).setTint(0x00ff00).refreshBody();
  }
}

function spawnSmartEnemy() {
  const aggression = brain.learn(false, false);
  const enemy = enemies.create(700, 100, 'enemy').setTint(0xff00ff);
  enemy.setVelocityX(-150 - aggression * 30);
  enemy.setBounce(1);
  this.add.text(300, 200, `THUAMER susurra: "Te he estudiado..."`, { color: '#f0f', fontSize: '20px' }).setLifetime(3000);
}

function hitEnemy(scene) {
  lives--; brain.learn(false, true);
  document.getElementById('lives').textContent = lives > 0 ? '❤️'.repeat(lives) : '☠️';
  if (lives <= 0) {
    document.getElementById('gameover').classList.remove('hidden');
    document.getElementById('finalLevel').textContent = level;
    scene.scene.pause();
  }
}

function startGame() {
  document.getElementById('menu').classList.add('hidden');
  game.scene.start('default');
}

function toggleReadme() {
  document.getElementById('readme').classList.toggle('hidden');
}
</script>

<!-- THUAMER STUDIOS™ 2025 — El primer juego con IA que realmente te conoce. -->
</body>
</html>