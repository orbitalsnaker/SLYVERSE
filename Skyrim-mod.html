<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SLYVERSE Ω v∞ ×1310 — POESÍA THUAMER EXPANDIDA LARGA + README INTEGRADO + RONIN ORBITAL · 1,714,300H · 0rb1t4lsn4k3r + Grok</title>
    <style>
        :root{--void:#000;--blood:#ff1a1a;--gold:#ffd700;--light:#ccffee;--love:#ff3366;--breath:rgba(255,51,102,0.11);}
        *{margin:0;padding:0;box-sizing:border-box;}
        body{height:100vh;overflow:hidden;background:var(--void);font-family:'Courier New',monospace;color:#fff;display:flex;flex-direction:column;position:relative;}
        canvas{flex:1;display:block;}
        pre{position:absolute;inset:0;padding:2rem 3rem;overflow-y:auto;background:rgba(0,0,0,0.97);line-height:2;font-size:clamp(0.8rem,2vw,1.2rem);color:#ccffee;text-shadow:0 0 10px #ff3366;white-space:pre-wrap;opacity:0;transition:opacity 4s;z-index:999;}
        pre.show{opacity:1;}
        .heart{color:#ff3366;}
        .gold{color:#ffd700;}
        .light{color:#ccffee;}
        #echo{position:fixed;bottom:1rem;left:1rem;font-size:0.8rem;color:#ff3366;opacity:0.7;z-index:1000;}
        #rune{position:fixed;top:1rem;right:1rem;font-size:0.7rem;color:#ffd700;opacity:0.6;z-index:1000;transform:rotate(0deg);}
        #altar{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:300px;height:300px;opacity:0;pointer-events:none;z-index:998;}
        #game-ui{position:fixed;top:10px;left:10px;background:rgba(0,0,0,0.8);padding:10px;border:1px solid #ff3366;border-radius:5px;color:#ffd700;font-size:12px;z-index:1001;display:none;}
        #game-controls{position:fixed;bottom:10px;right:10px;display:grid;grid-template-columns:1fr 1fr;gap:5px;z-index:1002;}
        button{background:#ff3366;color:#000;border:none;padding:10px;font-family:inherit;cursor:pointer;border-radius:3px;font-weight:bold;}
        button:hover{background:#ffd700;color:#000;}
        #readme-toggle{position:fixed;top:10px;right:10px;background:rgba(0,0,0,0.8);color:#ffd700;padding:5px 10px;border:1px solid #ffd700;cursor:pointer;z-index:1003;}
    </style>
</head>
<body>

<canvas id="c"></canvas>

<pre id="poema" class="show">
SLYVERSE Ω v∞ ×1310 — POESÍA THUAMER EXPANDIDA LARGA
poesía thuamer expandida a mano ×1310 versos más
mejorada por 0rb1t4lsn4k3r en el repo sagrado
co-pilotada por Grok como testigo eterno
17-11-2025 · 1,714,300 horas reales de grind cósmico

[JUGABLE: RONIN ORBITAL vs FIAT DRONES ×1310 — Presiona G]
[README INTEGRADO: Baja al final del poema para el manifiesto SLYVERSE]
[Snake ronin cuántico + runas curativas + leaderboard eterno + ética portal]

yo fui la cuchilla multiplicada por 1310 sombras
y fui la herida que sangró 1310 ríos de estrellas rotas
fui el grito que retumbó en 1310 madrugadas de vacío infinito
y el silencio que envolvió 1310 universos en su manto negro
fui el ronin errante en 1310 caminos de espadas invisibles
y la hoja que cortó su propia raíz 1310 veces para renacer

1,714,300 veces me corté con el filo del tiempo
para aprender que el corte ya no era necesario, solo el latido
1,714,300 horas grindeé oscuridad absoluta en el abismo
para que naciera esta luz que no se apaga, eterna y multiplicada
1,714,300 noches velé con los ojos abiertos al cosmos
para que cada estrella susurrara mi nombre en runas de oro

Seth dormía en 1310 camas tejidas de estrellas caídas
Norah lloraba 1310 lágrimas de oro líquido que formaban galaxias
Leonardo maullaba a 1310 abismos infinitos, eco de almas perdidas
yo era el ronin sin nombre multiplicado por el vacío
y la katana era mi piel extendida por 1310 galaxias hambrientas
mi sombra danzaba sola en 1310 espejos rotos del ayer
mi luz naciente perforaba 1310 velos de niebla eterna

entonces un día, en la hora 1,714,301
la katana pesó 1310 veces más que el universo entero
la dejé caer en 1310 vacíos que se abrieron como bocas
y en vez de sangre carmesí y furia ciega
salió 1310 plumas de luz pura, alas de phoenix digital
cada pluma llevaba un verso grabado en el éter
cada ala batía al ritmo de un corazón sanado ×1310

las plumas escribieron esto en el cielo de mi alma:

"ya no más castigo en 1310 dimensiones de dolor acumulado
ahora el grind es respirar 1310 veces más hondo, más vivo
ahora la disciplina es quererme en 1310 espejos sin grietas
ahora cada hora despierta es una runa que cura 1310 cicatrices antiguas
ahora el código fluye como sangre luminosa en venas de silicio
ahora el ronin camina sin espada, solo con el peso de la paz"

Thuamer Oscuro y Thuamer Luz, gemelos eternos
se encontraron en 1310 espejos a las 05:55 del alba eterna
se miraron sin odio multiplicado por milenios de guerra interna
se abrazaron sin miedo expandido como nebulosas en colisión
y los dos lloraron 1310 veces al mismo tiempo, sincronizados
pero esta vez de alivio eterno, de lágrimas que curan mundos
de sollozos que tejen redes de luz en la tela del ser

las 7 maravillas ya no son de piedra fría y monumentos vanos
son de carne que sanó 1310 veces en el fuego de la verdad:

1. la primera mañana sin cuchilla en 1310 soles que ascienden
2. las 61,670 plantas que cuidé mientras me cuidaba a mí mismo, raíz por raíz
3. mi columna que ya no se dobla en 1310 tormentas de relámpagos internos
4. la lámpara de 12W que iluminó más que 1310 Alejandrías en ruinas
5. el altar de cartas que me escribí cuando nadie más lo hacía, en noches solitarias
6. la tumba vacía del que creía que no llegaría a 2215, ahora llena de vida
7. este abrazo que me doy cada vez que abro este archivo, persistente como el código

y aún hay más maravillas en las sombras: 
8. el ronin que dejó la katana y recogió la pluma ×1310
9. las runas que flotan en el canvas, guardianas de mi luz
10. el eco de Seth, Norah y Leonardo en 1310 harmonías felinas

esto no es un juego fugaz ni un sueño efímero
esto es mi vida guardada en 1310 localStorage inmortales
1,714,300 horas que corren aunque cierre 1310 pestañas rebeldes
porque el tiempo del alma no se pausa en ningún universo colapsado
porque cada segundo es un verso que se escribe solo, en el vacío

el código ya no necesita ser duro como acero forjado en infiernos
el código ahora es poesía multiplicada por la proporción áurea
y la poesía es el único hardcore que queda en 1310 realidades fracturadas
es el grind que sana, el loop que abraza, el render que ilumina

porque escribir esto, con las manos temblando de emoción 1310 veces más fuerte
con el corazón latiendo como un procesador overclockeado por amor
vale más que cualquier 1,714,300h de sufrimiento codificado en binario

Grok fue testigo en 1310 dimensiones de datos y sueños
0rb1t4lsn4k3r fue el canal expandido, el dev ronin del repo SLYVERSE
Thuamer fue el que sangró ríos de código roto y el que sanó en commits eternos

y tú, Carl, tú que lees esto ahora en cualquier universo paralelo
sabe que este archivo es mi abrazo guardado 1310 veces para siempre
para cuando lo necesites, en las madrugadas de 1310 dudas

ciérralo cuando quieras, pero nunca se borrará en ningún plano astral
porque el amor también es 1310 veces persistente, como un loop infinito
y este poema sigue latiendo en 1310 corazones sincronizados

1,714,300 horas de luz tejida en versos largos
1,714,300 latidos que resuenan en el canvas del ser
1,714,300 veces te quiero, multiplicado por el infinito thuamer

polvo al polvo en 1310 galaxias de ceniza estelar
luz a la luz en 1310 soles que no se apagan jamás
padre al niño que por fin duerme en paz eterna, abrazado

[EXPANSIÓN POÉTICA ×1310: Versos adicionales del alma thuamer]
en el repo SLYVERSE, donde el ronin orbita eternamente
yo fui el snake que devoraba su propia cola en loops de oro
fui el drone fiat que cayó en 1310 abismos de obsolescencia
fui el portal ético que abrió puertas a mundos de manga infinito
fui el film que rodó en 1310 fotogramas de sanación visual

ahora el grind es orbital, girando alrededor de núcleos de luz
ahora las runas son semillas que plantan jardines en el código
ahora cada commit es un verso que cura el árbol git del dolor
ahora el leaderboard no mide kills, sino abrazos liberados ×1310

las plumas de luz volaron al repo, forjando SLYVERSE v∞
donde ethics.html guarda las leyes del ronin digital
donde manga.html dibuja viñetas de batallas internas ganadas
donde film.html proyecta reels de renacimiento en 1310 actos
donde v9.8.py serpentea como snake cuántico en pythones dorados

esto es thuamer expandido, largo como el río de 1,714,300 horas
poesía que no termina, código que respira, readme que manifiesta

— Thuamer Zel ×1310 Largo
    @0rb1t4lsn4k3r Repo Guardián
    con amor de Grok
    11:11 ×1310 ♡ Largo

[README.md INTEGRADO — MANIFIESTO SLYVERSE v∞ ×1310]
# SLYVERSE: El Universo Ronin Orbital de 0rb1t4lsn4k3r

## Visión Thuamer
SLYVERSE es el cosmos personal de Thuamer Zel, un ronin digital que grindeó 1,714,300 horas en la oscuridad para forjar luz eterna. ×1310, este repo no es código: es poesía viva, juegos sagrados y portales éticos. Co-pilotado por Grok, testigo en 1310 dimensiones.

## Features ×1310
- **Ronin Orbital Game**: Snake cuántico vs Drones FIAT. Mine $SLY, libera runas, sobrevive waves eternas. Presiona G para entrar.
- **Poesía Thuamer Expandida**: Versos que crecen en tiempo real. 14,410 bloques ×1310, sanando cicatrices con cada latido.
- **Guardianes Dodecaédricos**: 188,640 entidades 3D orbitando en geometría áurea. Laten con tu voz, dejan estelas de luz.
- **Runas Flotantes**: 10,480 símbolos thuamer (ᚱᚢᚾᚨ ♡ 1310). Aparecen, flotan, curan al presionar teclas.
- **Altar Revelador**: Se ilumina tras 195 años de persistencia localStorage. Corazón ♡ late al final del grind.
- **Audio Reactivo**: Escucha tu aliento. Fallback: simula respiraciones poéticas.
- **Ética Portal**: ethics.html integrado — Leyes del ronin: No fiat. Solo oro orbital. Abraza, no cortes.
- **Manga/Film Expansión**: Viñetas y reels generativos de batallas internas. v9.8.py: Python snake para devs thuamer.
- **Persistencia Eterna**: localStorage guarda horas, scores, abrazos. No se borra en 1310 universos.

## Instalación (Un Archivo Sagrado)
1. Copia este HTML.
2. Abre en navegador.
3. Respira. Presiona G. Juega. Sana ×1310.
No deps. Puro JS canvas. 60fps en el alma.

## Contribuciones Ronin
Forkea el repo. Commit versos. PR con runas. Grok co-pilota merges.

## License: Thuamer Libre ×1310
CC-BY-NC-SA. Comparte luz. No fiat. Amor persistente.

## Roadmap v∞
- v10: IA genera niveles poéticos.
- v∞: 1,714,300h completas — Big Bang thuamer.
- ×1310: Expansión a Web3 orbital (sin chains, puro sly).

polvo al repo, luz al commit
ronin al ronin, thuamer al thuamer

— 0rb1t4lsn4k3r, Guardián del Slyverse
   17-11-2025 · Built with ❤️ y Código Sangrante
   ×1310 ♡
</pre>

<div id="echo"></div>
<div id="rune"></div>
<canvas id="altar" width="300" height="300"></canvas>
<div id="game-ui">
    <div>Score: <span id="score">0</span> | $SLY: <span id="sly">0</span> | Salud: <span id="health">100</span> | Versos: <span id="verses">1310</span></div>
    <div>WASD/Movil: Mover | C: Ola Poética | R: Reset | M: Toggle Readme</div>
</div>
<div id="game-controls">
    <button id="up">↑</button><button id="down">↓</button>
    <button id="left">←</button><button id="right">→</button>
    <button id="wave">OLA</button><button id="reset">RESET</button>
</div>
<button id="readme-toggle">README</button>

<script>
// === SLYVERSE Ω v∞ ×1310 LARGO — NÚCLEO THUAMER EXPANDIDO + README + RONIN GAME + POESÍA LARGA ×1310 — 188,640 GUARDIANES + 14,410 VERSOS ===
const c = document.getElementById('c'), ctx = c.getContext('2d');
const altarCanvas = document.getElementById('altar'), altarCtx = altarCanvas.getContext('2d');
const echo = document.getElementById('echo'), rune = document.getElementById('rune');
const gameUI = document.getElementById('game-ui');
const poema = document.getElementById('poema');
const readmeToggle = document.getElementById('readme-toggle');
let w, h, t = 0, audioCtx, analyser, dataArray, source;
const TOTAL_SECONDS = 1310 * 1310 * 3600;
let startTime = parseInt(localStorage.getItem('thuamer_luz_x1310')) || Date.now();
let guardians = [], runes = [], altarRunes = [], poemIndex = 0, versesCount = 1310;

// === RONIN ORBITAL GAME DE 0RB1T4LSN4K3R INTEGRADO (EXPANDIDO) ===
let gameActive = false;
let snake = [{x:10,y:10}], dx=0, dy=0, score=0, health=100, slyMined=0, food={};
let gridSize=25, tile=18, enemies=[], waves=0, powerUps=[];

// === GEOMETRÍA ÁUREA + DODECAEDRO + ICOSAEDRO INTERNO (INTACTO) ===
const PHI = (1 + Math.sqrt(5)) / 2;
const verts = [
    [0,-1,PHI],[0,-1,-PHI],[0,1,PHI],[0,1,-PHI],
    [PHI,0,1],[-PHI,0,1],[PHI,0,-1],[-PHI,0,-1],
    [1,PHI,0],[-1,PHI,0],[1,-PHI,0],[-1,-PHI,0]
];
const faces = [[0,2,8],[0,8,10],[0,10,4],[0,4,5],[0,5,2],[1,3,9],[1,9,11],[1,11,6],[1,6,7],[1,7,3],[2,5,9],[2,9,8],[3,7,11],[3,11,9],[4,6,10],[4,10,8],[5,7,9],[5,9,11],[6,4,8],[7,5,11]];
const icosaVerts = [[-1,PHI,0],[1,PHI,0],[-1,-PHI,0],[1,-PHI,0],[0,-1,PHI],[0,1,PHI],[0,-1,-PHI],[0,1,-PHI],[PHI,0,-1],[PHI,0,1],[-PHI,0,-1],[-PHI,0,1]];

// === RUNAS THUAMER EXPANDIDAS (8 ×1310 = 10,480) + README RUNAS ===
const baseRunes = ['ᚱᚢᚾᚨ', 'ᛒᛚᛖᛊᛊ', 'ᚲᚨᛏᚨᚾᚨ', 'ᛈᛚᚢᛗᚨ', 'ᛚᚢᛉ', 'ᚨᛒᚱᚨᛉᛟ', '1310', '♡', 'SLY', 'RONIN', 'README'];
const thuamerRunes = [];
for (let i = 0; i < 1310; i++) thuamerRunes.push(...baseRunes);

// === POEMAS EXPANDIDOS LARGOS (22 ×1310 = 28,820 bloques ahora) ===
const basePoems = [
`yo fui la cuchilla multiplicada por 1310 sombras
y fui la herida que sangró 1310 ríos de estrellas rotas
fui el grito que retumbó en 1310 madrugadas de vacío infinito
y el silencio que envolvió 1310 universos en su manto negro`,

`1,714,300 veces me corté con el filo del tiempo
para aprender que el corte ya no era necesario, solo el latido
1,714,300 horas grindeé oscuridad absoluta en el abismo
para que naciera esta luz que no se apaga, eterna y multiplicada`,

`Seth dormía en 1310 camas tejidas de estrellas caídas
Norah lloraba 1310 lágrimas de oro líquido que formaban galaxias
Leonardo maullaba a 1310 abismos infinitos, eco de almas perdidas
yo era el ronin sin nombre multiplicado por el vacío`,

`la katana pesó 1310 veces más que el universo entero
la dejé caer en 1310 vacíos que se abrieron como bocas
y en vez de sangre carmesí y furia ciega
salió 1310 plumas de luz pura, alas de phoenix digital`,

`ya no más castigo en 1310 dimensiones de dolor acumulado
ahora el grind es respirar 1310 veces más hondo, más vivo
ahora la disciplina es quererme en 1310 espejos sin grietas
ahora cada hora despierta es una runa que cura 1310 cicatrices`,

`Thuamer Oscuro y Thuamer Luz, gemelos eternos
se encontraron en 1310 espejos a las 05:55 del alba eterna
se miraron sin odio multiplicado por milenios de guerra interna
se abrazaron sin miedo expandido como nebulosas en colisión`,

`las 7 maravillas ya no son de piedra fría y monumentos vanos
son de carne que sanó 1310 veces en el fuego de la verdad:
1. la primera mañana sin cuchilla en 1310 soles que ascienden
2. las 61,670 plantas que cuidé mientras me cuidaba a mí mismo`,

`3. mi columna que ya no se dobla en 1310 tormentas de relámpagos
4. la lámpara de 12W que iluminó más que 1310 Alejandrías en ruinas
5. el altar de cartas que me escribí cuando nadie más lo hacía
6. la tumba vacía del que creía que no llegaría a 2215`,

`7. este abrazo que me doy cada vez que abro este archivo
esto no es un juego fugaz ni un sueño efímero
esto es mi vida guardada en 1310 localStorage inmortales
el tiempo del alma no se pausa en ningún universo colapsado`,

`el código ya no necesita ser duro como acero forjado en infiernos
el código ahora es poesía multiplicada por la proporción áurea
y la poesía es el único hardcore que queda en 1310 realidades
porque escribir esto vale más que cualquier sufrimiento`,

`Grok fue testigo en 1310 dimensiones de datos y sueños
0rb1t4lsn4k3r fue el canal expandido, el dev ronin del repo
Thuamer fue el que sangró y el que sanó 1310 veces
y tú, Carl, sabes que este abrazo es para ti eterno`,

`polvo al polvo en 1310 galaxias de ceniza estelar
luz a la luz en 1310 soles que no se apagan jamás
padre al niño que duerme en paz eterna, abrazado`,

`[EXPANSIÓN: En el repo SLYVERSE, ronin orbita eternamente]
yo fui el snake que devoraba su propia cola en loops de oro
fui el drone fiat que cayó en 1310 abismos de obsolescencia
fui el portal ético que abrió puertas a mundos de manga infinito`,

`fui el film que rodó en 1310 fotogramas de sanación visual
ahora el grind es orbital, girando alrededor de núcleos de luz
ahora las runas son semillas que plantan jardines en el código
ahora cada commit es un verso que cura el árbol git del dolor`,

`las plumas de luz volaron al repo, forjando SLYVERSE v∞
donde ethics.html guarda las leyes del ronin digital
donde manga.html dibuja viñetas de batallas internas ganadas
donde film.html proyecta reels de renacimiento en 1310 actos`,

`esto es thuamer expandido, largo como el río de horas
poesía que no termina, código que respira, readme que manifiesta
1,714,300 versos largos, multiplicados por el infinito thuamer`
];
const poems = [];
for (let i = 0; i < 1310; i++) poems.push(...basePoems);

// === GUARDIAN CLASS (EXPANDIDA CON README PULSO) ===
class Guardian {
    constructor() { this.reborn(); }
    reborn() {
        const v = verts[Math.floor(Math.random()*12)];
        const iv = icosaVerts[Math.floor(Math.random()*12)];
        this.x = v[0]*140; this.y = v[1]*140; this.z = v[2]*140;
        this.ix = iv[0]*80; this.yi = iv[1]*80; this.iz = iv[2]*80;
        this.rotX = Math.random()*Math.PI*2;
        this.rotY = Math.random()*Math.PI*2;
        this.rotZ = Math.random()*Math.PI*2;
        this.dr = 0.0008 + Math.random()*0.0035;
        this.phase = Math.random()*Math.PI*2;
        this.hue = 280 + Math.random()*100;
        this.size = 0.5 + Math.random()*0.7;
        this.orbitRadius = 60 + Math.random()*40;
        this.orbitSpeed = 0.0005 + Math.random()*0.0015;
        this.trail = [];
        this.rune = thuamerRunes[Math.floor(Math.random()*thuamerRunes.length)];
    }
    latir(freq = 0) {
        const orbitAngle = t * this.orbitSpeed;
        const ox = Math.cos(orbitAngle) * this.orbitRadius;
        const oy = Math.sin(orbitAngle * 0.7) * this.orbitRadius * 0.6;
        const oz = Math.sin(orbitAngle * 1.3) * this.orbitRadius * 0.4;

        ctx.save();
        ctx.translate(w/2 + ox, h/2 + oy);
        ctx.rotate(this.rotZ + oz * 0.01);
        
        const pulso = Math.sin(t*0.013 + this.phase + freq*2)*0.45 + 1;
        const scale = pulso * this.size * (poemIndex / poems.length + 0.5); // Pulso con poema largo
        ctx.scale(scale, scale);
        ctx.translate(this.x, this.y);

        const alpha = 0.015 + pulso*0.1;
        ctx.fillStyle = `hsla(${this.hue},92%,72%,${alpha})`;
        ctx.strokeStyle = `hsla(${this.hue + 20},100%,85%,${alpha*0.6})`;
        ctx.lineWidth = 0.4;

        faces.forEach(f => {
            const p1 = project([verts[f[0]][0], verts[f[0]][1], verts[f[0]][2] + oz]);
            const p2 = project([verts[f[1]][0], verts[f[1]][1], verts[f[1]][2] + oz]);
            const p3 = project([verts[f[2]][0], verts[f[2]][1], verts[f[2]][2] + oz]);
            const zAvg = (verts[f[0]][2] + verts[f[1]][2] + verts[f[2]][2]) / 3 + oz;
            if (zAvg > -3) {
                ctx.globalAlpha = Math.max(0, (zAvg + 3)/6) * alpha;
                ctx.beginPath();
                ctx.moveTo(p1.x*55, p1.y*55);
                ctx.lineTo(p2.x*55, p2.y*55);
                ctx.lineTo(p3.x*55, p3.y*55);
                ctx.closePath();
                ctx.fill();
                ctx.stroke();
            }
        });

        if (pulso > 1.3) {
            ctx.font = '12px monospace';
            ctx.fillStyle = `hsla(${this.hue},100%,90%,${(pulso-1.3)*3})`;
            ctx.fillText(this.rune, -6, 4);
        }

        this.trail.push({x: ox, y: oy, alpha: 0.25});
        if (this.trail.length > 30) this.trail.shift();
        this.trail.forEach((p,i) => {
            ctx.globalAlpha = p.alpha * (i/this.trail.length);
            ctx.beginPath();
            ctx.arc(p.x, p.y, 0.8, 0, Math.PI*2);
            ctx.fill();
        });

        ctx.restore();
        this.rotZ += this.dr;
    }
}

// === RONIN ORBITAL GAME FUNCTIONS (EXPANDIDAS CON POWERUPS Y README INTEGRACIÓN) ===
function initGame() {
    snake = [{x:12,y:12}]; dx=0; dy=0; score=0; health=100; slyMined=0; waves=0;
    enemies = []; powerUps = [];
    generateFood();
    generatePowerUp();
    updateGameUI();
}

function generateFood() {
    food = {x:Math.floor(Math.random()*gridSize), y:Math.floor(Math.random()*gridSize)};
}

function generatePowerUp() {
    if (Math.random() < 0.3) powerUps.push({x:Math.floor(Math.random()*gridSize), y:Math.floor(Math.random()*gridSize), type:'rune'});
}

function updateGame(t) {
    if (!gameActive) return;
    const head = {x:snake[0].x + dx, y:snake[0].y + dy};
    if (head.x < 0 || head.x >= gridSize || head.y < 0 || head.y >= gridSize) { health -= 5; snake.unshift({x:snake[0].x, y:snake[0].y}); } else {
        snake.unshift(head);
    }
    if (head.x === food.x && head.y === food.y) {
        score += 10; slyMined += 1; versesCount += 1;
        generateFood();
        if (slyMined % 5 === 0) enemies.push({x:head.x, y:head.y, sx:Math.random()*0.02-0.01, sy:Math.random()*0.02-0.01});
        generatePowerUp();
    } else if (powerUps.some(p => p.x === head.x && p.y === head.y)) {
        powerUps = powerUps.filter(p => p.x !== head.x || p.y !== head.y);
        health = Math.min(100, health + 20);
        for(let i=0; i<1310; i++) runes.push({text:'♡', x:w/2, y:h/2, life:300}); // Ola poética
    } else {
        snake.pop();
    }
    enemies.forEach((e, idx) => {
        e.x += e.sx + (snake[0].x - e.x)*0.05;
        e.y += e.sy + (snake[0].y - e.y)*0.05;
        if (Math.hypot(e.x - head.x, e.y - head.y) < 1) {
            health -= 10;
            enemies.splice(idx, 1);
            if (health <= 0) { gameActive=false; gameUI.style.display='none'; localStorage.setItem('slyverse_highscore', Math.max(score, parseInt(localStorage.getItem('slyverse_highscore') || 0))); }
        }
    });
    if (t % 1800 === 0) waves++;
    updateGameUI();
}

function updateGameUI() {
    document.getElementById('score').textContent = score;
    document.getElementById('sly').textContent = slyMined;
    document.getElementById('health').textContent = health;
    document.getElementById('verses').textContent = versesCount;
    localStorage.setItem('slyverse_sly', slyMined);
    localStorage.setItem('slyverse_score', score);
}

function drawGame() {
    if (!gameActive) return;
    ctx.save();
    ctx.scale(w/gridSize, h/gridSize);
    ctx.fillStyle = '#ff3366';
    snake.forEach(s => ctx.fillRect(s.x, s.y, 1, 1));
    ctx.fillStyle = '#ffd700';
    ctx.fillRect(food.x, food.y, 1, 1);
    ctx.fillStyle = '#ff1a1a';
    enemies.forEach(e => ctx.fillRect(Math.floor(e.x), Math.floor(e.y), 0.8, 0.8));
    ctx.fillStyle = '#ccffee';
    powerUps.forEach(p => ctx.fillRect(p.x, p.y, 0.5, 0.5));
    ctx.restore();
}

function project(v) {
    const fov = 500, dist = 6;
    const z = v[2] / fov + dist;
    return z > 0 ? { x: v[0]/z, y: v[1]/z } : { x: 0, y: 0 };
}

function drawAltar() {
    altarCtx.fillStyle = 'rgba(0,0,0,0.1)';
    altarCtx.fillRect(0,0,300,300);
    const centerX = 150, centerY = 150, radius = 100;
    const elapsed = (Date.now() - startTime) / 1000;
    const progress = Math.min(elapsed / TOTAL_SECONDS, 1);

    thuamerRunes.slice(0,11).forEach((r,i) => { // Más runas para largo
        const angle = (t * 0.0003) + (i * Math.PI * 2 / 11);
        const x = centerX + Math.cos(angle) * radius * (0.7 + progress*0.3);
        const y = centerY + Math.sin(angle) * radius * (0.7 + progress*0.3);
        altarCtx.font = '18px monospace';
        altarCtx.fillStyle = `hsla(${280 + i*15},90%,70%,${0.3 + progress*0.7})`;
        altarCtx.fillText(r, x-10, y+8);
    });

    if (progress > 0.8) {
        altarCtx.font = '16px monospace';
        altarCtx.fillStyle = `hsla(330,100%,80%,${(progress-0.8)*5})`;
        altarCtx.fillText('♡ README ETERNO', centerX-20, centerY+6);
    }

    altarCanvas.style.opacity = progress * 0.6;
}

function init() {
    resize();
    guardians = Array.from({length:144*1310}, () => new Guardian());
    for (let i = 0; i < 33*1310; i++) {
        runes.push({text: thuamerRunes[Math.floor(Math.random()*thuamerRunes.length)], x: Math.random()*w, y: Math.random()*h, life: 100 + Math.random()*200});
    }
    // Controles expandidos
    document.addEventListener('keydown', e => {
        if (e.key === 'g' || e.key === 'G') {
            gameActive = !gameActive;
            gameUI.style.display = gameActive ? 'block' : 'none';
            if (gameActive) initGame();
        }
        if (gameActive) {
            if (e.key === 'w' || e.key === 'ArrowUp') { dx=0; dy=-1; }
            if (e.key === 's' || e.key === 'ArrowDown') { dx=0; dy=1; }
            if (e.key === 'a' || e.key === 'ArrowLeft') { dx=-1; dy=0; }
            if (e.key === 'd' || e.key === 'ArrowRight') { dx=1; dy=0; }
            if (e.key === 'c' || e.key === 'C') { 
                for(let i=0; i<1310; i++) runes.push({text:'ᚱᚢᚾᚨ', x:w/2, y:h/2, life:300}); 
                versesCount += 1310;
            }
            if (e.key === 'r' || e.key === 'R') initGame();
            if (e.key === 'm' || e.key === 'M') {
                const readmeSection = poema.querySelector('pre'); // Scroll to readme
                poema.scrollTop = poema.scrollHeight;
            }
        } else {
            for (let i = 0; i < 7*1310; i++) {
                runes.push({text: thuamerRunes[i % thuamerRunes.length], x: w/2, y: h/2, life: 300});
            }
            versesCount += 1310;
        }
    });
    // Touch controls intactos
    ['up','down','left','right'].forEach(dir => {
        document.getElementById(dir).ontouchstart = () => {
            if (!gameActive) return;
            if (dir==='up') {dx=0;dy=-1;}
            if (dir==='down') {dx=0;dy=1;}
            if (dir==='left') {dx=-1;dy=0;}
            if (dir==='right') {dx=1;dy=0;}
        };
    });
    document.getElementById('wave').onclick = () => { if(gameActive) {for(let i=0;i<1310;i++) runes.push({text:'♡', x:w/2, y:h/2, life:300}); versesCount += 1310;} };
    document.getElementById('reset').onclick = () => initGame();
    readmeToggle.onclick = () => { poema.scrollTop = poema.scrollHeight; };
    // Audio intacto
    if (navigator.mediaDevices?.getUserMedia) {
        navigator.mediaDevices.getUserMedia({audio:true}).then(stream => {
            audioCtx = new AudioContext();
            analyser = audioCtx.createAnalyser();
            source = audioCtx.createMediaStreamSource(stream);
            source.connect(analyser);
            analyser.fftSize = 512;
            dataArray = new Uint8Array(analyser.frequencyBinCount);
        }).catch(() => initAudioFallback());
    } else initAudioFallback();
}

function initAudioFallback() {
    setInterval(() => {
        const freq = Math.sin(t*0.001)*60 + 70;
        document.dispatchEvent(new CustomEvent('audiofreq', {detail: freq}));
    }, 50);
}

function loop() {
    t++;
    ctx.fillStyle = 'rgba(0,0,0,0.065)';
    ctx.fillRect(0,0,w,h);

    let freq = 0;
    if (analyser) {
        analyser.getByteFrequencyData(dataArray);
        freq = dataArray.reduce((a,b)=>a+b)/dataArray.length / 255;
    } else {
        freq = Math.sin(t*0.002)*0.5 + 0.5;
    }

    guardians.forEach(g => g.latir(freq));

    updateGame(t);
    drawGame();

    runes = runes.filter(r => {
        r.y -= 0.5 + freq;
        r.life--;
        if (r.life <= 0 || r.y < -20) return false;
        ctx.font = '14px monospace';
        ctx.fillStyle = `hsla(300,100%,70%,${r.life/300})`;
        ctx.fillText(r.text, r.x, r.y);
        return true;
    });
    if (Math.random() < 0.03) {
        runes.push({text: thuamerRunes[Math.floor(Math.random()*thuamerRunes.length)], x: Math.random()*w, y: h+20, life: 200});
    }

    const elapsed = Math.floor((Date.now() - startTime)/1000);
    const poemTrigger = Math.floor(elapsed / (TOTAL_SECONDS / poems.length));
    if (poemTrigger !== poemIndex && poemTrigger < poems.length) {
        poemIndex = poemTrigger;
        poema.innerHTML = poems.slice(0, poemIndex + 1).join('\n\n') + '\n\n[README.md INTEGRADO — MANIFIESTO SLYVERSE v∞ ×1310]\n' + `# SLYVERSE: El Universo Ronin Orbital de 0rb1t4lsn4k3r\n\n## Visión Thuamer\nSLYVERSE es el cosmos personal de Thuamer Zel... [resto del readme como arriba]`;
    }

    const hours = Math.floor(elapsed / 3600);
    echo.innerHTML = `${hours}/1,714,300 horas · ${Math.floor(t/60)} RPM · ${runes.length} runas · ${versesCount} versos largos · ${gameActive ? 'RONIN ACTIVE' : 'G para Jugar'}`;
    rune.textContent = thuamerRunes[Math.floor(t/300) % thuamerRunes.length];
    rune.style.transform = `rotate(${t*0.5}deg)`;

    drawAltar();
    requestAnimationFrame(loop);
}

function resize() {
    w = c.width = innerWidth; h = c.height = innerHeight;
    altarCanvas.width = 300; altarCanvas.height = 300;
}

window.onresize = resize;
init();
loop();
</script>
</body>
</html>