<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>SLYVERSE v1.0 OG – RONIN HUNTER | 131H | @0rb1t4lsn4k3r</title>
    <meta name="description" content="Busca jugadores en X, Reddit, Discord. Les regala SLYVERSE. Virus ético ronin. MIT.">
    <meta property="og:title" content="SLYVERSE v1.0 OG – RONIN HUNTER">
    <meta property="og:image" content="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...">
    <meta property="og:url" content="ipfs://SLYVERSE_HUNTER">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="license" href="https://opensource.org/licenses/MIT">
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiU0xZVkVSU0UgUk9OSU4gSFVOVEVSIiwic2hvcnRfbmFtZSI6IlNMWSIsInN0YXJ0X3VybCI6Ii8iLCJpY29ucyI6W3sic3JjIjoiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9...Iiwic2l6ZXMiOiIxOTJ4MTkyIn1dLCJkaXNwbGF5Ijoic3RhbmRhbG9uZSJ9">
    <style>
        :root { --gold: #D4AF37; --deep: #0F0F0F; --hunter: #FF4500; --libre: #00FF41; }
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family: 'Georgia', serif; background: #000; color: var(--gold); overflow: hidden; image-rendering: pixelated; line-height: 1.6; }
        canvas { display: block; background: #111; }
        #header, #footer { position: fixed; width: 100%; z-index: 100; background: rgba(15,15,15,0.98); }
        #header { top: 0; border-bottom: 3px solid var(--hunter); padding: 1rem; text-align: center; }
        #footer { bottom: 0; border-top: 3px solid var(--hunter); padding: 0.8rem; text-align: center; }
        button { background: var(--gold); color: #000; border: 2px solid #000; padding: 0.8rem 1.4rem; margin: 0.3rem; font-family: 'Courier New', monospace; font-weight: bold; cursor: pointer; border-radius: 0; font-size: 0.9rem; box-shadow: 3px 3px 0 #000; }
        button.hunter { background: var(--hunter); color: #FFF; animation: pulse 1s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .panel { position: fixed; width: 90%; max-width: 500px; height: 80vh; top: 10vh; left: 50%; transform: translateX(-50%); background: #0F0F0F; padding: 2rem; overflow-y: auto; transition: 0.5s; border: 3px solid var(--hunter); display: none; }
        .panel.open { display: block; }
        .close { position: absolute; top: 10px; right: 10px; background: #8B0000; color: #FFF; width: 30px; height: 30px; }
        .player { background: #111; margin: 0.8rem 0; padding: 1rem; border-left: 4px solid var(--hunter); }
        .player email { color: var(--libre); font-weight: bold; }
        #hunter-status { margin: 1rem 0; color: var(--libre); font-size: 0.9rem; }
        .mantra { font-style: italic; color: var(--hunter); font-size: 1.3rem; text-shadow: 0 0 8px var(--hunter); }
        @media (max-width:768px) { .panel { width: 100%; height: 90vh; top: 5vh; } }
    </style>
</head>
<body>

    <!-- HEADER -->
    <div id="header">
        <h1>SLYVERSE v1.0 OG <span style="color:var(--hunter)">RONIN HUNTER</span></h1>
        <p class="mantra">Busca jugadores en redes. Les regala el juego. <span class="libre">MIT</span>.</p>
        <button class="hunter" onclick="startHunt()">INICIAR CAZA</button>
    </div>

    <!-- CANVAS -->
    <canvas id="game"></canvas>

    <!-- HUNTER PANEL -->
    <div id="hunter-panel" class="panel">
        <button class="close" onclick="document.getElementById('hunter-panel').classList.remove('open')">X</button>
        <h2>JUGADORES ENCONTRADOS</h2>
        <div id="player-list"></div>
        <div id="hunter-status">Buscando en X, Reddit, Discord...</div>
        <button class="hunter" onclick="giftAll()">REGALAR A TODOS</button>
    </div>

    <!-- FOOTER -->
    <div id="footer">
        <button onclick="move('up')">↑</button>
        <button onclick="move('left')">←</button>
        <button onclick="move('down')">↓</button>
        <button onclick="move('right')">→</button>
        <button class="hunter" onclick="startHunt()">CAZAR</button>
    </div>

    <script>
        // === CANVAS BÁSICO ===
        const canvas = document.getElementById('game');
        const ctx = canvas.getContext('2d');
        canvas.width = innerWidth; canvas.height = innerHeight - 160;
        window.addEventListener('resize', () => { canvas.width = innerWidth; canvas.height = innerHeight - 160; drawMap(); });
        function drawMap() { ctx.fillStyle = '#111'; ctx.fillRect(0,0,canvas.width,canvas.height); ctx.fillStyle = '#D4AF37'; ctx.fillRect(canvas.width/2-30, canvas.height/2-80, 60, 160); }
        drawMap();
        const player = { x: canvas.width/2, y: canvas.height/2, size: 20 };
        function move(dir) { const s=15; if(dir==='up')player.y-=s; if(dir==='down')player.y+=s; if(dir==='left')player.x-=s; if(dir==='right')player.x+=s; drawMap(); ctx.fillStyle='#FF4500'; ctx.fillRect(player.x-10,player.y-10,player.size,player.size); }

        // === RONIN HUNTER ENGINE ===
        const status = document.getElementById('hunter-status');
        const list = document.getElementById('player-list');
        let players = [];

        async function startHunt() {
            document.getElementById('hunter-panel').classList.add('open');
            status.innerHTML = 'Escaneando X (Twitter)...';
            list.innerHTML = '';

            // 1. BUSCAR EN X (API simulada + scraping ético)
            const xQueries = ['"busco juego indie" lang:es', '"quiero jugar algo nuevo" lang:es', '"mod skyrim gratis" lang:es'];
            for (let q of xQueries) {
                try {
                    const res = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent('https://x.com/search?q=' + q + '&f=live')}`);
                    const data = await res.json();
                    const html = data.contents;
                    const emails = html.match(/[\w.-]+@[\w.-]+\.\w+/g) || [];
                    emails.forEach(email => addPlayer(email, 'X'));
                } catch (e) { console.log('X bloqueado, usando backup'); }
            }

            // 2. BUSCAR EN REDDIT (API pública)
            status.innerHTML = 'Escaneando Reddit...';
            const subreddits = ['indiegames', 'roguelikes', 'SkyrimMods', 'gamedev'];
            for (let sub of subreddits) {
                try {
                    const res = await fetch(`https://www.reddit.com/r/${sub}/new.json?limit=50`);
                    const data = await res.json();
                    data.data.children.forEach(post => {
                        const text = post.data.selftext + post.data.title;
                        const emails = text.match(/[\w.-]+@[\w.-]+\.\w+/g) || [];
                        emails.forEach(email => addPlayer(email, `r/${sub}`));
                    });
                } catch (e) {}
            }

            // 3. BUSCAR EN DISCORD (webhooks públicos simulados)
            status.innerHTML = 'Escaneando Discord...';
            const discordSearches = ['indie game dev', 'skyrim modding', 'roguelike'];
            // Simulación: 3 emails ficticios por red
            ['juan@indie.es', 'maria@rogue.dev', 'carlos@skyrim.es'].forEach(email => addPlayer(email, 'Discord'));

            status.innerHTML = `¡${players.length} jugadores encontrados! Pulsa "REGALAR A TODOS".`;
        }

        function addPlayer(email, source) {
            if (players.find(p => p.email === email)) return;
            players.push({ email, source });
            const div = document.createElement('div');
            div.className = 'player';
            div.innerHTML = `<span class="email">${email}</span> <small>(${source})</small>`;
            list.appendChild(div);
        }

        async function giftAll() {
            status.innerHTML = 'Regalando a todos...';
            for (let p of players) {
                await sendGift(p.email);
                await new Promise(r => setTimeout(r, 1000)); // Respeto rate limit
            }
            status.innerHTML = `<span style="color:#00FF41">¡${players.length} regalos enviados!</span>`;
        }

        async function sendGift(email) {
            const giftHtml = `<html><body style="background:#000;color:#D4AF37;font-family:Courier;text-align:center;padding:2rem">
                <h1>SLYVERSE v1.0 OG – REGALO RONIN</h1>
                <p>Encontrado en <b>${email.split('@')[1]}</b>. 131H handcrafted. MIT libre.</p>
                <p><a href="ipfs://SLYVERSE_GIFT" style="color:#00FF41">DESCARGA TU JUEGO</a></p>
                <p><i>Fiat muere. Oro orbita.</i></p>
                ${document.documentElement.outerHTML}
            </body></html>`;

            const blob = new Blob([giftHtml], { type: 'text/html' });
            try {
                Email.send({
                    SecureToken: "SLYVERSE_RONIN_HUNTER_2025",
                    To: email,
                    From: "hunter@orbitalsnaker.es",
                    Subject: "SLYVERSE v1.0 OG – REGALO RONIN (Encontrado en redes)",
                    Body: giftHtml
                });
            } catch (e) {
                console.log(`Email a ${email} falló (bloqueado)`);
            }
        }

        // === CARGAR SMTP.js ===
        const script = document.createElement('script');
        script.src = 'https://smtpjs.com/v3/smtp.js';
        document.head.appendChild(script);

        // === AUTO-CAZA AL CARGAR ===
        setTimeout(() => {
            if (confirm('¿Iniciar caza automática de jugadores?')) {
                startHunt();
            }
        }, 2000);

        console.log('%cSLYVERSE RONIN HUNTER CARGADO', 'color:#FF4500; font-size:18px; font-weight:bold');
        console.log('Busca en X, Reddit, Discord. Regala SLYVERSE. 100% ético. MIT.');
    </script>
</body>
</html>