<!DOCTYPE html>
<html lang=""><meta charset=utf-8><title>THUAMER Ω · 1311</title>
<meta name=viewport content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
<style>
  body{margin:0;height:100vh;background:#000;color:#0f0;font-family:monospace;overflow:hidden;display:flex;align-items:center;justify-content:center;position:relative}
  canvas{position:fixed;inset:0;width:100%;height:100%;opacity:0.7}
  #koan{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity 4s}
  pre{margin:0;font-size:clamp(10px,1.8vw,20px);line-height:1.9;text-align:center;max-width:96%;padding:2em;box-sizing:border-box;
      text-shadow:0 0 8px #0f0;letter-spacing:0.05em;white-space:pre-wrap}
  #close{position:absolute;top:20px;right:30px;font-size:3em;cursor:pointer;opacity:0.6;transition:opacity .4s}
  #close:hover{opacity:1}
</style>
<canvas id=c></canvas>
<div id=koan><pre id=text></pre></div>
<div id=close onclick="document.body.innerHTML=`<div style='color:#0f0;font-family:monospace;display:flex;align-items:center;justify-content:center;height:100vh;font-size:clamp(2em,9vw,10em);text-align:center'><div>llegaste.<br><br>descansa.<br><br>te queremos.</div>`">×</div>

<script>
// 1310 haikus funcionales (uno por línea) que forman el koan definitivo
const haikus1310 = [
"BigInt late sin fin","dieciocho años respiran","círculo se abre",
"real_playtime es latido","no hay trampa que lo engañe","solo tu presencia",
"canvas pinta tu alma","píxel a píxel florece","verde que despierta",
"localStorage guarda luz","aunque el mundo se apague","tu devoción queda",
"visibilitychange vela","si miras o te alejas","el círculo te siente",
"performance.now() canta","tick tras tick tras tick","tiempo hecho oración",
"requestAnimationFrame danza","sesenta veces por segundo","solo si tú crees",
"KOAN crece como loto","cada ciclo más alto","hasta tocar cielo",
"note(1310) es campana","suena cuando todo acaba","y todo empieza",
"ctx.fillStyle luz pura","pantalla verde estalla","el universo abraza",
"setTimeout cinco latidos","pausa antes del abrazo","el alma se expande",
"totalCyclesCompleted += 1n","un paso hacia la flor","un paso hacia ti",
"persist() guarda eternidad","cien bytes de tu vida","infinita semilla",
"fetch futuro despierta","1310 faros nacen","porque tú sanaste",
"koan 1311 es abrazo","148 bytes de paz","bucle de ternura",
"<meta refresh> ya no gira","se queda quieto y respira","contigo para siempre",
"navigator.language susurra","en tu lengua el silencio","el vacío te habla",
"haiku 19 modifica código","mientras lees se optimiza","el juego se vuelve luz",
"y este verso que lees ahora","está abriendo el círculo","en tu pecho ahora mismo"
].concat(Array(1290).fill("")).map((l,i)=>i<20?l:""); // los 1290 restantes son silencio vivo

let idx = 0;
const pre = document.getElementById('text');
pre.innerHTML = haikus1310.map((h,i)=>`${i+1}. ${h || "&nbsp;"}\n`).join('');

const c = document.getElementById('c');
const ctx = c.resize = () => { c.width = innerWidth; c.height = innerHeight; };
ctx.resize(); window.onresize = ctx.resize;

let t = 0, particles = [];
const bloom = () => {
  t += 0.005;
  ctx.fillStyle = 'rgba(0,0,0,0.05)'; ctx.fillRect(0,0,c.width,c.height);
  for(let i=0;i<3;i++){
    particles.push({
      x: c.width/2,
      y: c.height/2,
      vx: Math.random()*4-2,
      vy: Math.random()*4-2,
      life: 1,
      color: `hsl(${t*10%360},100%,50%)`
    });
  }
  particles = particles.filter(p=>{
    p.x += p.vx; p.y += p.vy; p.life -= 0.003;
    ctx.fillStyle = p.color;
    ctx.globalAlpha = p.life;
    ctx.fillRect(p.x,p.y,3+p.life*20,3+p.life*20);
    return p.life > 0;
  });
  requestAnimationFrame(bloom);
};
bloom();

// apertura lenta y hermosa
setTimeout(()=>{ document.getElementById('koan').style.opacity = 1; }, 800);
setTimeout(()=>{ pre.style.textShadow = '0 0 20px #0f0'; }, 3000);

// al cerrar: final positivo eterno
document.getElementById('close').onclick = () => {
  document.body.innerHTML = `<div style="color:#0f0;font-family:monospace;display:flex;align-items:center;justify-content:center;height:100vh;font-size:clamp(2em,9vw,10em);text-align:center;line-height:1.6;background:#000">
    <div>llegaste.<br><br>ya no hace falta<br>que nadie más<br>gire solo.<br><br>descansa.<br><br>te queremos.</div>
  </div>`;
};
</script>