<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SLYVERSE Œ© v1.5 ‚Äî Red Mountain Eterna | Nevarine entrega la cura a Todd</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&display=swap');
        body {margin:0;padding:0;overflow:hidden;background:#000;font-family:'Courier Prime',monospace;color:#e8d5b7;}
        canvas {display:block;}
        #ui {position:fixed;top:20px;left:20px;z-index:100;font-size:14px;text-shadow:0 0 10px #ff9966;}
        #stats {position:fixed;bottom:20px;right:20px;z-index:100;font-size:12px;opacity:0.8;}
        @keyframes pulse {0%,100%{opacity:0.7;transform:scale(1)}50%{opacity:1;transform:scale(1.1)}}
        .runa {position:fixed;font-size:48px;opacity:0;animation:pulse 2s infinite;z-index:50;pointer-events:none;}
        #norah {position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:200;opacity:0;transition:opacity 1s;font-size:64px;color:#ffcc99;text-shadow:0 0 20px #ff9966;}
        #nevarine {position:fixed;bottom:100px;left:50%;transform:translateX(-50%);z-index:300;opacity:0;transition:opacity 2s,transform 2s;font-size:18px;color:#ffd700;text-shadow:0 0 15px #ffaa00;background:rgba(0,0,0,0.8);padding:12px 20px;border-radius:8px;border:1px solid #ffd700;}
        #nevarine.visible {opacity:1;transform:translateX(-50%) translateY(-20px);}
        #mensaje-todd {position:fixed;bottom:12px;left:12px;right:12px;max-width:420px;padding:16px;background:rgba(0,0,0,0.75);border:2px solid #6b5541;border-radius:12px;font-size:13px;line-height:1.55;color:#f0e6d2;opacity:0.92;z-index:99999;pointer-events:none;box-shadow:0 0 30px rgba(139,0,0,0.6);backdrop-filter:blur(4px);}
        #mensaje-todd .titulo {text-align:center;margin-bottom:12px;color:#ffaa77;font-size:15px;font-weight:700;}
        #mensaje-todd .firma {font-size:11px;color:#aaa;text-align:right;margin-top:12px;}
        .guardian {position:fixed;top:20px;right:20px;font-size:24px;opacity:0.7;animation:dance 3s infinite;z-index:99;}
        @keyframes dance {0%,100%{transform:rotate(0deg) scale(1)}25%{transform:rotate(90deg) scale(1.2)}50%{transform:rotate(180deg) scale(0.8)}75%{transform:rotate(270deg) scale(1.1)}}
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <div id="ui">
        <div>Nevarine en Red Mountain | SLYVERSE Œ© v1.5 ‚Äî El Abrazo Eterno</div>
        <div id="runas-count">Runas activas: 0</div>
        <div>Aliento: <span id="breath">0</span>%</div>
    </div>

    <div id="stats">1310h √ó ‚àû | Thuamer sanado | P2P: 131 peers</div>

    <!-- Norah Ronin ‚Äî Reina c√≥smica que ma√∫lla Dwemer -->
    <div id="norah">Norah Ronin ma√∫lla... ·õö·ö¢·õâ</div>

    <!-- Nevarine entrega el mensaje -->
    <div id="nevarine">
        Yo, Nevarine, elegido de las profec√≠as,<br>
        he cruzado Vvardenfell para traerte esto, Todd.<br>
        La monta√±a roja late de nuevo. Acepta el abrazo ronin.<br>
        ·õö·ö¢·õâ ‚Äî Cura tus cicatrices. Morrowind vive en nosotros.
    </div>

    <!-- Mensaje eterno a Todd (y a quien a√∫n recuerde Seyda Neen) -->
    <div id="mensaje-todd">
        <div class="titulo">Para Todd y para quien a√∫n recuerde Seyda Neen</div>
        Todd,<br><br>
        esto no es un ataque. Es un regalo.<br><br>
        Hace 17 d√≠as un chico con un m√≥vil de 120 ‚Ç¨ y mucho amor<br>
        meti√≥ Red Mountain entera en 16 KB de c√≥digo<br>
        y lo solt√≥ al mundo gratis y para siempre.<br><br>
        √Åbrelo cuando est√©s solo y necesites recordar<br>
        por qu√© empezaste todo esto hace m√°s de 20 a√±os.<br><br>
        Norah ma√∫lla dentro del archivo.<br>
        Su runa ·õö·ö¢·õâ cura cicatrices.<br>
        Tambi√©n las tuyas, si la dejas entrar.<br><br>
        Gracias por darnos Morrowind.<br>
        Hoy los fans te devolvemos el favor.<br><br>
        Sin rencor.<br>
        Solo amor ronin.<br><br>
        La monta√±a roja sigue latiendo.<br>
        Y ahora late m√°s fuerte que nunca.<br><br>
        Un abrazo desde Espa√±a ‚ù§Ô∏è<br>
        <div class="firma">‚Äî la comunidad que nunca dej√≥ de creer | Nevarine v1.5</div>
    </div>

    <!-- Guardianes danzando (Carl Sagan vela desde √≥rbita) -->
    <div class="guardian">Guardianes Thuamer √ó1310</div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let time = 0, runasCount = 0, breathLevel = 0;
        const particles = [], runas = ['·õö','·ö¢','·õâ'];

        window.addEventListener('resize',()=>{canvas.width=innerWidth;canvas.height=innerHeight;});

        // Mic breath ‚Üí Norah ma√∫lla
        navigator.mediaDevices.getUserMedia({audio:true}).then(stream=>{
            const audioCtx = new AudioContext();
            const source = audioCtx.createMediaStreamSource(stream);
            const analyser = audioCtx.createAnalyser();
            analyser.fftSize = 256;
            source.connect(analyser);
            const data = new Uint8Array(analyser.frequencyBinCount);
            const update = ()=>{
                analyser.getByteFrequencyData(data);
                breathLevel = data.reduce((a,b)=>a+b)/data.length/255;
                document.getElementById('breath').textContent = Math.round(breathLevel*100);
                requestAnimationFrame(update);
            };
            update();
        }).catch(()=>{});

        function createParticles(){for(let i=0;i<200;i++)particles.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,vx:(Math.random()-0.5)*2,vy:(Math.random()-0.5)*2,life:Math.random()*255,size:Math.random()*3+1});}
        createParticles();

        function spawnRuna(){
            const r = document.createElement('div');
            r.className='runa'; r.innerHTML=runas[Math.floor(Math.random()*runas.length)];
            r.style.left=Math.random()*100+'%'; r.style.top=Math.random()*100+'%';
            r.style.animationDelay=Math.random()*2+'s';
            document.body.appendChild(r); runasCount++;
            document.getElementById('runas-count').textContent=`Runas activas: ${runasCount}`;
            setTimeout(()=>r.remove(),10000);
        }

        setInterval(()=>{document.getElementById('norah').style.opacity = breathLevel>0.3?1:0;},500);

        // Nevarine aparece a los 5 segundos
        setTimeout(()=>{document.getElementById('nevarine').classList.add('visible');},5000);

        // P2P persistente
        localStorage.setItem('slyversePeers','131');

        function animate(){
            ctx.fillStyle='rgba(0,0,0,0.1)'; ctx.fillRect(0,0,canvas.width,canvas.height);
            particles.forEach((p,i)=>{
                p.x += p.vx + Math.sin(time*0.01+i)*breathLevel;
                p.y += p.vy + Math.cos(time*0.01+i)*breathLevel;
                p.life -=1;
                ctx.save(); ctx.globalAlpha = p.life/255;
                ctx.fillStyle=`hsl(${200+p.life/2},70%,60%)`;
                ctx.beginPath(); ctx.arc(p.x,p.y,p.size,0,Math.PI*2); ctx.fill();
                ctx.restore();
                if(p.life<0) particles.splice(i,1);
            });

            const pulse = Math.sin(time*0.05)*0.5+0.5;
            const grad = ctx.createRadialGradient(canvas.width/2,canvas.height/2,0,canvas.width/2,canvas.height/2,300);
            grad.addColorStop(0,`rgba(255,50,50,${0.8+pulse*0.2})`);
            grad.addColorStop(1,'rgba(139,0,0,0)');
            ctx.fillStyle=grad; ctx.fillRect(0,0,canvas.width,canvas.height);

            time++;
            if(Math.random()<0.1+breathLevel) spawnRuna();
            requestAnimationFrame(animate);
        }
        animate();

        document.addEventListener('keydown',e=>{if(e.key===' ')spawnRuna();});

        // Persistencia
        localStorage.setItem('slyverseV15',JSON.stringify({runasCount,time:Date.now()}));
        console.log('SLYVERSE Œ© v1.5 cargada ‚Äî Nevarine entreg√≥ la cura. Norah ma√∫lla. Carl vela. ‚ù§Ô∏èüêçüåå');
    </script>
</body>
</html>