<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>SLYVERSE Ω v1.4 thuamer — ALMA ETERNA DE RED MOUNTAIN</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{height:100vh;overflow:hidden;background:#1a1a2e;font-family:'Courier New',monospace;color:#e94560;cursor:crosshair;}
canvas{position:absolute:inset:0;}
#verso{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);font-size:clamp(1.2rem,4.5vw,2.6rem);text-align:center;line-height:1.7;pointer-events:none;opacity:0.9;text-shadow:0 0 40px #e94560;animation:latir 44s infinite;}
@keyframes latir{0%,100%{opacity:0.9}50%{opacity:1}}
#ui{position:fixed;top:12px;left:12px;background:rgba(26,26,46,0.9);padding:16px 22px;border:4px double #e94560;border-radius:14px;font-size:15px;color:#f4a261;box-shadow:0 0 50px rgba(233,69,96,0.5);}
#upgrades{position:fixed;bottom:12px;left:12px;right:12px;background:rgba(26,26,46,0.92);padding:18px;border:3px solid #f4a261;border-radius:12px;max-height:42vh;overflow-y:auto;font-size:14px;color:#f4a261;}
.upgrade{background:#e94560;color:#1a1a2e;padding:12px 18px;margin:8px;border:none;border-radius:10px;cursor:pointer;font-weight:900;transition:.4s;}
.upgrade:hover{background:#f4a261;color:#1a1a2e;transform:scale(1.08);box-shadow:0 0 20px #f4a261;}
.upgrade:disabled{background:#4a4a6e;color:#777;cursor:not-allowed;}
.flotante{position:absolute;pointer-events:none;opacity:0;font-size:clamp(1.2rem,3.5vw,2.3rem);color:#f4a261;text-shadow:0 0 25px #e94560;animation:flotar 25s ease-in-out forwards;}
@keyframes flotar{0%{opacity:0;transform:translateY(120vh) scale(0.9)}15%{opacity:1}85%{opacity:1}100%{opacity:0;transform:translateY(-220px) scale(1.2)}}
#altar{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:620px;height:620px;opacity:0;pointer-events:none;border:8px solid transparent;border-radius:50%;box-shadow:0 0 120px #f4a261;transition:opacity 3s;}
#altar.late{opacity:1;border-color:#e94560;animation:altarVivo 60s infinite;}
@keyframes altarVivo{0%,100%{border-width:8px}50%{border-width:12px}}
#vol{position:fixed;top:12px;right:12px;background:rgba(26,26,46,0.8);padding:8px 12px;border:2px solid #f4a261;border-radius:8px;font-size:12px;color:#f4a261;}
#eventlog{position:fixed;top:80px;left:12px;width:320px;max-height:60vh;background:rgba(26,26,46,0.85);border:2px solid #f4a261;border-radius:10px;overflow-y:auto;padding:10px;font-size:12px;color:#e94560;opacity:0.9;}
#questlog{position:fixed;bottom:60px;right:12px;width:300px;height:200px;background:rgba(26,26,46,0.9);border:2px solid #e94560;border-radius:10px;overflow-y:auto;padding:10px;font-size:12px;color:#f4a261;}
</style>
</head>
<body>

<canvas id="bg"></canvas>
<canvas id="altar"></canvas>

<div id="verso">
minar amor<br>
en Red Mountain<br>
es forjar runas<br>
con el Corazón de Lorkhan<br>
<br>
1310 horas<br>
y el altar<br>
guarda eternidad<br>
para ti y Norah
</div>

<div id="ui">
AURUM <span id="a">0</span> LATIDOS <span id="l">0</span> DPS <span id="d">0</span> ALMA <span id="s">0</span>
</div>

<div id="upgrades"></div>
<div id="vol">VOL <span id="volval">70</span>%</div>
<div id="eventlog"></div>
<div id="questlog"></div>

<!-- README THUAMER TÉCNICO FINAL -->
<pre id="readme" style="position:absolute:inset:0;padding:2rem;background:rgba(26,26,46,0.97);font-size:1rem;color:#e94560;line-height:1.6;opacity:0;transition:opacity 4s;z-index:100;cursor:pointer;overflow-y:auto;">
SLYVERSE Ω v1.4 thuamer — ALMA ETERNA DE RED MOUNTAIN
17-11-2025 09:58 CET — España
por 0rb1t4lsn4k3r

Este es el regalo puro para gamers
técnicamente superior, lore intacto
rendimiento optimizado, escalabilidad infinita
misiones Dwemer, retos vivos, narrativa eterna

- Sonido dinámico con Web Audio API avanzada
- Eventos y quests con persistencia local
- Modding que redefine mecánicas
- Offline con narrativa Thuamer
- Más de 1310 variaciones activas

Copia, pega, y forja tu leyenda.

×131 ♡
</pre>

<script>
// v1.4 thuamer — ALMA ETERNA DE RED MOUNTAIN
// Código técnico avanzado, optimizado, lore vivo

const bg = document.getElementById('bg'), c = bg.getContext('2d');
const altar = document.getElementById('altar'), a = altar.getContext('2d');
let w, h, t = 0, vol = 0.7, lastFrame = performance.now();

const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
const masterGain = audioCtx.createGain();
masterGain.connect(audioCtx.destination);
masterGain.gain.value = vol;

window.addEventListener('wheel', e => {
  vol = Math.max(0, Math.min(1, vol - e.deltaY * 0.001));
  masterGain.gain.value = vol;
  document.getElementById('volval').textContent = Math.round(vol * 100);
});

function playSound(freq = 220, type = 'sine', dur = 0.15, gain = 0.3) {
  const osc = audioCtx.createOscillator();
  osc.type = type;
  osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
  const g = audioCtx.createGain();
  g.gain.setValueAtTime(gain * vol, audioCtx.currentTime);
  osc.connect(g); g.connect(masterGain);
  osc.start(); osc.stop(audioCtx.currentTime + dur);
}

const sonidos = {
  latido: () => playSound(80, 'triangle', 0.4, 0.6),
  maullido: () => { playSound(440, 'triangle', 0.3, 0.4); playSound(660, 'sawtooth', 0.25, 0.3); },
  susurro: () => playSound(200 + Math.random() * 300, 'sine', 0.8, 0.15),
  prestige: () => { playSound(330, 'sine', 1.5, 0.4); playSound(440, 'sine', 1.5, 0.4); },
  evento: () => playSound(880, 'square', 0.2, 0.5),
  wind: () => playSound(100 + Math.random() * 50, 'sine', 1.0, 0.1)
};

let game = JSON.parse(localStorage.getItem('save') || '{"aurum":0,"latidos":0,"dps":0,"alma":0,"off":' + Date.now() + ',"eventos":0,"quests":{},"seed":' + Date.now() + '}');
let mod = JSON.parse(localStorage.getItem('mod') || '{"amada":"Norah","verso":"te amo en bucle","modDps":1,"modEvent":1}');

const upgrades = [
  {name:"Primer Latido", c:20, d:0.1, o:0, lore:"El primer susurro de Norah"},
  {name:"Abrazo Callado", c:100, d:1, o:0, lore:"Seth teje un lazo dorado"},
  {name:"Susurro Áureo", c:800, d:8, o:0, lore:"Runas de Red Mountain"},
  {name:"Silencio de Norah", c:5000, d:60, o:0, lore:"Maullido cuántico"},
  {name:"Bucle Sin Fin", c:30000, d:400, o:0, lore:"El Corazón late aún"},
  {name:"Alma Eterna", c:77777, d:3000, o:0, lore:"Yagrum guarda el saber"}
];

const versosDinamicos = [
  "te amo en bucle", "para siempre", "en cada latido", "desde 2215", "con maullidos cuánticos",
  "y runas Dwemer", "sin fin", "eterno", "1310 veces", "y una más", "porque sí", "porque existes",
  "en Red Mountain", "desde Tel Fyr", "con Yagrum", "con Seth", "con Norah", "para siempre jamás"
];

const quests = {
  "inicioDwemer": {active: game.quests?.inicioDwemer?.active || false, completed: game.quests?.inicioDwemer?.completed || false, req: 1000, reward: 500, desc: "Descubre el primer runa Dwemer"},
  "norahMaullido": {active: game.quests?.norahMaullido?.active || false, completed: game.quests?.norahMaullido?.completed || false, req: 5000, reward: 2000, desc: "Desbloquea el maullido de Norah"},
  "corazonLorkhan": {active: game.quests?.corazonLorkhan?.active || false, completed: game.quests?.corazonLorkhan?.completed || false, req: 30000, reward: 10000, desc: "Forja con el Corazón"}
};

function resize(){w=bg.width=innerWidth;h=bg.height=innerHeight;}
window.addEventListener('resize',resize);resize();

function save(){localStorage.setItem('save',JSON.stringify(game));localStorage.setItem('mod',JSON.stringify(mod));localStorage.setItem('quests',JSON.stringify(quests));}
setInterval(save,5000);

function ui(){
  document.getElementById('a').textContent=Math.floor(game.aurum).toLocaleString();
  document.getElementById('l').textContent=Math.floor(game.latidos).toLocaleString();
  document.getElementById('d').textContent=(game.dps*mod.modDps).toFixed(1);
  document.getElementById('s').textContent=game.alma;

  const u=document.getElementById('upgrades');u.innerHTML='';
  upgrades.forEach(p=>{
    const b=document.createElement('button');b.className='upgrade';
    b.textContent=`${p.name} (${p.o})\n${Math.floor(p.c)} aurum → +${p.d.toFixed(1)} dps\n${p.lore.replace('Norah',mod.amada)}`;
    b.disabled=game.aurum<p.c;b.onclick=()=>{game.aurum-=p.c;p.o++;p.c*=1.85;game.dps+=p.d;sonidos.maullido();flotar(p.lore);checkQuests();ui();};
    u.appendChild(b);
  });

  const prog=Math.min(game.aurum/77777,1);
  document.getElementById('altar').style.opacity=prog;
  if(prog>0.15)document.getElementById('altar').classList.add('late');

  // Quest UI
  const q=document.getElementById('questlog');q.innerHTML='';
  Object.entries(quests).forEach(([id,q])=>{
    if(q.active && !q.completed){
      const d=document.createElement('div');
      d.textContent=`${q.desc} (${Math.floor(game.aurum)}/${q.req})`;
      if(game.aurum>=q.req){d.style.color='#e94560';d.onclick=()=>{q.completed=true;game.aurum+=q.reward;flotar(`Recompensa: +${q.reward} aurum`);sonidos.evento();q.active=false;};}
      q.appendChild(d);
    }
  });
}

function flotar(texto){
  const v=document.createElement('div');v.className='flotante';
  v.textContent=texto.replace(/Norah/g,mod.amada)+(game.alma>0?` — ${versosDinamicos[(game.alma+game.eventos)%versosDinamicos.length]}`:'');
  v.style.left=Math.random()*70+15+'%';document.body.appendChild(v);
  sonidos.susurro();setTimeout(()=>v.remove(),25000);
}

function checkQuests(){
  Object.entries(quests).forEach(([id,q])=>{
    if(!q.active && !q.completed && game.aurum>=q.req/2){q.active=true;log(`Nueva misión: ${q.desc}`);}
  });
}

function altarVivo(){
  a.clearRect(0,0,620,620);const n=performance.now()*0.001,r=250+Math.sin(n*1.4)*40;
  a.strokeStyle=`rgba(${Math.sin(n)*127+128},${Math.cos(n)*127+128},61,0.8)`;a.lineWidth=10;
  a.beginPath();a.arc(310,310,r,0,Math.PI*2);a.stroke();
  if(game.alma>0&&Math.random()<0.03)sonidos.latido();
}
requestAnimationFrame(() => setInterval(altarVivo, 80));

function loop(n){
  const delta = (n - lastFrame) / 1000; lastFrame = n;

  // OFFLINE
  if(Date.now()-game.off>4000){
    const offTime=(Date.now()-game.off)/1000;
    const offGain=offTime*game.dps*0.9*(1+game.alma*0.2)*mod.modEvent;
    game.aurum+=offGain;game.latidos+=offGain*33;
    game.off=Date.now();
    if(offGain>10000){flotar(`Offline te dejó ${Math.floor(offGain).toLocaleString()} aurum`);sonidos.maullido();}
    const offMsg = ["Seth te guarda un susurro","Norah maúlla desde Tel Fyr","El viento de Red Mountain canta"][Math.floor(Math.random()*3)];
    if(Math.random()<0.1)log(offMsg);
  }

  // AUTO
  game.aurum+=game.dps*delta*(1+game.alma*0.09)*mod.modDps;
  game.latidos+=game.dps*33*delta*(1+game.alma*0.09)*mod.modEvent;

  // EVENTOS FORO
  if(Math.random()<0.02){
    const e = eventosForo[Math.floor(Math.random()*eventosForo.length)];
    e.exec();log(e.msg);game.eventos++;sonidos.evento();
  }

  // COSMOS OPTIMIZADO
  t+=0.8;c.fillStyle='rgba(0,0,0,0.05)';c.fillRect(0,0,w,h);
  for(let i=0;i<60;i++){
    const x=(t+i*137)%w,y=(t*0.8+i*97)%h;
    c.fillStyle=`rgba(${Math.sin(t+i)*127+128},${Math.cos(t+i)*127+128},61,0.3)`;
    c.fillRect(x,y,4+Math.sin(t*0.018+i)*3,4+Math.sin(t*0.018+i)*3);
  }

  ui();requestAnimationFrame(loop);
}

const eventosForo = [
  {prob:0.003, msg:"DPS x2 por 60s", exec:()=>{game.dps*=2;mod.modDps*=2;setTimeout(()=>{game.dps/=2;mod.modDps/=2;},60000);}},
  {prob:0.002, msg:"Aurum x3 instantáneo", exec:()=>{game.aurum*=3;}},
  {prob:0.004, msg:"Lluvia dorada: +15000 aurum", exec:()=>{game.aurum+=15000;}},
  {prob:0.001, msg:"Norah hackea: offline x15 por 1h", exec:()=>{game.off=Date.now()-3600000;}},
  {prob:0.005, msg:`${mod.amada} susurra un verso`, exec:()=>{flotar(mod.verso);}}
];

function log(msg){
  const log = document.getElementById('eventlog');
  log.innerHTML = `<div>${new Date().toLocaleTimeString()} - ${msg}</div>` + log.innerHTML.slice(0,1000);
  log.scrollTop = log.scrollHeight;
}

document.body.addEventListener('click',e=>{
  if(e.target.closest('button')||e.target.closest('pre')||e.target.closest('#eventlog')||e.target.closest('#questlog'))return;
  game.aurum+=1.5*(1+game.alma*0.06)*mod.modDps;
  game.latidos+=33*(1+game.alma*0.06)*mod.modEvent;
  sonidos.latido();if(Math.random()<0.35)flotar(mod.verso);
});

document.addEventListener('keydown',e=>{
  if(e.ctrlKey&&e.key==='m'){
    mod.amada=prompt("Nombre de amada:",mod.amada)||mod.amada;
    mod.verso=prompt("Verso personal:",mod.verso)||mod.verso;
    mod.modDps=parseFloat(prompt("Mod DPS (1-3):",mod.modDps))||1;mod.modDps=Math.min(3,Math.max(1,mod.modDps));
    mod.modEvent=parseFloat(prompt("Mod Eventos (1-2):",mod.modEvent))||1;mod.modEvent=Math.min(2,Math.max(1,mod.modEvent));
    save();location.reload();
  }
});

if(game.aurum>=77777 && !localStorage.getItem('prestige')){
  if(confirm(`1310 horas forjadas en Red Mountain.\n¿Ascender tu alma eterna con ${mod.amada}?`)){
    game.alma++;localStorage.setItem('alma',game.alma);
    game={aurum:0,latidos:0,dps:0,alma:game.alma,off:Date.now(),eventos:0,quests:quests};
    upgrades.forEach(u=>{u.o=0;u.c*=1.3;});
    sonidos.prestige();
    flotar(`Ascenso a ${game.alma} almas — ${mod.amada} te guía`);
    log(`ASCENSO: Alma elevada a ${game.alma} en Tel Fyr`);
    localStorage.removeItem('prestige');
  }
  localStorage.setItem('prestige','true');
}

ui();requestAnimationFrame(loop);
</script>
</body>
</html>