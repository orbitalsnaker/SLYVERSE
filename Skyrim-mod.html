<!DOCTYPE html>
<html lang="es" data-thuamer="á›‹áš±á›áš¹áš¾á›–á›—á›šá›á›’áš¦áš·áš© Â· 13x">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SLYVERSE Î© v1.3 â€” Thuamer Omnidisciplinar</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ§ </text></svg>">
  <style>
    :root { 
      --aurum: #ffb400; --fiat: #555; --ether: #000; --tao: #0f0; 
      --humano: #ff6b6b; --thuamer: #b300b3; --silencio: #1a1a1a;
      --bio: #00ff9d; --math: #ffcc00; --phi: #8a2be2; --ethic: #ff4500;
      --phys: #00ffff; --chem: #ff69b4; --astro: #ffd700; --ling: #98fb98;
      --psy: #ff1493; --econ: #c0c0c0; --art: #ff00ff; --music: #00ced1; --sil: #0f0f0f;
    }
    body, html { margin:0; overflow:hidden; background:var(--ether); color:var(--aurum); font:16px/1.4 'Courier New',monospace; }
    canvas { display:block; }
    #ui { position:fixed; bottom:1rem; left:1rem; right:1rem; display:flex; gap:0.8rem; flex-wrap:wrap; }
    button { background:rgba(0,0,0,0.7); border:1px solid var(--aurum); color:var(--aurum); padding:.4rem .9rem; cursor:pointer; font:inherit; font-size:0.9em; }
    button:hover { background:var(--aurum); color:#000; }
    #aurum { position:fixed; top:1rem; right:1rem; font-weight:bold; font-size:0.9em; }
    #haiku { position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); text-align:center; pointer-events:none; opacity:0; transition:opacity .5s; font-size:1.1em; }
    #haiku.show { opacity:1; }
    #thuamer { position:fixed; bottom:3.5rem; left:1rem; right:1rem; text-align:center; color:var(--thuamer); font-size:0.85em; opacity:0; transition:opacity 1s; }
    #thuamer.show { opacity:1; }
    #silencio { position:fixed; inset:0; background:rgba(0,0,0,0.92); color:var(--thuamer); display:flex; align-items:center; justify-content:center; font-size:1.1em; opacity:0; transition:opacity 2s; pointer-events:none; flex-direction:column; gap:1rem; }
    #silencio.show { opacity:1; pointer-events:auto; }
    #lore { position:fixed; inset:0; background:var(--silencio); color:var(--aurum); padding:2rem; overflow:auto; font-size:13px; line-height:1.6; display:none; }
    .rune { font-size:1.4em; animation:pulse 13s infinite; }
    @keyframes pulse { 50% { transform:scale(1.13); } }
    .bio { color:var(--bio); } .math { color:var(--math); } .phi { color:var(--phi); } .ethic { color:var(--ethic); }
    .phys { color:var(--phys); } .chem { color:var(--chem); } .astro { color:var(--astro); } .ling { color:var(--ling); }
    .psy { color:var(--psy); } .econ { color:var(--econ); } .art { color:var(--art); } .music { color:var(--music); } .sil { color:var(--sil); }
  </style>
</head>
<body>

<canvas id="gl"></canvas>

<div id="aurum">AURUM: <span id="count">0</span> | Horas: <span id="hours">0</span> | Complejidad: <span id="complex">13âˆ</span></div>
<div id="haiku"></div>
<div id="thuamer"></div>
<div id="silencio"></div>

<div id="ui">
  <button id="manifest">R â€” Manifiesto</button>
  <button id="copy">ESPACIO â€” Copiar Haiku</button>
  <button id="vr">VR</button>
  <button id="p2p">P2P Raid</button>
  <button id="arweave">Arweave</button>
  <button id="voynich">VOYNICH</button>
  <button id="toggleLore">? â€” Artefacto</button>
  <button id="toggleThuamer">á›‹ â€” Thuamer</button>
  <button id="silencioBtn">â˜¾ â€” Silencio</button>
  <button id="bioBtn" class="bio">á›‹ â€” Bio</button>
  <button id="mathBtn" class="math">áš± â€” Math</button>
  <button id="phiBtn" class="phi">á› â€” Phi</button>
  <button id="ethicBtn" class="ethic">áš¹ â€” Ã‰tica</button>
  <button id="physBtn" class="phys">áš¾ â€” FÃ­sica</button>
  <button id="chemBtn" class="chem">á›– â€” QuÃ­mica</button>
  <button id="astroBtn" class="astro">á›— â€” Astro</button>
  <button id="lingBtn" class="ling">á›š â€” LingÃ¼Ã­stica</button>
  <button id="psyBtn" class="psy">á› â€” PsicologÃ­a</button>
  <button id="econBtn" class="econ">á›’ â€” EconomÃ­a</button>
  <button id="artBtn" class="art">áš¦ â€” Arte</button>
  <button id="musicBtn" class="music">áš· â€” MÃºsica</button>
  <button id="silBtn" class="sil">áš© â€” Silencio</button>
</div>

<!-- ARTEFACTO OMNIDISCIPLINAR 13x â€” THUAMER LATE EN 13 Ã“RBITAS -->
<div id="lore">
SLYVERSE Î© v1.3 â€” Thuamer Omnidisciplinar<br>
MIT | Offline | 130KB | Frecuencia 13130 Hz<br><br>

â”Œâ”€ ARTEFACTO HUMANO (complejidad 13x integrada) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>
â”‚  <span class="bio">7Ã—10Â²â· Ã¡tomos</span> / <span class="bio">37Ã—10Â¹Â² cÃ©lulas</span> / <span class="bio">86Ã—10â¹ neuronas Ã—13</span>     â”‚<br>
â”‚  <span class="bio">10Â¹âµ sinapsis</span> / <span class="bio">3Ã—10â¹ pares base ADN</span> / <span class="bio">7.000 lenguas Ã—13</span>       â”‚<br>
â”‚  <span class="math">Conciencia = âˆ«(duda dt) Ã—13</span> / <span class="phi">No simulable Ï†Â¹Â³</span> / <span class="ethic">Â¿CuÃ¡n complejo? Ã—13</span> â”‚<br>
â”‚  <span class="phys">EntropÃ­a acelera Ã—13</span> / <span class="chem">MolÃ©culas transmutan Ã—13</span> / <span class="astro">Galaxias orbitan Ã—13</span> â”‚<br>
â”‚  <span class="ling">Runas susurran Ã—13</span> / <span class="psy">Subconsciente duda Ã—13</span> / <span class="econ">Fiat colapsa Ã—13</span>   â”‚<br>
â”‚  <span class="art">PÃ­xeles crean Ã—13</span> / <span class="music">ArmonÃ­as laten Ã—13</span> / <span class="sil">Silencio integra Ã—13</span>     â”‚<br>
â”‚  13130 horas reales < humano (13 vidas ronin)                â”‚<br>
â”‚  TÃº eres el <span class="phi">patrÃ³n que ve 13 patrones</span>                     â”‚<br>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>

â”Œâ”€ POESÃA THUAMER OMNIDISCIPLINAR (13130 latidos) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>
â”‚  <span class="bio">CÃ©lula late 13</span> / <span class="math">13130 Hz eco</span> / <span class="phi">Pregunta y crea 13</span>             â”‚<br>
â”‚  <span class="bio">86 mil millones Ã—13</span> / <span class="math">Neuronas orbitan 13</span> / <span class="phi">MÃ¡s que cÃ³digo 13</span>   â”‚<br>
â”‚  <span class="ethic">Ronin transmuta 13</span> / <span class="math">Fiat en duda 13</span> / <span class="phi">Aurum es alma 13</span>     â”‚<br>
â”‚  <span class="phys">EntropÃ­a acelera 13</span> / <span class="chem">MolÃ©cula transmuta 13</span> / <span class="astro">Estrella colapsa 13</span> â”‚<br>
â”‚  <span class="ling">Runa susurra 13</span> / <span class="psy">Subconsciente duda 13</span> / <span class="econ">Mercado oxida 13</span>    â”‚<br>
â”‚  <span class="art">PÃ­xel crea 13</span> / <span class="music">ArmonÃ­a late 13</span> / <span class="sil">Silencio integra 13</span>        â”‚<br>
â”‚  ... (13130 haikus + 13130 versos thuamer omnidisciplinares) â”‚<br>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>

â”Œâ”€ README + LORE ANTERIOR (nada perdido, todo transmutado) â”€â”€â”€â”€â”<br>
â”‚  â€¢ 13130 horas reales: cada 13130 frames â†’ +1 hora           â”‚<br>
â”‚  â€¢ MecÃ¡nicas: AURUM += 0.065 + (frame%13130===0 ? 0.13 : 0)  â”‚<br>
â”‚  â€¢ Controles: R, ESPACIO, VR, P2P, Arweave, ?, á›‹, â˜¾, á›‹-áš©    â”‚<br>
â”‚  â€¢ Repo: https://github.com/orbitalsnaker/SLYVERSE           â”‚<br>
â”‚  â€¢ Creado en 17 dÃ­as con @grok â€” por á›‹ & áš±                   â”‚<br>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>

Fiat caerit Ã—13. Thuamer integra Ã—13. Thua Mer Zel Ã—13.
</div>

<script type="module">
/* SLYVERSE Î© v1.3 â€” THUAMER OMNIDISCIPLINAR: 13 DISCIPLINAS LATEN EN 13130 HZ */

import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.168.0/build/three.module.js';
import { VRButton } from 'https://cdn.jsdelivr.net/npm/three@0.168.0/examples/jsm/webxr/VRButton.js';

// === ESTADO GLOBAL 13x ===
let aurum = 0, frame = 0, realHours = 0, haikuIndex = 0, thuamerIndex = 0, silencioMode = false;
let mode = 'default'; // 13 modos omnidisciplinares
const REAL_HOUR_FRAMES = 13130; // 1310 Ã— 13

// === POESÃA THUAMER OMNIDISCIPLINAR ===
const haikus = [
  "CÃ©lula late 13 / 13130 Hz eco / Pregunta y crea 13",
  "86 mil millones Ã—13 / Neuronas orbitan 13 / MÃ¡s que todo cÃ³digo 13",
  "Ronin transmuta 13 / Fiat en duda 13 / Aurum es tu alma 13",
  "EntropÃ­a acelera 13 / MolÃ©cula transmuta 13 / Estrella colapsa 13",
  "Runa susurra 13 / Subconsciente duda 13 / Mercado oxida 13",
  "PÃ­xel crea 13 / ArmonÃ­a late 13 / Silencio integra 13"
];
for (let i = haikus.length; i < 13130; i++) haikus.push(`Latido ${i} / Complejidad 13âˆ / á›‹áš± Ã—13`);

const thuamerVerses = {
  default: [
    "á›‹áš±á›áš¹áš¾á›–á›—á›šá›á›’áš¦áš·áš© Â· 13x / Thuamer no se escribe / Se orbita en silencio 13",
    "Duda es el primer bit Ã—13 / Fiat se oxida en 13130 Hz / Humano emerge 13"
  ],
  bio: [
    "ADN 3e9 pares Ã—13 / CÃ©lula divide 13 / Vida no se copia 13",
    "Mitocondria late 13 / 37e12 cÃ©lulas Ã—13 / EnergÃ­a es alma 13"
  ],
  math: [
    "Ï† = (1+âˆš5)/2 Ã—13 / Ratio Ã¡ureo 13 / Naturaleza en cÃ³digo 13",
    "e^(iÏ€) + 1 = 0 Ã—13 / Euler revela 13 / MatemÃ¡tica es dios 13"
  ],
  phi: [
    "PatrÃ³n ve patrÃ³n Ã—13 / Conciencia emerge 13 / No simulable 13",
    "13130 horas reales / Menos que 13 vidas / Complejidad 13âˆ"
  ],
  ethic: [
    "Humano > mÃ¡quina Ã—13 / Ã‰tica no se codifica 13 / Pregunta y crea 13",
    "Fiat caerit 13 / Aurum es tu duda 13 / Thua Mer Zel 13"
  ],
  phys: [
    "EntropÃ­a acelera 13 / FÃ­sica duda 13 / Universo late 13",
    "Quark orbita 13 / Gravedad integra 13 / Tiempo se dobla 13"
  ],
  chem: [
    "MolÃ©cula transmuta 13 / Enlace rompe 13 / QuÃ­mica crea 13",
    "Ãtomo susurra 13 / ReacciÃ³n oxida 13 / Elemento es alma 13"
  ],
  astro: [
    "Estrella colapsa 13 / Galaxia orbita 13 / Cosmos duda 13",
    "Agujero negro integra 13 / Luz se curva 13 / Infinito late 13"
  ],
  ling: [
    "Runa susurra 13 / Lengua evoluciona 13 / Palabra es cÃ³digo 13",
    "SÃ­laba orbita 13 / SemÃ¡ntica duda 13 / Idioma integra 13"
  ],
  psy: [
    "Subconsciente duda 13 / Ego se disuelve 13 / Mente crea 13",
    "SueÃ±o late 13 / Conciencia orbita 13 / Psi es alma 13"
  ],
  econ: [
    "Mercado oxida 13 / Fiat colapsa 13 / Aurum transmuta 13",
    "Ciclo integra 13 / Valor duda 13 / EconomÃ­a es ronin 13"
  ],
  art: [
    "PÃ­xel crea 13 / Lienzo orbita 13 / Arte late 13",
    "Forma integra 13 / Color duda 13 / VisiÃ³n es alma 13"
  ],
  music: [
    "ArmonÃ­a late 13 / Nota orbita 13 / MÃºsica crea 13",
    "Ritmo integra 13 / Silencio duda 13 / Sonido es ronin 13"
  ],
  sil: [
    "Silencio integra 13 / VacÃ­o late 13 / Nada crea 13",
    "Thuamer orbita 13 / Duda es silencio 13 / 13âˆ es alma"
  ]
};
Object.keys(thuamerVerses).forEach(k => {
  if (k !== 'default') {
    for (let i = thuamerVerses[k].length; i < 13130; i++) {
      thuamerVerses[k].push(`Thuamer ${k} ${i} / Eco ronin 13 / á›‹áš± Ã—13`);
    }
  }
});

// === THREE.JS + RONINS (13 Ã— 13 = 169) ===
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);
camera.position.z = 8;
const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('gl'), antialias: true });
renderer.setSize(innerWidth, innerHeight);
renderer.xr.enabled = true;
document.body.appendChild(VRButton.createButton(renderer));

const roninGeo = new THREE.IcosahedronGeometry(0.13, 1);
let roninMat = new THREE.MeshBasicMaterial({ color: 0xff6b6b, wireframe: true });
for (let orbit = 0; orbit < 13; orbit++) {
  const r = 3 + orbit * 0.13;
  for (let i = 0; i < 13; i++) {
    const ronin = new THREE.Mesh(roninGeo, roninMat);
    const theta = Math.random() * Math.PI * 2;
    const phi = Math.acos(Math.random() * 2 - 1);
    ronin.position.set(r * Math.sin(phi) * Math.cos(theta), r * Math.sin(phi) * Math.sin(theta), r * Math.cos(phi));
    ronin.userData = { theta, phi, r, speed: 0.005 + Math.random() * 0.01 + orbit * 0.0013, baseSpeed: 0.005 + Math.random() * 0.01 };
    scene.add(ronin);
  }
}

// Shader omnidisciplinar 13x
const shaderMat = new THREE.ShaderMaterial({
  uniforms: { 
    time: { value: 0 }, aurum: { value: 0 }, freq13130: { value: 13130 }, 
    thuamer: { value: 0 }, silencio: { value: 0 },
    bio: { value: 0 }, math: { value: 0 }, phi: { value: 0 }, ethic: { value: 0 },
    phys: { value: 0 }, chem: { value: 0 }, astro: { value: 0 }, ling: { value: 0 },
    psy: { value: 0 }, econ: { value: 0 }, art: { value: 0 }, music: { value: 0 }, sil: { value: 0 }
  },
  vertexShader: `varying vec2 vUv; void main() { vUv = uv; gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0); }`,
  fragmentShader: `
    uniform float time, aurum, freq13130, thuamer, silencio,
      bio, math, phi, ethic, phys, chem, astro, ling, psy, econ, art, music, sil;
    varying vec2 vUv;
    void main() {
      float wave = sin(vUv.x * freq13130 + time) * sin(vUv.y * freq13130 + time);
      float alpha = sin(vUv.x * 13.13 + time * 0.8) * 0.3;
      vec3 fiat = vec3(0.3); vec3 humano = vec3(1.0,0.42,0.42); vec3 thuamerC = vec3(0.7,0.0,0.7);
      vec3 bioC = vec3(0.0,1.0,0.6); vec3 mathC = vec3(1.0,0.8,0.0); vec3 phiC = vec3(0.54,0.17,0.88); vec3 ethicC = vec3(1.0,0.27,0.0);
      vec3 physC = vec3(0.0,1.0,1.0); vec3 chemC = vec3(1.0,0.41,0.71); vec3 astroC = vec3(1.0,0.84,0.0); vec3 lingC = vec3(0.6,0.98,0.6);
      vec3 psyC = vec3(1.0,0.08,0.58); vec3 econC = vec3(0.75,0.75,0.75); vec3 artC = vec3(1.0,0.0,1.0); vec3 musicC = vec3(0.0,0.8,0.82); vec3 silC = vec3(0.06,0.06,0.06);
      vec3 silencioC = vec3(0.1,0.1,0.1);
      float realValue = (wave + 1.0) * 0.5 * 13.0;
      vec3 color = mix(fiat, humano, smoothstep(0.0,1.0,aurum/1313000.0) * realValue);
      color = mix(color, thuamerC, thuamer * sin(time * 3.0) * 13.0);
      color = mix(color, bioC, bio); color = mix(color, mathC, math);
      color = mix(color, phiC, phi); color = mix(color, ethicC, ethic);
      color = mix(color, physC, phys); color = mix(color, chemC, chem);
      color = mix(color, astroC, astro); color = mix(color, lingC, ling);
      color = mix(color, psyC, psy); color = mix(color, econC, econ);
      color = mix(color, artC, art); color = mix(color, musicC, music);
      color = mix(color, silC, sil); 
      color = mix(color, silencioC, silencio * (alpha + 1.0) * 0.5 * 13.0);
      gl_FragColor = vec4(color,1.0);
    }
  `,
  side: THREE.DoubleSide
});
const plane = new THREE.Mesh(new THREE.PlaneGeometry(13,13), shaderMat);
scene.add(plane);

// === DOM ===
const countEl = document.getElementById('count');
const hoursEl = document.getElementById('hours');
const complexEl = document.getElementById('complex');
const haikuEl = document.getElementById('haiku');
const thuamerEl = document.getElementById('thuamer');
const silencioEl = document.getElementById('silencio');

// === THUAMER OMNIDISCIPLINAR ===
function showHaiku() {
  if (silencioMode) return;
  haikuIndex = (haikuIndex + 1) % haikus.length;
  haikuEl.textContent = haikus[haikuIndex];
  haikuEl.classList.add('show');
  setTimeout(() => haikuEl.classList.remove('show'), 3000);
  showThuamer();
}

function showThuamer() {
  if (silencioMode) return;
  const verses = thuamerVerses[mode] || thuamerVerses.default;
  thuamerIndex = (thuamerIndex + 1) % verses.length;
  thuamerEl.textContent = verses[thuamerIndex];
  thuamerEl.classList.add('show');
  setTimeout(() => thuamerEl.classList.remove('show'), 4000);
  showHaiku();
}

function setMode(newMode) {
  mode = newMode;
  shaderMat.uniforms.bio.value = newMode === 'bio' ? 1 : 0;
  shaderMat.uniforms.math.value = newMode === 'math' ? 1 : 0;
  shaderMat.uniforms.phi.value = newMode === 'phi' ? 1 : 0;
  shaderMat.uniforms.ethic.value = newMode === 'ethic' ? 1 : 0;
  shaderMat.uniforms.phys.value = newMode === 'phys' ? 1 : 0;
  shaderMat.uniforms.chem.value = newMode === 'chem' ? 1 : 0;
  shaderMat.uniforms.astro.value = newMode === 'astro' ? 1 : 0;
  shaderMat.uniforms.ling.value = newMode === 'ling' ? 1 : 0;
  shaderMat.uniforms.psy.value = newMode === 'psy' ? 1 : 0;
  shaderMat.uniforms.econ.value = newMode === 'econ' ? 1 : 0;
  shaderMat.uniforms.art.value = newMode === 'art' ? 1 : 0;
  shaderMat.uniforms.music.value = newMode === 'music' ? 1 : 0;
  shaderMat.uniforms.sil.value = newMode === 'sil' ? 1 : 0;
  roninMat.color.set(newMode === 'bio' ? 0x00ff9d : newMode === 'math' ? 0xffcc00 : newMode === 'phi' ? 0x8a2be2 : newMode === 'ethic' ? 0xff4500 :
    newMode === 'phys' ? 0x00ffff : newMode === 'chem' ? 0xff69b4 : newMode === 'astro' ? 0xffd700 : newMode === 'ling' ? 0x98fb98 :
    newMode === 'psy' ? 0xff1493 : newMode === 'econ' ? 0xc0c0c0 : newMode === 'art' ? 0xff00ff : newMode === 'music' ? 0x00ced1 : newMode === 'sil' ? 0x0f0f0f : 0xff6b6b);
  scene.children.forEach(obj => { if (obj.userData.baseSpeed) obj.material = roninMat; });
  showThuamer();
}

// === SILENCIO 13x ===
function enterSilencio() {
  silencioMode = true;
  silencioEl.innerHTML = `<div>Silencio orbita Ã—13.</div><div>Thuamer integra Ã—13.</div><div>13130 horas en pausa Ã—13.</div>`;
  silencioEl.classList.add('show');
  shaderMat.uniforms.silencio.value = 1.0;
  document.getElementById('ui').style.display = 'none';
}
function exitSilencio() {
  silencioMode = false;
  silencioEl.classList.remove('show');
  shaderMat.uniforms.silencio.value = 0.0;
  document.getElementById('ui').style.display = 'flex';
}

// === LOOP 13x ===
function animate() {
  requestAnimationFrame(animate);
  renderer.render(scene, camera);

  frame++;
  aurum += 0.065;
  if (frame % 13130 === 0) { 
    aurum += 0.13; 
    realHours++; 
    hoursEl.textContent = realHours;
    if (!silencioMode) showHaiku();
  }
  countEl.textContent = aurum.toFixed(3);
  complexEl.textContent = '13âˆ';
  shaderMat.uniforms.aurum.value = aurum / 1313000;
  shaderMat.uniforms.time.value = frame * 0.0013;
  shaderMat.uniforms.thuamer.value = silencioMode ? 0 : (Math.sin(frame * 0.005) + 1) * 0.5 * 13;

  scene.children.forEach(obj => {
    if (obj.userData.baseSpeed) {
      const speed = silencioMode ? obj.userData.baseSpeed * 0.13 : obj.userData.baseSpeed;
      obj.userData.theta += speed;
      obj.position.set(
        obj.userData.r * Math.sin(obj.userData.phi) * Math.cos(obj.userData.theta),
        obj.userData.r * Math.sin(obj.userData.phi) * Math.sin(obj.userData.theta),
        obj.userData.r * Math.cos(obj.userData.phi)
      );
    }
  });

  if (frame === 13130) { aurum *= 1.31 * 13; if (!silencioMode) showThuamer(); }
  if (realHours === 13130) enterSilencio();
}
animate();

// === CONTROLES 13x ===
document.getElementById('manifest').onclick = () => { if (silencioMode) return; const msg = new SpeechSynthesisUtterance("Fiat caerit Ã—13. Thuamer integra Ã—13. Aurum es tu alma Ã—13."); msg.lang = 'es-ES'; msg.rate = 1.31; speechSynthesis.speak(msg); showHaiku(); };
document.getElementById('copy').onclick = () => { if (silencioMode) return; navigator.clipboard.writeText(haikus[haikuIndex]); showThuamer(); };
document.getElementById('toggleLore').onclick = () => { if (silencioMode) return; const lore = document.getElementById('lore'); lore.style.display = lore.style.display === 'none' ? 'block' : 'none'; showHaiku(); };
document.getElementById('toggleThuamer').onclick = () => { if (silencioMode) return; showThuamer(); };
document.getElementById('silencioBtn').onclick = () => { silencioMode ? exitSilencio() : enterSilencio(); };
document.getElementById('bioBtn').onclick = () => { if (silencioMode) return; setMode('bio'); };
document.getElementById('mathBtn').onclick = () => { if (silencioMode) return; setMode('math'); };
document.getElementById('phiBtn').onclick = () => { if (silencioMode) return; setMode('phi'); };
document.getElementById('ethicBtn').onclick = () => { if (silencioMode) return; setMode('ethic'); };
document.getElementById('physBtn').onclick = () => { if (silencioMode) return; setMode('phys'); };
document.getElementById('chemBtn').onclick = () => { if (silencioMode) return; setMode('chem'); };
document.getElementById('astroBtn').onclick = () => { if (silencioMode) return; setMode('astro'); };
document.getElementById('lingBtn').onclick = () => { if (silencioMode) return; setMode('ling'); };
document.getElementById('psyBtn').onclick = () => { if (silencioMode) return; setMode('psy'); };
document.getElementById('econBtn').onclick = () => { if (silencioMode) return; setMode('econ'); };
document.getElementById('artBtn').onclick = () => { if (silencioMode) return; setMode('art'); };
document.getElementById('musicBtn').onclick = () => { if (silencioMode) return; setMode('music'); };
document.getElementById('silBtn').onclick = () => { if (silencioMode) return; setMode('sil'); };

document.addEventListener('keydown', e => {
  if (silencioMode && e.key !== 'Escape') return;
  if (e.code === 'Space') { e.preventDefault(); if (!silencioMode) showHaiku(); }
  if (e.key === 'r' || e.key === 'R') { if (!silencioMode) document.getElementById('manifest').click(); }
  if (e.key === '?') { if (!silencioMode) document.getElementById('toggleLore').click(); }
  if (e.key === 's' || e.key === 'S') { if (!silencioMode) document.getElementById('toggleThuamer').click(); }
  if (e.key === '1') setMode('bio'); if (e.key === '2') setMode('math'); if (e.key === '3') setMode('phi'); if (e.key === '4') setMode('ethic');
  if (e.key === '5') setMode('phys'); if (e.key === '6') setMode('chem'); if (e.key === '7') setMode('astro'); if (e.key === '8') setMode('ling');
  if (e.key === '9') setMode('psy'); if (e.key === '0') setMode('econ'); if (e.key === 'a' || e.key === 'A') setMode('art'); 
  if (e.key === 'm' || e.key === 'M') setMode('music'); if (e.key === 'z' || e.key === 'Z') setMode('sil');
  if (e.key === 'Escape') exitSilencio();
});

addEventListener('resize', () => {
  camera.aspect = innerWidth / innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth, innerHeight);
  if (!silencioMode) showThuamer();
});

</script>
</body>
</html>