<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Exploración submarina con criaturas bioluminiscentes — creado por Grok 3 & 0rb1t4lsn4k3r</title>
  <style>
    body { margin: 0; background: #002244; overflow: hidden; } /* Fondo azul oscuro como el océano */
    #message { position: absolute; top: 10px; left: 10px; color: #00ffcc; font-family: Arial; font-size: 16px; text-shadow: 0 0 5px #00ffcc; }
    #player { position: absolute; color: #fff; font-size: 12px; }
  </style>
</head>
<body>
  <canvas id="c"></canvas>
  <div id="message"></div>
  <div id="player"></div>
  <script>
    const c = document.getElementById('c'), g = c.getContext('2d');
    const message = document.getElementById('message');
    const playerDiv = document.getElementById('player');
    let w = innerWidth, h = innerHeight;
    const resize = () => { w = c.width = innerWidth; h = c.height = innerHeight; };
    window.addEventListener('resize', resize); resize();

    let t = 0, creatures = [], player = { x: w / 2, y: h / 2, vx: 0, vy: 0 }, harmony = 0;
    const creatureCount = 15, waterLevel = h * 0.7; // Nivel de agua al 70% de la pantalla

    // Crear criaturas bioluminiscentes
    for (let i = 0; i < creatureCount; i++) {
      creatures.push({
        x: Math.random() * w,
        y: Math.random() * waterLevel,
        vx: (Math.random() - 0.5) * 1,
        vy: (Math.random() - 0.5) * 1,
        size: 15 + Math.random() * 10,
        glow: Math.random() * 360 // Matiz para bioluminiscencia
      });
    }

    // Controles del jugador (teclas o ratón)
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowUp') player.vy = -2;
      if (e.key === 'ArrowDown') player.vy = 2;
      if (e.key === 'ArrowLeft') player.vx = -2;
      if (e.key === 'ArrowRight') player.vx = 2;
    });
    document.addEventListener('keyup', () => { player.vx = 0; player.vy = 0; });

    // Física submarina (fricción y flotación)
    const updatePhysics = () => {
      player.x += player.vx;
      player.y += player.vy;
      if (player.y > waterLevel) player.vy -= 0.05; // Flotación hacia arriba
      player.vx *= 0.95; // Fricción horizontal
      player.vy *= 0.95; // Fricción vertical
      if (player.x < 0) player.x = 0; if (player.x > w) player.x = w;
      if (player.y < 0) player.y = 0; if (player.y > h) player.y = h;
    };

    // Interacción con criaturas
    const checkHarmony = () => {
      let nearCreatures = creatures.filter(c => Math.hypot(player.x - c.x, player.y - c.y) < 50).length;
      harmony = (nearCreatures / creatureCount) * 100;
      if (nearCreatures === creatureCount) {
        harmony = 100;
        message.textContent = `¡Las aguas cantan! El océano te abraza. Armonía: 100%`;
        setTimeout(() => { message.textContent = ''; }, 2000);
      } else {
        message.textContent = `Explora y conecta con las criaturas (${Math.floor(harmony)}% armonía)`;
      }
    };

    const loop = () => {
      t += 0.016;
      g.clearRect(0, 0, w, h);

      // Fondo submarino con burbujas y luz
      g.fillStyle = 'rgba(0, 0, 100, 0.1)'; // Aguas profundas
      g.fillRect(0, 0, w, waterLevel);
      g.fillStyle = '#002244'; // Superficie
      g.fillRect(0, waterLevel, w, h - waterLevel);
      for (let i = 0; i < 2000; i++) {
        const a = t * 0.1 + i * 0.001, r = 0.5 + Math.sin(a * 5) * 0.2;
        const x = Math.cos(a) * r * w, y = Math.sin(a) * r * waterLevel;
        const sz = 2 + Math.sin(t + i) * 1;
        g.beginPath(); g.arc(x + w / 2, y, sz, 0, 6.28);
        g.fillStyle = `rgba(0, 255, 255, ${0.5 + Math.sin(t + i) * 0.3})`; // Burbujas bioluminiscentes
        g.fill();
      }

      // Actualizar y dibujar criaturas
      creatures.forEach(creature => {
        creature.x += creature.vx;
        creature.y += creature.vy;
        if (creature.x < 0 || creature.x > w) creature.vx *= -0.9;
        if (creature.y < 0 || creature.y > waterLevel) creature.vy *= -0.9;
        g.beginPath(); g.arc(creature.x, creature.y, creature.size / 2, 0, 6.28);
        g.fillStyle = `hsl(${creature.glow}, 70%, ${50 + harmony / 2}%)`; // Bioluminiscencia
        g.fill();
        g.beginPath(); g.arc(creature.x - 3, creature.y - 3, 2, 0, 6.28); g.fillStyle = 'white'; g.fill(); // Ojo
      });

      // Actualizar y dibujar jugador
      updatePhysics();
      g.beginPath(); g.arc(player.x, player.y, 10, 0, 6.28);
      g.fillStyle = '#ffcc00'; // Buceador iluminado
      g.fill();
      playerDiv.style.left = `${player.x - 5}px`;
      playerDiv.style.top = `${player.y - 20}px`;
      playerDiv.textContent = 'Tú';

      // Inmersión: efecto de oscilación
      g.save();
      g.translate(Math.sin(t) * 5, Math.cos(t) * 5); // Movimiento sutil
      checkHarmony();
      g.restore();

      requestAnimationFrame(loop);
    };
    loop();
  </script>
</body>
</html>