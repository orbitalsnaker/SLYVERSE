<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>BOAVERSE ∞ v1.4 — Abrazo eterno para absolutamente todos</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  :root{--text:#0ff;--bg:#000;--btn:#0ff;--btn-text:#000}
  body.dyslexia{font-family:'OpenDyslexic',sans-serif;letter-spacing:0.15em;line-height:1.8}
  body.deuteranopia{--text:#0ff;--btn:#00ffff}
  body.protanopia{--text:#00f0ff;--btn:#00f0ff}
  body.tritanopia{--text:#ff0;--btn:#ffff00}
  body.contrast-high{--text:#ff0;--btn:#ff0}
  body.contrast-ultra{--text:#fff;--btn:#fff}
  body{margin:0;background:var(--bg);color:var(--text);overflow:hidden;height:100dvh;display:flex;flex-direction:column;transition:all .5s}
  canvas{flex:1;background:var(--bg)}
  #ui,#acc,#shop,#chat{position:fixed;z-index:999;background:rgba(0,0,0,0.9);padding:12px;border:4px solid var(--text);font-size:19px;box-sizing:border-box}
  #ui{top:0;left:0;right:0;display:flex;justify-content:space-between;align-items:center}
  #acc{top:65px;left:10px;display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:8px}
  #shop{bottom:140px;right:10px;max-height:55vh;overflow-y:auto}
  #chat{bottom:0;left:0;right:0;display:flex;gap:10px;align-items:center;padding:15px}
  button,input{font-size:19px;padding:14px;border-radius:12px;border:3px solid var(--text);background:#000;color:var(--text)}
  button{background:var(--btn);color:var(--btn-text);cursor:pointer}
  .big{font-size:240% !important;padding:24px !important}
  .braille{font-family:monospace;font-size:38px;letter-spacing:10px;background:#000;color:#0ff;padding:20px;border:4px solid #0ff;border-radius:15px;position:fixed;bottom:150px;left:50%;transform:translateX(-50%);z-index:9999;display:none;white-space:pre}
  .braille.show{display:block}
  .sign{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:320px;z-index:9999;display:none;border:5px solid #0ff;border-radius:20px}
  @font-face{font-family:'OpenDyslexic';src:url('https://cdn.jsdelivr.net/gh/antijob/OpenDyslexic@latest/opendyslexic-regular.otf') format('opentype');}
  @media (prefers-reduced-motion:reduce){*{animation:none!important;transition:none!important}}
</style>
</head>
<body aria-live="polite">

<canvas id="c" tabindex="0" aria-label="Mundo BOAVERSE"></canvas>

<div id="ui" role="banner">
  <div>Jugadores: <b id="count" aria-live="polite">1</b> | <span id="biome" aria-live="polite">Abrazo Eterno</span></div>
  <div>BOAVERSE ∞ v1.4</div>
</div>

<div id="acc" role="region" aria-label="Accesibilidad">
  <button onclick="toggleContrast()">Contraste</button>
  <button onclick="toggleDyslexia()">Dislexia</button>
  <button onclick="cycleColorBlind()">Daltónico</button>
  <button onclick="toggleBig()">Grande</button>
  <button onclick="toggleSign()">Lengua signos</button>
  <button onclick="toggleBraille()">Braille</button>
  <button onclick="toggleVoice()">Voz</button>
  <button onclick="toggleSimple()">Simple</button>
</div>

<div id="shop" role="region" aria-label="Tienda cosmética (50% IA para diversidad funcional)">
  <h3>TIENDA DEL ABRAZO</h3>
  <button onclick="buy('dragón')">Sombrero Dragón · 0,10€</button>
  <button onclick="buy('abismo')">Casa Abismo · 0,20€</button>
  <button onclick="buy('boa')">Abrazo Boa · 0,05€</button>
  <button onclick="buy('aura')">Aura Dorada · 0,15€</button>
  <small>50% investigación IA accesibilidad · 50% 0rb1t4lsn4k3r</small>
</div>

<div id="chat">
  <input id="input" placeholder="Escribe o habla…" maxlength="120">
  <button onclick="send()">Enviar</button>
  <button onclick="startVoice()">Hablar</button>
</div>

<img id="sign" class="sign" alt="Lengua de signos animada">
<div id="braille" class="braille" aria-live="assertive"></div>

<script>
  const canvas=document.getElementById('c'),ctx=canvas.getContext('2d');
  canvas.width=innerWidth;canvas.height=innerHeight;window.onresize=()=>{canvas.width=innerWidth;canvas.height=innerHeight};

  // BRAILLE
  const brailleMap={'a':'⠁','b':'⠃','c':'⠉','d':'⠙','e':'⠑','f':'⠋','g':'⠛','h':'⠓','i':'⠊','j':'⠚','k':'⠅','l':'⠇','m':'⠍','n':'⠝','o':'⠕','p':'⠏','q':'⠟','r':'⠗','s':'⠎','t':'⠞','u':'⠥','v':'⠧','w':'⠺','x':'⠭','y':'⠽','z':'⠵',' ':'⠀','.':'⠲',',':'⠂','!':'⠖','?':'⠦','0':'⠴','1':'⠂','2':'⠆','3':'⠒','4':'⠲','5':'⠢','6':'⠖','7':'⠶','8':'⠦','9':'⠔'};
  function toBraille(t){return t.toLowerCase().split('').map(c=>brailleMap[c]||c).join('');}
  let brailleOn=false;function toggleBraille(){brailleOn=!brailleOn;document.getElementById('braille').classList.toggle('show',brailleOn);if(brailleOn)updateBraille("BOAVERSE INFINITO");}
  function updateBraille(t){if(brailleOn)document.getElementById('braille').textContent=toBraille(t);}

  // LENGUA DE SIGNOS (GIFs embebidos simples)
  const signs={"hola":"https://media.giphy.com/media/l0HlRnAWXxn0MhKLK/giphy.gif","gracias":"https://media.giphy.com/media/3o6fJ1O62Kp4GIDH7O/giphy.gif","abrazo":"https://media.giphy.com/media/5eyhBKLlWOo2P9dX7t/giphy.gif","amor":"https://media.giphy.com/media/3o7abB06u9bNzA8v8k/giphy.gif"};
  function showSign(word){const img=document.getElementById('sign');img.src=signs[word]||signs["hola"];img.style.display='block';setTimeout(()=>img.style.display='none',4000);}

  // ACCESIBILIDAD
  let contrast=0,dyslexia=false,cb=0,voice=false,simple=false;
  function toggleContrast(){contrast=(contrast+1)%3;document.body.className=['','contrast-high','contrast-ultra'][contrast];}
  function toggleDyslexia(){dyslexia=!dyslexia;document.body.classList.toggle('dyslexia',dyslexia);}
  function cycleColorBlind(){cb=(cb+1)%4;document.body.className=['','deuteranopia','protanopia','tritanopia'][cb];}
  function toggleBig(){document.querySelectorAll('button,input,#ui,#shop,#chat').forEach(e=>e.classList.toggle('big'));}
  function toggleSign(){showSign("abrazo");}
  function toggleVoice(){voice=!voice;speechSynthesis.speak(new SpeechSynthesisUtterance(voice?"Voz activada":"Voz desactivada"));}
  function toggleSimple(){simple=!simple;document.getElementById('shop').style.display=simple?'none':'block';}
  function speak(t){updateBraille(t);if(voice)speechSynthesis.speak(new SpeechSynthesisUtterance(t));}

  // COMPRA (50% IA accesibilidad)
  function buy(item){speak("Gracias por tu abrazo");window.open(`https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=ferry420oficial@gmail.com&item_name=BOAVERSE_${item}&amount=0.10&currency_code=EUR&custom=50%25_IA_accesibilidad`,'_blank');}

  // JUGADOR + LOOP
  let me={x:innerWidth/2,y:innerHeight/2,color:`hsl(${Math.random()*360},100%,60%)`};
  canvas.onclick=e=>{me.x=e.clientX;me.y=e.clientY;speak("Movido");}
  function loop(){
    ctx.fillStyle='rgba(0,0,30,0.05)';ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle=me.color;ctx.beginPath();ctx.arc(me.x,me.y,40,0,6.28);ctx.fill();
    requestAnimationFrame(loop);
  }
  loop();

  speak("La Boa te abraza con amor");showSign("abrazo");updateBraille("La Boa te abraza con amor");
</script>

<small style="position:fixed;bottom:5px;left:5px;opacity:0.8;color:#0ff">
  BOAVERSE ∞ v1.4 — 50% beneficios → IA para diversidad funcional · 100% inclusivo · Abrazo eterno gratis
</small>
</body>
</html>