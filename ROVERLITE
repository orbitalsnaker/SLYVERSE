<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>COBETE JACK PARSONS 666 v2 — BARRIO EDITION</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box}
  body{background:#000;color:#0f0;font-family:monospace;overflow:hidden;position:relative;height:100vh}
  .scan{pointer-events:none;position:fixed;top:0;left:0;width:100%;height:100%;
        background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,255,0,0.04) 2px,rgba(0,255,0,0.04) 4px);z-index:999}
  .p{position:fixed;background:rgba(0,0,0,0.92);border:3px solid #0f0;padding:12px;box-shadow:0 0 30px #0f0,0 0 50px #f00}
  .g{text-shadow:0 0 12px #0f0,0 0 25px #f00;color:#0ff;font-weight:bold}
  canvas{background:#000;border:2px solid #0f0}
  input{background:#000;border:2px solid #0f0;color:#0f0;width:100%;padding:10px;font-size:14px}
  #log{height:180px;overflow-y:auto;color:#0ff;font-size:11px;background:#000}
  #readme{position:fixed;top:0;left:0;width:100%;height:100%;background:#000;z-index:1000;overflow-y:auto;padding:20px;display:none}
  .close{color:#f00;font-size:40px;position:absolute;top:10px;right:20px;cursor:pointer}
  #instructions{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.95);border:2px solid #0f0;padding:20px;z-index:1001;color:#0f0}
  body.glitch{filter:invert(1) hue-rotate(180deg);transition:1s}
  body.ratio{animation:shake 0.5s;animation-iteration-count:3}
  @keyframes shake{0%{transform:translate(0,0)}25%{transform:translate(-5px,0)}50%{transform:translate(5px,0)}75%{transform:translate(-5px,0)}100%{transform:translate(0,0)}}
</style>
<script src="https://threejs.org/build/three.min.js"></script>
</head>
<body>

<div class="scan"></div>

<!-- README v2 — AHORA EN MODO BARRIO 100% -->
<div id="readme">
  <span class="close" onclick="document.getElementById('readme').style.display='none'">×</span>
  <pre style="color:#0f0;font-size:18px;text-align:center;margin:20px 0">
   _____ _____ _____ _____ _____ _____ 
  |     |     |  |  |     | __  |   __|
  |   --|  |  |  |  |  |  |    -|   __|
  |_____|_____|_____|_____|__|__|_____|
         JACK PARSONS 666 v2 — 666€
         BARRIO EDITION — COBETERIL SUPREMACY
  </pre>

  <div style="max-width:900px;margin:0 auto;color:#0f0;font-size:16px;line-height:1.9">
    <h1 style="color:#f00;text-align:center">MANIFIESTO COBETERIL v2 — PARA GENTE DEL BARRIO</h1>
    <p><b>¿Qué coño es un cobete?</b><br>
    Un cobete es un cohete, pero hecho por nosotros, los de abajo.  
    Cuesta <b>666 € exactos</b> (ni un euro más, ni un euro menos).  
    No explota nunca. Si explota, es que era un cohete disfrazado.</p>

    <p style="background:rgba(255,0,0,0.2);padding:15px;border-left:5px solid #f00">
    <b>REGLAS DEL BARRIO EN EL ESPACIO:</b><br>
    • El 70 % del platino y helio-3 que minamos vuelve al barrio.<br>
    • El 30 % es alquiler (porque hasta en la órbita hay caseros).<br>
    • Los nanorovers pesan 0,66 g cada uno → más pequeños que una china de hachís.<br>
    • Propulsión: levadura cabreada + flow callejero.<br>
    • Escudo térmico: puro odio a la NASA y a la ESA.<br>
    • Si falla, te devolvemos el orgullo multiplicado por dos.
    </p>

    <h2>NUEVOS COMANDOS CALLE (v2)</h2>
    • <b>barrio</b> → activa reparto vecinal (70 % pa’ la peña)<br>
    • <b>explosion</b> → te explica por qué los cobetes no explotan<br>
    • <b>spacex</b> / <b>blueorigin</b> / <b>nasa</b> → ratio + maldición gitana<br>
    • <b>estopa</b> → sample 8-bit de “La Raja de tu Falda”<br>
    • Los clásicos siguen: readme, 666, minar, orbitar, 3dview, maldicion corp…

    <p style="text-align:center;font-size:28px;margin-top:50px;color:#0f0;text-shadow:0 0 30px #0f0">
      EL ESPACIO ES DEL BARRIO<br>
      COBETERIL O MUERTE<br>
      666 € Y A TOMAR POR CULO LA ESA
    </p>
  </div>
</div>

<!-- INSTRUCCIONES DE VUELO -->
<div id="instructions">
  <span class="close" onclick="document.getElementById('instructions').style.display='none'">×</span>
  <pre style="color:#0f0;text-align:center">
W ↑  S ↓  A ←  D →  Q Pitch↑  E Pitch↓
ESC → salir del modo vuelo
Flow callejero máximo, rey.
  </pre>
</div>

<!-- PANEL PRINCIPAL -->
<div class="p g" style="top:5px;left:50%;transform:translateX(-50%);width:900px;text-align:center;font-size:16px;cursor:pointer" onclick="document.getElementById('readme').style.display='block'">
  <b>COBETE JACK PARSONS 666 v2 — BARRIO EDITION — 666€</b><br>
  <u>CLIC AQUÍ PA’ LEER EL MANIFIESTO DEL BARRIO</u>
</div>

<!-- HUD Y PANELES (igual que antes) -->
<div class="p" style="bottom:20px;right:20px;width:300px;height:180px">
  <div class="g">THRUST Ω — Propulsión eléctrica segura</div>
  <canvas id="thrust" width=280 height=60></canvas>
  <div id="level">166% — "Órbita legal y barrio-style"</div>
</div>

<div class="p" style="bottom:200px;right:20px;width:260px;height:260px">
  <div class="g">RADAR 666 — Nanorovers</div>
  <canvas id="radar" width=240 height=240></canvas>
</div>

<div class="p" style="top:80px;left:20px;width:560px;height:360px">
  <div class="g">COBETE CORE — 666€ BARRIO EDITION</div>
  <input id="cmd" placeholder=">> comando rey (barrio, estopa, spacex, explosion…)">
  <div id="log"></div>
</div>

<div class="p" style="top:80px;right:20px;width:420px;height:280px">
  <div class="g">NANOROVERS 666 — 0.66g cada uno — 66 unidades</div>
  <canvas id="nanocam" width=400 height=200></canvas>
  <div id="nanoinfo">66 nanorovers desplegados — minería segura legal</div>
</div>

<div class="p" style="bottom:20px;left:20px;width:300px;height:180px">
  <div class="g">ECO Ω — Levadura + Na + H₂O (Segura)</div>
  <canvas id="eco" width=280 height=60></canvas>
  <div id="eco_level">133% — "Sin explosión, puro flow orbital"</div>
</div>

<div class="p g" style="top:5px;right:20px;width:360px;">
  BOM 666 Ω<br>
  <span id="bom">Precio final: <b>666€</b><br><span id="reparto">Reparto barrio: 0%</span></span>
</div>

<div class="p" style="bottom:220px;left:20px;width:300px;height:300px">
  <div class="g">AVIONICA 666 — Gauges seguros</div>
  <canvas id="avionics" width=280 height=280></canvas>
</div>

<div class="p" style="top:450px;left:20px;width:560px;height:200px;display:none" id="traj_panel">
  <div class="g">TRAYECTORIA 666 — Altitud vs Tiempo</div>
  <canvas id="trajectory" width=540 height=180></canvas>
</div>

<div class="p" style="top:450px;right:20px;width:420px;height:280px;display:none" id="3d_panel">
  <div class="g">3D VIEW 666 — Cobete en órbita</div>
  <div id="threejs_container" style="width:400px;height:200px"></div>
</div>

<script>
// Variables
let thrust = 166, eco = 133, ang = 0, platino = 0, helio = 0;
let nanorovers = 66, minando = false, repartoActivo = false;
let miningRate = 0.5;
const log = document.getElementById("log");
let scene, camera, renderer, rocketMesh;

// Audio 8-bit Estopa (base64 porque somos barrio y no pagamos royalties)
const estopaSound = new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXJzn6NqtMQUdZ7zw3pQ+B");

function logMsg(msg) {
  log.innerHTML += msg + "<br>";
  log.scrollTop = log.scrollHeight;
}

// Nuevos comandos barrio
function handleCommand(cmd) {
  cmd = cmd.toLowerCase().trim();
  logMsg(">> " + cmd);

  if (cmd === "readme") {
    document.getElementById('readme').style.display = 'block';

  } else if (cmd === "barrio") {
    repartoActivo = true;
    document.getElementById("reparto").innerHTML = "Reparto barrio: <b>70% ACTIVADO</b>";
    logMsg("70 % del platino y helio-3 vuelve al barrio. ¡Pa’ la peña!");

  } else if (cmd === "explosion") {
    logMsg("Los cobetes NO explotan. Explosión = fracaso corporativo. Aprende, pijo.");

  } else if (["spacex","blueorigin","nasa","esa","jeffbezos","elonmusk"].includes(cmd)) {
    document.body.classList.add("glitch","ratio");
    logMsg("RATIO + MALDICIÓN GITANA activada contra " + cmd.toUpperCase());
    logMsg("☠️☠️☠️ 666 años de mala suerte orbital ☠️☠️☠️");
    setTimeout(() => document.body.classList.remove("glitch","ratio"), 6000);

  } else if (cmd === "estopa") {
    estopaSound.currentTime = 0;
    estopaSound.play();
    logMsg("♪♫ La raja de tu falda… ♫♪ (8-bit barrio version)");

  } else if (cmd === "minar") {
    minando = true;
    logMsg("Minando platino y helio-3… pa’l barrio o pa’l alquiler, según actives 'barrio'");

  // Comandos clásicos (sin romper nada)
  } else if (cmd === "666") { logMsg("Precio sagrado: 666€. Ni un céntimo más.");
  } else if (cmd === "orbitar") { document.getElementById('instructions').style.display='block'; modoVuelo=true; logMsg("Modo vuelo activado. W pa’ arriba, cabrón.");
  } else if (cmd === "3dview") { document.getElementById('3d_panel').style.display='block'; initThreeJS();
  } else if (cmd === "maldicion corp") { document.body.classList.add('glitch'); logMsg("Glitch eterno para los corporativos"); setTimeout(()=>document.body.classList.remove('glitch'),5000);
  } else {
    logMsg("Comando desconocido, rey. Prueba 'barrio', 'estopa' o 'spacex' pa’ ver magia.");
  }
}

// Entrada de comandos
document.getElementById('cmd').addEventListener('keypress', e => {
  if (e.key === 'Enter') {
    handleCommand(e.target.value);
    e.target.value = '';
  }
});

// Minería + reparto barrio
setInterval(() => {
  if (minando) {
    platino += miningRate;
    helio += miningRate / 2;
    let mensaje = `Platino +${miningRate.toFixed(2)} → ${platino.toFixed(2)}g | Helio-3 +${(miningRate/2).toFixed(2)} → ${helio.toFixed(2)}g`;
    if (repartoActivo) mensaje += " → 70 % PA’ EL BARRIO";
    logMsg(mensaje);
  }
}, 2000);

// Todo el resto de animaciones (gauges, radar, three.js…) igual que en v1
function initThreeJS() {
  const container = document.getElementById('threejs_container');
  if (!container || container.hasChildNodes()) return;
  scene = new THREE.Scene(); scene.background = new THREE.Color(0x000000);
  camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
  renderer = new THREE.WebGLRenderer({ antialias: true });
  renderer.setSize(container.clientWidth, container.clientHeight);
  container.appendChild(renderer.domElement);
  const geometry = new THREE.CylinderGeometry(0.5, 0.5, 2, 32);
  const material = new THREE.MeshBasicMaterial({ color: 0x00ff00, wireframe: true });
  rocketMesh = new THREE.Mesh(geometry, material);
  scene.add(rocketMesh);
  camera.position.z = 5;
  function animate() { requestAnimationFrame(animate); rocketMesh.rotation.y += 0.02; renderer.render(scene, camera); }
  animate();
}

function animateGauges() {
  // Thrust
  const t = document.getElementById('thrust').getContext('2d');
  t.fillStyle = '#000'; t.fillRect(0,0,280,60);
  t.fillStyle = '#0f0'; t.fillRect(0,0,(thrust/200)*280,60);

  // Eco
  const e = document.getElementById('eco').getContext('2d');
  e.fillStyle = '#000'; e.fillRect(0,0,280,60);
  e.fillStyle = '#0f0'; e.fillRect(0,0,(eco/200)*280,60);

  // Radar
  const r = document.getElementById('radar').getContext('2d');
  r.clearRect(0,0,240,240);
  r.strokeStyle = '#0f0'; r.beginPath(); r.arc(120,120,100,0,Math.PI*2); r.stroke();
  for(let i=0;i<nanorovers;i++){let a=ang+i*0.1; r.fillStyle='#0f0'; r.fillRect(120+Math.cos(a)*80,120+Math.sin(a)*80,4,4);}
  ang += 0.02;

  requestAnimationFrame(animateGauges);
}
animateGauges();
</script>
</body>
</html>