<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>BOAVERSE ∞ v1 — Abrazo eterno + MODDING PARA TODOS</title>
  <meta name="description" content="Metaverso infinito accesible AAA: Abrazo eterno, modding vivo para todos, multi P2P, biomas procedurales. Gratis en HTML único. Transparente: Premium opcional – 90% ONGs diversidad funcional ♿ | 10% Dev PayPal: ferry420oficial@gmail.com. Auto-idioma ES/EN.">
  <style>
    :root{--text:#0ff;--bg:#000;--btn:#0ff;--btn-text:#000;--acc:#0ff}
    body.dyslexia{font-family:'OpenDyslexic',sans-serif;letter-spacing:0.15em;line-height:1.8}
    body.deuteranopia{--text:#0ff;--btn:#00ffff;--acc:#00ffff}
    body.protanopia{--text:#00f0ff;--btn:#00f0ff;--acc:#00f0ff}
    body.tritanopia{--text:#ff0;--btn:#ffff00;--acc:#ffff00}
    body.contrast-high{--text:#ff0;--bg:#000;--btn:#ff0;--acc:#ff0}
    body.contrast-ultra{--text:#fff;--bg:#000;--btn:#fff;--acc:#fff}
    body{margin:0;background:var(--bg);color:var(--text);overflow:hidden;height:100dvh;display:flex;flex-direction:column;font-family:system-ui;transition:all .5s}
    canvas{flex:1;background:var(--bg)}
    #ui,#acc,#shop,#chat,#multi,#readme,#blockBtn,#modding,#support{position:fixed;z-index:999;background:rgba(0,0,0,0.94);border:4px solid var(--acc);padding:12px;border-radius:12px;box-sizing:border-box;font-size:18px}
    #ui{top:0;left:0;right:0;display:flex;justify-content:space-between;align-items:center}
    #acc{top:70px;left:10px;display:grid;grid-template-columns:repeat(auto-fit,minmax(110px,1fr));gap:8px}
    #shop{bottom:150px;right:10px;max-width:320px}
    #multi{bottom:150px;left:10px;max-width:420px;display:none}
    #multi.show{display:block}
    #readme{bottom:60px;left:50%;transform:translateX(-50%);max-width:90%;max-height:70vh;overflow:auto;display:none;padding:20px}
    #readme.show{display:block}
    #blockBtn{bottom:100px;left:50%;transform:translateX(-50%);display:none}
    #blockBtn.show{display:block}
    #modding{bottom:10px;right:10px;max-width:380px;display:none;border:6px solid #f0f}
    #modding.show{display:block}
    #support{bottom:150px;right:10px;max-width:320px;display:none;border:6px solid #0ff}
    #support.show{display:block}
    #chat{bottom:0;left:0;right:0;display:flex;gap:10px;align-items:center;padding:15px;border-top:4px solid var(--acc)}
    button,input,textarea{font-size:18px;padding:12px;border-radius:10px;border:2px solid var(--acc);background:#000;color:var(--text);cursor:pointer}
    button{background:var(--btn);color:var(--btn-text)}
    button.mod{background:#f0f;color:#000}
    .big{font-size:240% !important;padding:24px !important}
    .braille{font-family:monospace;font-size:36px;background:#000;color:#0ff;padding:15px;border:4px solid #0ff;border-radius:12px;position:fixed;bottom:170px;left:50%;transform:translateX(-50%);z-index:999;display:none;white-space:pre}
    .braille.show{display:block}
    .sign{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:380px;z-index:1001;display:none;border:8px solid #0ff;border-radius:20px}
    .bigEmoji{font-size:120px;position:absolute;pointer-events:none;animation:emoji 2s ease-out forwards}
    @keyframes emoji{0%{transform:translateY(0) scale(0)}100%{transform:translateY(-300px) scale(2);opacity:0}}
    @font-face{font-family:'OpenDyslexic';src:url('https://cdn.jsdelivr.net/gh/antijob/OpenDyslexic@latest/opendyslexic3-regular.woff2') format('woff2');}
    @media (prefers-reduced-motion:reduce){*{animation:none!important;transition:none!important}}
    @media (max-width:600px) { #ui, #acc { font-size:14px; } button { padding:8px 10px; } }
  </style>
</head>
<body aria-live="polite">

<canvas id="c" tabindex="0" aria-label="BOAVERSE ∞ v1 - metaverso infinito accesible + modding para todos"></canvas>

<div id="ui" role="banner">
  <div>Jugadores: <b id="count" aria-live="polite">1</b> · <span id="biome">Abrazo Eterno</span></div>
  <div>
    <button onclick="toggleMulti()">Multi</button>
    <button onclick="toggleReadme()">README</button>
    <button onclick="toggleModding()" class="mod">MODDING</button>
    <button onclick="toggleSupport()">Soporte ♿</button>
    BOAVERSE ∞ v1
  </div>
</div>

<div id="acc" role="region" aria-label="Accesibilidad total">
  <button onclick="toggleContrast()">Contraste</button>
  <button onclick="toggleDyslexia()">Dislexia</button>
  <button onclick="cycleColorBlind()">Daltónico</button>
  <button onclick="toggleBig()">Grande</button>
  <button onclick="toggleSign()">Signos</button>
  <button onclick="toggleBraille()">Braille</button>
  <button onclick="toggleVoice()">Voz</button>
  <button onclick="toggleVoiceControl()">Control Voz</button>
  <button onclick="toggleSwitch()">1 Tecla</button>
  <button onclick="toggleSimple()">Simple</button>
</div>

<div id="blockBtn"><button onclick="blockNearest()" class="big">Bloquear tóxico cercano</button></div>

<div id="modding">
  <h3 style="color:#f0f">MODDING EN VIVO (para todos – accesible ♿)</h3>
  <button onclick="addBiome()" class="mod">+ Nuevo bioma</button>
  <button onclick="spawnItem()" class="mod">Spawn item aleatorio</button>
  <button onclick="rainHearts()" class="mod">Lluvia de corazones</button>
  <button onclick="changeShape()" class="mod">Cambiar mi forma</button>
  <button onclick="pasteMod()" class="mod">Pegar mod (voz/1 tecla)</button>
  <textarea id="modCode" placeholder="// Escribe o pega JS aquí (ej: player.color='rainbow')\n// Se ejecuta al instante y para todos en la sala – seguro y amoroso\n// Voz lee código · 1 tecla navega · braille resultado" rows="6"></textarea>
  <button onclick="runMod()" class="mod big">EJECUTAR MOD</button>
  <small style="color:#f0f">Accesible: voz lee el código · 1 tecla navega · braille muestra resultado · mods seguros (sandboxed)</small>
</div>

<div id="support">
  <h4>Soporte Opcional ♿</h4>
  <p>¡BOAVERSE es gratis forever! Premium opcional desbloquea: biomas ∞, mods avanzados, multi P2P ilimitado, accesibilidad extra (e.g., IA voz mods).<br><strong>Split transparente:</strong> 90% ONGs diversidad funcional ♿ (e.g., Plena Inclusión, Fundación ONCE – impacto real en accesibilidad, comunidades mudas/neurodiversas) | 10% Dev PayPal: ferry420oficial@gmail.com (sostenibilidad indie para más abrazos eternos).</p>
  <button onclick="paySupport()">Desbloquear Premium<br>1,99 USD o lo que sientas → 90% ONGs ♿ + 10% Dev</button>
  <p><small>O acumula 1313 abrazos para gratis. ¡Moddea amor, no pagues si no puedes – el eterno es para todos! ❤️</small></p>
</div>

<!-- UI resto igual (multi, shop, readme, chat…) -->
<div id="multi">…</div>
<div id="shop">…</div>
<div id="readme">…</div>
<div id="chat"><input id="msg" placeholder="Chat…" maxlength="100"><button onclick="sendChat()">Enviar</button></div>

<img id="sign" class="sign" alt="Lengua de signos animada">
<div id="braille" class="braille" aria-live="assertive"></div>
<div id="switchHint" style="position:fixed;bottom:180px;left:50%;transform:translateX(-50%);background:#ff0;color:#000;font-weight:bold;display:none;z-index:999;padding:10px;border-radius:10px">→ Pulsa ESPACIO / ENTER</div>

<small style="position:fixed;bottom:5px;left:5px;opacity:0.8;color:#0ff;z-index:999">
  BOAVERSE ∞ v1 · 100% accesible · modding real para todos · solo amor y código · un archivo HTML
</small>
</body>
</html>