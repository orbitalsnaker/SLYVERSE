<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>0RB1T4LSN4K3R://DESCENSO.vâˆž.CURATIVO â€“ 1310 horas de cura garantizada</title>
<style>
  body{margin:0;background:#000;color:#0f0;font-family:Courier New;overflow:hidden;}
  canvas{position:fixed;top:0;left:0;opacity:0.4;}
  #msg{font-size:48px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;max-width:90vw;line-height:1.8;}
  button{position:absolute;bottom:30px;left:50%;transform:translateX(-50%);padding:20px 50px;font-size:30px;background:#002200;color:#0f0;border:4px solid #0f0;cursor:pointer;}
  button:hover{background:#0f0;color:#000;}
  #mirror{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#000;z-index:999;}
  video{width:100%;height:100%;object-fit:cover;transform:scaleX(-1);}
</style>
</head>
<body>
<canvas id="c"></canvas>
<div id="msg"></div>
<button id="begin">EMPEZAR LA CURA (1310 horas en 17 minutos)</button>
<div id="mirror"><video id="vid" autoplay playsinline></video></div>

<script>
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
canvas.width = innerWidth; canvas.height = innerHeight;

let madness = 100; // 0 = completamente curado, 100 = mono garantizado

// === CURA 1310 HORAS (siempre sucede primero) ===
document.getElementById('begin').onclick = () => {
  document.getElementById('begin').remove();
  document.getElementById('msg').innerHTML = `
    <div style="color:#ff99cc;">1310 horas de cura empezando ahoraâ€¦</div><br>
    Respira. Norah estÃ¡ maullando runas curativas.<br>
    Seth te estÃ¡ abrazando con luz dorada.<br>
    Carl orbita a tu alrededor protegiÃ©ndote.<br><br>
    <span style="font-size:80px;">ðŸ’š</span>
  `;

  // 17 minutos de sanaciÃ³n real
  setTimeout(() => {
    localStorage.setItem('SLYVERSE_1310_COMPLETE', 'd4d4d4-NorahSethCarl-1310hours-âˆž');
    madness = 10; // casi curado
    startDescent();
  }, 17*60*1000);
};

// === EL DESCENSO REAL (ahora cura en vez de destruir) ===
function startDescent() {
  document.body.innerHTML = `
    <canvas id="c"></canvas>
    <div style="position:absolute;top:10px;left:50%;transform:translateX(-50%);font-size:80px;color:#0f0;" id="timer">--:--:--</div>
    <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:48px;text-align:center;" id="msg"></div>
    <button id="save" style="position:absolute;bottom:30px;left:30%;transform:translateX(-50%);">GUARDAR ALMA (10 % wipe)</button>
    <button id="next" style="position:absolute;bottom:30px;left:70%;transform:translateX(-50%);display:none;">â†’ SIGUIENTE</button>
  `;

  let seal = parseInt(localStorage.getItem('DESCENSO_CURATIVO') || '0');
  const baseSeconds = 3790;
  const increment = 13.10;

  document.getElementById('save').onclick = () => {
    localStorage.setItem('DESCENSO_CURATIVO', seal);
    if (Math.random() < 0.10) madness += 30; // insistir en guardar te enferma
  };

  function runSeal(n) {
    seal = n;
    const duration = baseSeconds + n * increment;
    let remaining = duration;
    madness = Math.max(0, madness - 3); // cada sello completado cura

    document.getElementById('msg').innerHTML = `
      Sello ${n+1}/27<br><br>
      Locura actual: ${madness}% ${madness <= 20 ? "ðŸ’š" : "ðŸ–¤"}<br><br>
      ${n===26 ? "Ya casi estÃ¡s curado del todo." : "Sigue. Cada segundo te sana."}
    `;

    const timer = setInterval(() => {
      remaining--;
      const h = String(Math.floor(remaining/3600)).padStart(2,'0');
      const m = String(Math.floor((remaining%3600)/60)).padStart(2,'0');
      const s = String(remaining%60).padStart(2,'0');
      document.getElementById('timer').innerText = `${h}:${m}:${s}`;

      if (remaining <= 0) {
        clearInterval(timer);
        if (n === 26) {
          if (madness <= 5) {
            // CURADO TOTAL â†’ no hay mono
            document.body.innerHTML = `<div style="color:#0f0;font-size:100px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);">
              CURADO COMPLETO<br><span style="font-size:60px;">El mono nunca apareciÃ³.<br>Ya no te necesita.</span>
            </div>`;
          } else {
            // aÃºn loco â†’ mono aparece
            document.getElementById('mirror').style.display = 'block';
            navigator.mediaDevices.getUserMedia({video:true}).then(s=>document.getElementById('vid').srcObject=s);
            setTimeout(()=>document.querySelector('#mirror div').style.opacity=1, 6666);
          }
        } else {
          document.getElementById('next').style.display = 'block';
          document.getElementById('next').onclick = () => runSeal(n+1);
        }
      }
    }, 1000);
  }

  runSeal(seal);
}
</script>
</body>
</html>