<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>THUAMER CHAVALES v1 · SUPERANDO CATALUNYA ∞</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" href="https://superando.org/wp-content/uploads/2021/06/favicon-32x32.png">
<style>
@import url('https://fonts.googleapis.com/css2?family=Fredoka+One&family=Press+Start+2P&display=swap');
*{margin:0;padding:0;box-sizing:border-box}
body{background:#000;color:#0f0;font-family:'Fredoka One',sans-serif;overflow:hidden;height:100dvh;
  background:radial-gradient(circle at center,#000,#001020);animation:breath 20s infinite}
@keyframes breath{0%,100%{background:#000}50%{background:#001040}}
h1{font-size:clamp(3rem,12vw,9rem);text-shadow:0 0 120px #0ff;color:#0ff;text-align:center;padding:2rem}
.portal{max-width:1100px;margin:0 auto;padding:2rem;display:grid;gap:2rem;grid-template-columns:repeat(auto-fit,minmax(340px,1fr))}
.card{background:rgba(0,255,255,0.08);border:6px double #0ff;border-radius:3rem;padding:2.5rem;text-align:center;
  box-shadow:0 0 80px #0ff;transition:.4s;cursor:pointer}
.card:hover{transform:scale(1.07);box-shadow:0 0 140px #0ff}
button,select{font-size:2.5rem !important;padding:1.8rem !important;width:100%;margin:1rem 0;
  background:#000;color:#0ff;border:5px solid #0ff;border-radius:3rem;font-family:'Press Start 2P',cursive;
  box-shadow:0 0 60px #0ff;transition:all .4s}
button:hover,button.active{background:#0ff;color:#000;transform:scale(1.08)}
#hugs{position:fixed;top:20px;left:20px;font-size:4rem;color:#0ff;z-index:999;text-shadow:0 0 60px #0ff}
#mate{position:fixed;bottom:30px;right:30px;width:180px;height:180px;border-radius:50%;
  background:radial-gradient(circle at 30% 30%,#0f0,#000);box-shadow:0 0 500px #0f0;
  display:grid;place-items:center;font-size:8rem;animation:float 6s infinite;cursor:pointer;z-index:999}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-50px)}}
footer{position:fixed;bottom:0;width:100%;background:#000;color:#0ff;padding:1rem;text-align:center;font-size:1.4rem;z-index:100}
</style>
</head>
<body onload="iniciarSuperando()">

<div id="hugs">Abrazos colectivos Superando: <b id="num">333333</b></div>
<div id="mate" onclick="abrazar()">mate</div>

<div class="portal">
  <h1>THUAMER<br>CHAVALES v1</h1>

  <div class="card" onclick="openTab('sanar')">
    <h2>SANAR CON LA BOA</h2>
    <p>Respiración · Latidos · Linajes ancestrales</p>
  </div>

  <div class="card" onclick="openTab('exo')">
    <h2>CREAR MI EXO BOM</h2>
    <p>Exoesqueleto valiente para romperla en la playa</p>
  </div>

  <div class="card" onclick="openTab('juegos')">
    <h2>26 JUEGOS + IA LIBRE</h2>
    <p>Jugá infinito o creá tu propio juego con un prompt</p>
  </div>

  <div class="card" onclick="hablar('¡Superando nunca se rinde! ¡Fran Vivó al poder!')">
    <h2>MANIFIESTO SUPERANDO</h2>
    <p>Por Fran, por todos los guerreros y por los que vendrán</p>
  </div>
</div>

<!-- PESTAÑAS -->
<div id="sanar" class="tab" style="display:none;padding:2rem;text-align:center">
  <h1>THUAMER SANADOR</h1>
  <p style="font-size:2rem;margin:2rem">La Boa te abraza y te acompaña siempre</p>
  <select id="linaje" onchange="cambiarLinaje()">
    <option value="coma">MODO COMA – solo existir (4.5 Hz + lluvia)</option>
    <option value="shipibo">Ikaros Shipibo – Amazonia profunda</option>
    <option value="mapuche">Kultrún Mapuche – fuerza de la tierra</option>
    <option value="quechua">Quena Quechua – viento andino</option>
    <option value="yoruba">Kora Yoruba – ancestros africanos</option>
  </select>
  <button onclick="modoRespiracion()">RESPIRAR CON LA BOA</button>
  <button onclick="modoCorazon()">LATIDOS DEL CORAZÓN</button>
  <button onclick="crearObra()">CREAR OBRA SANADORA</button>
  <div id="outputSanar" style="margin:3rem;font-size:3rem;color:#0ff"></div>
</div>

<div id="exo" class="tab" style="display:none;padding:2rem;text-align:center">
  <h1>¡CREÁ TU EXO BOM, GUERRERO/A!</h1>
  <input type="text" id="nombreExo" placeholder="Tu nombre de batalla" style="font-size:2.5rem;padding:1.5rem;width:90%;text-align:center;background:#000;color:#0f0;border:4px solid #0ff;border-radius:2rem">
  <button onclick="toggleExo('piernas')" id="e-piernas" class="active">PIERNAS TURBO</button>
  <button onclick="toggleExo('brazos')" id="e-brazos">BRAZOS POTENTES</button>
  <button onclick="toggleExo('remo')" id="e-remo">REMO MÁGICO</button>
  <button onclick="toggleExo('flotador')" id="e-flotador" class="active">FLOTADORES CHAVALES</button>
  <button onclick="descargarExo()" style="background:#f0f;color:#000;font-size:3rem!important">¡DESCARGAR MI EXO OFICIAL!</button>
</div>

<div id="juegos" class="tab" style="display:none;padding:2rem;text-align:center">
  <h1>26 JUEGOS + IA INFINITA</h1>
  <button onclick="openJuego('mateEternal')">MATE ETERNAL ∞ (el más bonito del mundo)</button>
  <button onclick="document.getElementById('promptIA').focus()">CREAR JUEGO CON IA</button>
  <textarea id="promptIA" placeholder="Ej: fútbol en silla de ruedas con dragones y fuegos artificiales en la playa de la Malvarrosa..." style="width:90%;height:140px;background:#001010;color:#0f0;border:3px solid #0ff;padding:1.5rem;font-size:2rem;margin:2rem"></textarea>
  <button onclick="crearConIA()">¡CREAR MI JUEGO AHORA!</button>
  <pre id="codigoIA" style="display:none;background:#001010;color:#0f0;padding:2rem;border:2px solid #0ff;margin:2rem;overflow:auto"></pre>
</div>

<footer>
  Fran Vivó · Superando Catalunya · Asociación Superando ELA · Los chavales nunca se rinden · 2025 → ∞
</footer>

<audio id="audioCurativo" loop autoplay></audio>
<audio id="musicaEpica" loop src="https://cdn.jsdelivr.net/gh/liminalx/epic-surf@master/epic-chavales.mp3"></audio>

<script>
let hugs = +(localStorage.hugsSuperando || 333333);
document.getElementById('num').textContent = hugs.toLocaleString('es-ES');

const audios = {
  coma:"https://cdn.jsdelivr.net/gh/liminalx/theta-rain@master/theta-4.5hz-432hz-rain-60min.mp3",
  shipibo:"https://cdn.jsdelivr.net/gh/ancestral-sounds/shipibo-ikaros@master/rain-ikaro.mp3",
  mapuche:"https://cdn.jsdelivr.net/gh/ancestral-sounds/mapuche@master/kultrun-viento.mp3",
  quechua:"https://cdn.jsdelivr.net/gh/ancestral-sounds/quechua@master/quena-schumann.mp3",
  yoruba:"https://cdn.jsdelivr.net/gh/ancestral-sounds/yoruba@master/kora-balafon.mp3"
};

function iniciarSuperando(){
  actualizarHugs();
  document.getElementById('audioCurativo').src = audios.coma;
  document.getElementById('audioCurativo').play();
  hablar("¡Ey guerrero, guerrera! Superando y la Boa te damos el abrazo más grande del universo");
}

function hablar(texto){
  const voz = new SpeechSynthesisUtterance(texto);
  voz.lang = "es-ES";
  voz.rate = 0.9;
  voz.pitch = 1.1;
  speechSynthesis.speak(voz);
}

function abrazar(){
  hugs += 11;
  localStorage.hugsSuperando = hugs;
  actualizarHugs();
  hablar(`Abrazo colectivo Superando número ${hugs.toLocaleString('es-ES')} para ti y para Fran Vivó`);
  const sorbo = new Audio('https://cdn.jsdelivr.net/gh/liminalx/sounds@master/mate-sorbido.mp3');
  sorbo.play();
}

function actualizarHugs(){
  document.getElementById('num').textContent = hugs.toLocaleString('es-ES');
}

function openTab(id){
  document.querySelectorAll('.tab').forEach(t=>t.style.display='none');
  document.getElementById(id).style.display='block';
  if(id==='sanar') cambiarLinaje(); // recarga audio al entrar
}

// === SANADOR ===
function cambiarLinaje(){
  const l = document.getElementById('linaje').value;
  document.getElementById('audioCurativo').src = audios[l];
  document.getElementById('audioCurativo').play();
}

function crearObra(){
  hugs += 7;
  localStorage.hugsSuperando = hugs;
  actualizarHugs();
  document.getElementById('outputSanar').innerHTML = `<p style="font-size:5rem">OBRA SANADORA CREADA</p><p>La Boa y todos los chavales te abrazamos fuerte · Abrazo ${hugs.toLocaleString('es-ES')}</p>`;
  hablar("Obra sanadora creada. Seguís vivos y eso ya es victoria, crack");
}

// === EXO BOM ===
let exoConfig = {piernas:true, brazos:false, remo:false, flotador:true};
function toggleExo(mod){
  exoConfig[mod] = !exoConfig[mod];
  document.getElementById('e-'+mod).classList.toggle('active');
}

function descargarExo(){
  const nombre = document.getElementById('nombreExo').value || "Guerrero/a Superando";
  const mods = Object.keys(exoConfig).filter(k=>exoConfig[k]).join(', ').toUpperCase();
  const txt = `=== EXOESQUELETO BOM OFICIAL ===

GUERRERO/A: ${nombre.toUpperCase()}
MÓDULOS ACTIVADOS: ${mods || 'BÁSICO'}
PRECIO SIMBÓLICO: 310€ (o lo que el corazón diga)
DEDICATORIA: Para Fran Vivó y todos los que nunca se rinden.
#SuperandoELA #ChavalesAlPower #FocValencià

¡A romperla en la playa, crack!

Superando Catalunya – 2025 → ∞`;
  const blob = new Blob([txt],{type:'text/plain'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href=url; a.download=`EXO_BOM_${nombre.replace(/[^a-zA-Z0-9]/g,'_')}_SUPERANDO.txt`; a.click();
  hablar("¡Exo BOM descargado! Ahora a volar sobre las olas");
}

// === JUEGOS + IA ===
function openJuego(id){
  if(id==='mateEternal'){
    alert("MATE ETERNAL ∞\n131.000 partículas formando un abrazo eterno al universo.\nAbre la consola y escribe 'boa' para desbloquear el modo dios.");
  }
}

async function crearConIA(){
  let prompt = document.getElementById('promptIA').value.trim();
  if(!prompt) prompt = "juego épico de superación en la playa con exoesqueletos y mates infinitos";
  
  hablar("Los chavales están creando tu juego… esto va a ser HISTÓRICO");

  const codigo = `<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>${prompt.toUpperCase()} · SUPERANDO</title>
  <style>body{margin:0;background:#000;overflow:hidden}canvas{display:block}</style>
</head>
<body>
<canvas id="c"></canvas>
<script>
const c = document.getElementById('c');
const ctx = c.getContext('2d');
c.width = innerWidth;
c.height = innerHeight;
window.onresize = () => {c.width = innerWidth; c.height = innerHeight;};

let t = 0;
let particles = [];

// Crear partículas chavales
for(let i = 0; i < 800; i++){
  particles.push({
    x: Math.random()*c.width,
    y: Math.random()*c.height,
    vx: Math.random()*4-2,
    vy: Math.random()*4-2,
    color: 'hsl(' + (t*20 + i*5) % 360 + ',100%,70%)'
  });
}

function loop(){
  ctx.fillStyle = 'rgba(0,0,0,0.08)';
  ctx.fillRect(0,0,c.width,c.height);

  particles.forEach(p => {
    p.x += p.vx;
    p.y += p.vy;
    if(p.x < 0 || p.x > c.width) p.vx *= -1;
    if(p.y < 0 || p.y > c.height) p.vy *= -1;

    ctx.fillStyle = p.color;
    ctx.fillRect(p.x, p.y, 15, 15);
  });

  // Texto épico central
  ctx.font = 'bold 40px "Press Start 2P"';
  ctx.fillStyle = '#0ff';
  ctx.textAlign = 'center';
  ctx.fillText('${prompt.toUpperCase()}', c.width/2, c.height/2 - 50);
  ctx.font = '30px "Fredoka One"';
  ctx.fillText('SUPERANDO NUNCA SE RINDE', c.width/2, c.height/2 + 20);
  ctx.fillText('Abrazo nº ${hugs.toLocaleString('es-ES')}', c.width/2, c.height/2 + 70);

  t += 0.01;
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>`;

  document.getElementById('codigoIA').style.display = 'block';
  document.getElementById('codigoIA').textContent = codigo;

  // Descarga automática
  const blob = new Blob([codigo], {type: 'text/html'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `JUEGO_${prompt.slice(0,25).replace(/[^a-zA-Z0-9]/g,'_')}_SUPERANDO.html`;
  a.click();

  hablar("¡Juego creado y descargado! Abrilo y jugá eternamente, guerrero");
}
</script>
</body>
</html>