<!DOCTYPE html>
<html lang="es" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>SLYVERSE Inmobiliaria‚Ñ¢ v2</title>
  <meta name="description" content="Sube tu casa en 3D. La comunidad la avala con $SLY. Sin comisiones."/>
  <link rel="manifest" href="data:application/manifest+json,{'name':'SLY Inmo v2','short_name':'SLYv2','start_url':'.','display':'standalone','background_color':'#0a0a0a','theme_color':'#00ff41','icons':[{'src':'data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè†</text></svg>','sizes':'192x192','type':'image/svg+xml'}]}"/>
  <style>
    :root{--bg:#0a0a0a;--fg:#00ff41;--acc:#ff00ff;--gray:#333}
    [data-theme=light]{--bg:#fafafa;--fg:#000;--acc:#00aaff;--gray:#ccc}
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:system-ui,sans-serif;background:var(--bg);color:var(--fg);overflow:hidden;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center}
    canvas{width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1}
    .ui{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;flex-direction:column;align-items:center;justify-content:space-between;padding:1rem;pointer-events:none}
    .top, .bottom{pointer-events:auto;text-align:center}
    h1{font-size:1.4rem;margin:0.5rem;color:var(--acc);text-shadow:0 0 10px var(--acc)}
    p{font-size:0.85rem;max-width:90%;margin:0.5rem 0}
    button{background:var(--acc);color:var(--bg);border:none;padding:0.7rem 1.3rem;border-radius:50px;font-weight:bold;margin:0.5rem;cursor:pointer;pointer-events:auto;font-size:0.8rem}
    .toggle{position:absolute;top:1rem;right:1rem;background:var(--gray);color:var(--fg);padding:0.5rem;border-radius:50%}
    .snake{position:absolute;bottom:1rem;font-size:1.8rem;animation:slither 3s infinite}
    .input-group{margin:0.5rem 0}
    input, textarea{width:100%;max-width:300px;padding:0.5rem;background:var(--gray);color:var(--fg);border:none;border-radius:8px;font-size:0.8rem}
    @keyframes slither{0%,100%{transform:translateX(0)}50%{transform:translateX(10px)}}
    @media (max-width:600px){h1{font-size:1.1rem}p{font-size:0.75rem}button{font-size:0.7rem}}
  </style>
</head>
<body>
  <canvas id="c"></canvas>
  <div class="ui">
    <div class="top">
      <h1>SLYVERSE Inmobiliaria‚Ñ¢ v2</h1>
      <p>Sube tu casa ‚Ä¢ Comunidad avala con $SLY ‚Ä¢ Sin comisiones</p>
    </div>
    <div class="bottom">
      <div class="input-group">
        <input id="title" placeholder="T√≠tulo (ej: Mi loft en BCN)" />
        <textarea id="desc" placeholder="Descripci√≥n breve..." rows="2"></textarea>
        <input type="file" id="glb" accept=".glb,.gltf" />
      </div>
      <button onclick="submitProperty()">Subir Propiedad</button>
      <button onclick="viewGallery()">Galer√≠a Cocreada</button>
      <button onclick="toggleTheme()">Toggle</button>
      <div class="snake">Snake</div>
    </div>
  </div>

  <script>
    const c = document.getElementById('c'), ctx = c.getContext('2d');
    let w, h, t = 0, rot = 0;
    const properties = JSON.parse(localStorage.getItem('slyProperties') || '[]');
    let currentView = 'form';

    function resize(){w=c.width=window.innerWidth;h=c.height=window.innerHeight}
    resize(); window.addEventListener('resize',resize);

    function project(x,y,z){
      const scale = 200 / (200 + z + 300);
      return {x: w/2 + x*scale, y: h/2 + y*scale, s:scale};
    }

    function drawProperty(prop){
      const {x,y,z,s,c} = prop;
      const verts = [
        {x:x-s,y:y-s,z:z-s}, {x:x+s,y:y-s,z:z-s}, {x:x+s,y:y+s,z:z-s}, {x:x-s,y:y+s,z:z-s},
        {x:x-s,y:y-s,z:z+s}, {x:x+s,y:y-s,z:z+s}, {x:x+s,y:y+s,z:z+s}, {x:x-s,y:y+s,z:z+s}
      ];
      const faces = [[0,1,2,3],[4,5,6,7],[0,1,5,4],[1,2,6,5],[2,3,7,6],[3,0,4,7]];
      faces.forEach((f,i)=>{
        const v = f.map(i=>project(verts[i].x, verts[i].y, verts[i].z));
        ctx.fillStyle = c + Math.floor(100 + 155 * (verts[f[0]].z + s*2)/(s*4)).toString(16).padStart(2,'0');
        ctx.beginPath();
        v.forEach((p,j)=>j===0?ctx.moveTo(p.x,p.y):ctx.lineTo(p.x,p.y));
        ctx.closePath(); ctx.fill();
      });
    }

    function animate(){
      ctx.fillStyle = 'rgba(10,10,10,0.1)'; ctx.fillRect(0,0,w,h);
      rot += 0.01; t++;
      properties.forEach((p,i)=>{
        const r = rot + i * 0.5;
        p.x = Math.sin(r) * 3; p.y = Math.cos(r * 1.2) * 2; p.z = Math.cos(r * 0.8) * 3;
        drawProperty(p);
      });
      requestAnimationFrame(animate);
    }
    animate();

    function submitProperty(){
      const file = document.getElementById('glb').files[0];
      if(!file) return alert("Sube un modelo .glb");
      const reader = new FileReader();
      reader.onload = e => {
        const prop = {
          title: document.getElementById('title').value || 'Casa sin t√≠tulo',
          desc: document.getElementById('desc').value || '',
          glb: e.target.result,
          sly: 0,
          x:0,y:0,z:0,s:1,c:'#00ff41'
        };
        properties.push(prop);
        localStorage.setItem('slyProperties', JSON.stringify(properties));
        alert(`Propiedad subida! Avala con $SLY en la galer√≠a.`);
      };
      reader.readAsDataURL(file);
    }

    function viewGallery(){
      alert(`Galer√≠a: ${properties.length} propiedades. Pr√≥ximamente: votaci√≥n con $SLY.`);
    }

    function toggleTheme(){
      const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
      document.documentElement.setAttribute('data-theme', isDark ? 'light' : 'dark');
    }

    // Konami = 10 $SLY gratis
    let k = []; const konami = '38,38,40,40,37,39,37,39,66,65';
    document.addEventListener('keydown', e=>{
      k.push(e.keyCode);
      if(k.toString().indexOf(konami)>=0){
        alert("Snake 10 $SLY gratis! Usa en la galer√≠a para avalar.");
        k=[];
      }
    });
  </script>
</body>
</html>