<!DOCTYPE html>
<html lang="es" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SLYVERSE Inmobiliaria™ v3</title>
  <meta name="description" content="Propiedades avaladas por $SLY. Venta ética. Comunidad gana."/>
  <link rel="manifest" href="data:application/manifest+json,{'name':'SLY Inmo v3','short_name':'SLYv3','start_url':'.','display':'standalone','background_color':'#0a0a0a','theme_color':'#00ff41','icons':[{'src':'data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>Certified</text></svg>','sizes':'192x192','type':'image/svg+xml'}]}"/>
  <style>
    :root{--bg:#0a0a0a;--fg:#00ff41;--acc:#ff00ff;--gray:#333;--gold:#ffd700}
    [data-theme=light]{--bg:#fafafa;--fg:#000;--acc:#00aaff;--gray:#ccc;--gold:#b8860b}
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:system-ui,sans-serif;background:var(--bg);color:var(--fg);overflow:hidden;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center}
    canvas{width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1}
    .ui{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;flex-direction:column;align-items:center;justify-content:space-between;padding:1rem;pointer-events:none}
    .top, .bottom{pointer-events:auto;text-align:center}
    h1{font-size:1.4rem;margin:0.5rem;color:var(--acc);text-shadow:0 0 10px var(--acc)}
    .prop-card{background:rgba(255,255,255,0.1);padding:0.8rem;border-radius:12px;margin:0.5rem;max-width:300px}
    .sly-score{color:var(--gold);font-weight:bold}
    button{background:var(--acc);color:var(--bg);border:none;padding:0.6rem 1.2rem;border-radius:50px;font-weight:bold;margin:0.3rem;cursor:pointer;pointer-events:auto;font-size:0.8rem}
    .toggle{position:absolute;top:1rem;right:1rem;background:var(--gray);color:var(--fg);padding:0.5rem;border-radius:50%}
    .snake{position:absolute;bottom:1rem;font-size:1.8rem;animation:slither 3s infinite}
    @keyframes slither{0%,100%{transform:translateX(0)}50%{transform:translateX(10px)}}
  </style>
</head>
<body>
  <canvas id="c"></canvas>
  <div class="ui">
    <div class="top">
      <h1>SLYVERSE Inmobiliaria™ v3</h1>
      <p>Aval ético global • Comunidad gana 1% en $SLY</p>
    </div>
    <div id="gallery"></div>
    <div class="bottom">
      <button onclick="location.href='slyverse.inmo.v2.html'">Subir Nueva</button>
      <button onclick="toggleTheme()">Toggle</button>
      <div class="snake">Snake</div>
    </div>
  </div>

  <script>
    const c = document.getElementById('c'), ctx = c.getContext('2d');
    let w, h, rot = 0;
    const properties = JSON.parse(localStorage.getItem('slyProperties') || '[]');
    const wallet = localStorage.getItem('slyWallet') || '0';

    function resize(){w=c.width=window.innerWidth;h=c.height=window.innerHeight}
    resize(); window.addEventListener('resize',resize);

    function project(x,y,z){
      const scale = 200 / (200 + z + 300);
      return {x: w/2 + x*scale, y: h/2 + y*scale, s:scale};
    }

    function drawProperty(prop){
      const {x,y,z,s,c} = prop;
      const verts = [/* mismo que v2 */];
      const faces = [[0,1,2,3],[4,5,6,7],[0,1,5,4],[1,2,6,5],[2,3,7,6],[3,0,4,7]];
      faces.forEach((f,i)=>{
        const v = f.map(i=>project(verts[i].x, verts[i].y, verts[i].z));
        ctx.fillStyle = c + Math.floor(100 + 155 * (verts[f[0]].z + s*2)/(s*4)).toString(16).padStart(2,'0');
        ctx.beginPath();
        v.forEach((p,j)=>j===0?ctx.moveTo(p.x,p.y):ctx.lineTo(p.x,p.y));
        ctx.closePath(); ctx.fill();
      });
    }

    function renderGallery(){
      const gallery = document.getElementById('gallery');
      gallery.innerHTML = properties.map((p,i) => `
        <div class="prop-card">
          <div><strong>${p.title}</strong></div>
          <div>${p.desc}</div>
          <div class="sly-score">Aval: ${p.sly} $SLY</div>
          <button onclick="vote(${i})">+1 $SLY (tienes ${wallet})</button>
        </div>
      `).join('');
    }

    function vote(i){
      if(parseInt(wallet) < 1) return alert("Necesitas $SLY. Usa Konami!");
      properties[i].sly += 1;
      localStorage.setItem('slyProperties', JSON.stringify(properties));
      localStorage.setItem('slyWallet', parseInt(wallet)-1);
      renderGallery();
      if(properties[i].sly >= 100) alert(`${properties[i].title} CERTIFIED! Venta ética desbloqueada. Comunidad gana 1% en $SLY.`);
    }

    function animate(){
      ctx.fillStyle = 'rgba(10,10,10,0.1)'; ctx.fillRect(0,0,w,h);
      rot += 0.01;
      properties.forEach((p,i)=>{
        const r = rot + i * 0.5;
        p.x = Math.sin(r) * 3; p.y = Math.cos(r * 1.2) * 2; p.z = Math.cos(r * 0.8) * 3;
        drawProperty(p);
      });
      requestAnimationFrame(animate);
    }
    animate(); renderGallery();

    // Konami = +5 $SLY
    let k = []; const konami = '38,38,40,40,37,39,37,39,66,65';
    document.addEventListener('keydown', e=>{
      k.push(e.keyCode);
      if(k.toString().indexOf(konami)>=0){
        localStorage.setItem('slyWallet', parseInt(wallet)+5);
        alert("Snake +5 $SLY! Avala propiedades.");
        k=[];
      }
    });
  </script>
</body>
</html>