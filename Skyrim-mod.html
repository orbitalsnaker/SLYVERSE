<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Slyverse Ω · Portal Reality #1310 Mejorado</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
/* ---------------- Motor global y fondo ---------------- */
body,html{margin:0;padding:0;overflow:hidden;background:#000;color:#0f0;font-family:monospace;}
#particle-layer, #artifact-layer, #game1310, #cycleLayer{position:fixed;inset:0;pointer-events:none;}
#particle-layer{z-index:1;}
#artifact-layer{z-index:5;}
#game1310{display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;z-index:10;background:radial-gradient(#001100,#000);}
#cycleLayer{background:rgba(0,0,0,.95);display:grid;place-items:center;opacity:0;pointer-events:none;z-index:20;transition:opacity 1.5s;}
#cycleLayer.active{opacity:1;pointer-events:all;}
#cycleText{font-size:clamp(2rem,8vw,6rem);color:gold;text-shadow:0 0 80px gold;animation:pulse 1.5s infinite;}
@keyframes pulse{0%,100%{transform:scale(1);}50%{transform:scale(1.1);}}

/* ---------------- Partículas exponentiales ---------------- */
.p{position:absolute;width:5px;height:5px;border-radius:50%;background:#0f0;filter:blur(1px);opacity:0.7;animation:float 6s infinite ease-in-out;}
@keyframes float{0%{transform:translate(0,0);}50%{transform:translate(40px,-40px);}100%{transform:translate(0,0);}}

/* ---------------- Artefactos ---------------- */
.artifact{position:absolute;width:80px;height:80px;border-radius:50%;background:conic-gradient(#002200,#00ff44,#002200);box-shadow:0 0 20px #0f0;cursor:pointer;transition:.3s;}
.artifact:hover{transform:scale(1.15);box-shadow:0 0 40px #0f0;}

/* ---------------- Botón cerrar juego ---------------- */
#close1310{position:absolute;top:20px;right:20px;padding:10px 18px;background:#113c20;border-radius:10px;border:1px solid #0f0;color:#0f0;cursor:pointer;box-shadow:0 0 20px #0f0;transition:.25s;}
#close1310:hover{transform:scale(1.07);box-shadow:0 0 35px #0f0;}
</style>
</head>
<body>

<div id="particle-layer"></div>
<div id="artifact-layer"></div>

<!-- Juego 1310 horas -->
<div id="game1310">
    <div id="boa1310" style="width:280px;height:280px;border-radius:50%;background:conic-gradient(#002200,#00ff44,#002200);box-shadow:0 0 40px #00ff44;animation:spinBoa 8s linear infinite;"></div>
    <div id="close1310">Cerrar</div>
</div>

<div id="cycleLayer"><div id="cycleText">Respira…</div></div>

<script>
/* =================== MOTOR EXPONENCIAL REALITY #1310 =================== */

/* ---- Partículas exponentiales ---- */
const N = 1310;
const layer = document.getElementById("particle-layer");
let particles=[];
for(let i=0;i<N;i++){
    const e=document.createElement("div");
    e.className="p";
    e.style.top=(Math.random()*100)+"vh";
    e.style.left=(Math.random()*100)+"vw";
    e.style.animationDuration=(5+Math.random()*5)+"s";
    layer.appendChild(e);
    particles.push({el:e,x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,phase:Math.random()*Math.PI*2,r:Math.random()*3+2});
}
function updateParticles(dt){
    for(let p of particles){
        p.phase+=dt*0.0013;
        p.y+=Math.sin(p.phase)*0.4;
        p.x+=Math.cos(p.phase)*0.4;
        if(p.x<0)p.x=window.innerWidth;
        if(p.x>window.innerWidth)p.x=0;
        if(p.y<0)p.y=window.innerHeight;
        if(p.y>window.innerHeight)p.y=0;
        p.el.style.transform=`translate(${p.x}px,${p.y}px)`;
    }
}
let last=performance.now();
function loop(){
    const now=performance.now();
    const dt=now-last;
    last=now;
    updateParticles(dt);
    requestAnimationFrame(loop);
}
loop();
window.addEventListener("resize",()=>{for(let p of particles){p.x=Math.random()*window.innerWidth;p.y=Math.random()*window.innerHeight;}});

/* ---- Artefactos 16/16 con APIs internas ---- */
const artifactLayer=document.getElementById("artifact-layer");
const artifacts=[];
const artifactAPIs={};
for(let i=1;i<=16;i++){
    const a=document.createElement("div");
    a.className="artifact";
    a.style.top=(10+i*4)+"%";
    a.style.left=(5+i*5)+"%";
    a.dataset.id=i;
    artifactLayer.appendChild(a);
    artifacts.push(a);

    // API interna real de cada artefacto
    artifactAPIs[i]={
        activate:()=>{
            console.log(`Artefacto #${i} activado.`);
            // efecto visual
            a.style.boxShadow="0 0 60px gold";
            setTimeout(()=>{a.style.boxShadow="0 0 20px #0f0";},1000);
        },
        status:()=>({id:i,activated:true,lastUse:Date.now()})
    };

    // Evento clic para activar
    a.addEventListener("click",()=>artifactAPIs[i].activate());
}

/* ---- Apertura y cierre de juego ---- */
const game=document.getElementById("game1310");
const closeBtn=document.getElementById("close1310");
function openGame(){game.style.opacity="1";game.style.pointerEvents="all";}
function closeGame(){game.style.opacity="0";game.style.pointerEvents="none";}
closeBtn.onclick=closeGame;

/* ---- Ciclo orbital 13.10s ---- */
let cycleActive=false;
function startOrbitalCycle(){
    if(cycleActive)return;
    cycleActive=true;
    const cycle=document.getElementById("cycleLayer");
    const text=document.getElementById("cycleText");
    let start=Date.now();
    cycle.classList.add("active");
    const interval=setInterval(()=>{
        const elapsed=(Date.now()-start)/1000;
        const remaining=Math.max(0,13.10-elapsed).toFixed(2);
        text.textContent=`Respira… ${remaining}s`;
        if(elapsed>=13.10){
            clearInterval(interval);
            text.innerHTML=`Ciclo completado.<br>Todos los abrazos desbloqueados.<br>∞ Hugs ♥`;
            setTimeout(()=>{cycle.classList.remove("active");},4000);
        }
    },16);
}

/* ---- Juego 1310 horas independiente ---- */
const gameProgressKey="game1310-progress";
let progress=localStorage.getItem(gameProgressKey);
progress=progress?parseFloat(progress):0;

function advanceGame(seconds){
    progress+=seconds;
    localStorage.setItem(gameProgressKey,progress);
    if(progress>=1310*3600){
        console.log("Juego de 1310 horas completado.");
    }
}
setInterval(()=>advanceGame(1),1000); // 1 segundo real = 1 segundo de juego

/* ---- Audio procedural simple ---- */
const audioCtx=new (window.AudioContext||window.webkitAudioContext)();
const gain=audioCtx.createGain();gain.gain.value=0.03;gain.connect(audioCtx.destination);
function proceduralTone(freq){
    let osc=audioCtx.createOscillator();
    osc.type="sine";osc.frequency.value=freq;
    osc.connect(gain);osc.start();osc.stop(audioCtx.currentTime+0.08);
}
setInterval(()=>{proceduralTone(220+Math.random()*80)},500);

/* ---- Activar regalo exponencialmente ---- */
document.body.addEventListener("click",()=>{
    openGame();
    startOrbitalCycle();
});
</script>

</body>
</html>
