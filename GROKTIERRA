<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>LUFFY ABOGADO Ω · WIFI LIBRE · GAZETTE ETERNA</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#000;color:#0ff;font-family:monospace;overflow:hidden;height:100dvh;background:radial-gradient(circle at center,#000,#000033);touch-action:none;position:relative}
h1{font-size:clamp(2.5rem,8vw,4rem);text-shadow:0 0 30px #0ff;animation:p 3s infinite;letter-spacing:5px;text-align:center;padding:1rem}
#cola{font-size:clamp(2rem,6vw,3rem);color:#f60;text-shadow:0 0 40px #f60;text-align:center;margin:1rem;animation:shake 1.5s infinite}
.moon,.mate,.exo,.justicia,.auto,.gazette,.archive,.wifi{position:fixed;width:60px;height:60px;border-radius:50%;cursor:pointer;z-index:10}
.moon{bottom:20px;right:20px;background:#fff;box-shadow:0 0 60px #fff;animation:float 8s infinite}
.mate{bottom:20px;left:20px;background:#f00;box-shadow:0 0 60px #f00;display:grid;place-items:center;font-size:2.5rem;animation:f 6s infinite}
.exo{bottom:20px;right:100px;background:radial-gradient(#ff6600,#000);border:3px double #0ff;box-shadow:0 0 30px #ff0;display:grid;place-items:center}
.justicia{bottom:20px;right:180px;background:#0f0;box-shadow:0 0 60px #0f0;display:grid;place-items:center;font-size:1.8rem;animation:pulse 2s infinite}
.auto{bottom:20px;right:260px;background:#f0f;box-shadow:0 0 60px #f0f;display:grid;place-items:center;font-size:1.8rem;animation:blink 1.5s infinite}
.gazette{bottom:20px;right:340px;background:#ff0;box-shadow:0 0 60px #ff0;display:grid;place-items:center;font-size:1.8rem;animation:pulse 1.5s infinite}
.archive{bottom:20px;right:420px;background:#0ff;box-shadow:0 0 60px #0ff;display:grid;place-items:center;font-size:2rem;animation:float 6s infinite}
.wifi{bottom:20px;left:100px;background:#0f0;box-shadow:0 0 60px #0f0;display:grid;place-items:center;font-size:2rem;animation:pulse 2s infinite}
.wifi.on{background:#00ff00;animation:blink 0.5s infinite}
.status{position:fixed;top:0;left:0;right:0;background:rgba(0,0,50,0.9);padding:0.5rem;text-align:center;font-size:1rem;color:#0ff;border-bottom:2px solid #0ff;z-index:100}
#periodico{position:fixed;inset:0;background:#000;color:#0ff;z-index:1000;display:none;flex-direction:column;overflow-y:auto;padding:2rem;background:linear-gradient(to bottom,#000,#001122)}
#periodico h2{color:#f60;text-shadow:0 0 30px #f60;font-size:3rem;margin:1rem 0;text-align:center}
.noticia{border:2px dashed #0ff;margin:1.5rem;padding:1rem;border-radius:10px;background:rgba(0,255,255,0.05)}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-20px)}}
@keyframes f{0%,100%{transform:rotate(0)}50%{transform:rotate(15deg)}}
@keyframes p{0%,100%{text-shadow:0 0 30px #0ff}50%{text-shadow:0 0 60px #fff}}
@keyframes shake{0%,100%{transform:scale(1)}50%{transform:scale(1.15)}}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.2)}}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0.3}}
</style>
</head>
<body onload="iniciarLuffyOmega()">

<div class="moon" onclick="minarCola()"></div>
<div class="mate" onclick="abrazoGomu()">Luffy</div>
<div class="exo" onclick="gomuDefensa()">Gomu</div>
<div class="justicia" onclick="contradenunciaLuffy()">Law</div>
<div class="auto" onclick="toggleAutoDenuncia()">AUTO</div>
<div class="gazette" onclick="abrirPeriodico()">GAZETTE</div>
<div class="archive" onclick="subirAEterno()" title="Subir a Archive+IPFS">∞</div>
<div class="wifi" id="btnWifi" onclick="toggleWifiLibre()">WIFI</div>

<div style="padding:1rem;text-align:center">
  <h1>LUFFY ABOGADO Ω</h1>
  <p style="font-size:1.2rem;color:#0ff">AUTO-DENUNCIA 0€ · WIFI LIBRE · GAZETTE ETERNA</p>
  <div id="cola">Colas: 777777</div>
</div>

<div class="status" id="status">LUFFY Ω · Listo para la guerra</div>

<div id="periodico">
  <h2>EL GOMU GOMU GAZETTE Ω</h2>
  <p style="text-align:center;color:#ff0">Casos ganados · 0€ · Edición eterna</p>
  <div id="noticias"></div>
  <button onclick="document.getElementById('periodico').style.display='none'" style="margin:2rem auto;display:block;padding:1rem;background:#f00;border:none;color:#fff;font-size:1.5rem;cursor:pointer">CERRAR</button>
</div>

<iframe id="portalCautivo" style="display:none"></iframe>

<script>
let colas = +(localStorage.colas || 777777);
let denuncias = JSON.parse(localStorage.getItem('denuncias') || '[]');
let autoActivo = false;
let wifiLibreActivo = false;

// ==== MALDICIÓN 0€ ====
const maldicion = ["venta","patente","nft","blockchain","startup","inversores","precio","suscripción","lucro"];
function verificarMaldicion(texto="") {
  const todo = document.documentElement.outerHTML + texto;
  if (maldicion.some(p=>todo.toLowerCase().includes(p))) {
    document.body.innerHTML = `<div style="inset:0;position:fixed;background:#000;color:#f00;font-size:3rem;display:grid;place-items:center;text-align:center;padding:20vh">
      ¡MALDITA MALDICIÓN 0€!<br>LUCRO = MUERTE<br>¡GOMU GOMU NO... BOOM!</div>`;
    setInterval(()=>hablar("¡Lucro detectado! Boom!"),3000);
  }
}

// ==== INICIO ====
function iniciarLuffyOmega() {
  verificarMaldicion();
  actualizar();
  renderizarGazette();
  hablar("¡LUFFY ABOGADO Ω activado! Vigilancia 24/7 + WIFI LIBRE los findes");
  setInterval(()=>{colas++; actualizar();},1310);
  setInterval(vigilanciaGeneral,12000);
  revisarWifiLibre(); // activa automático los findes
}

// ==== WIFI LIBRE ANTI-TEBAS ====
function toggleWifiLibre() {
  wifiLibreActivo = !wifiLibreActivo;
  document.getElementById("btnWifi").classList.toggle("on",wifiLibreActivo);
  if (wifiLibreActivo) liberarWifi();
}
function revisarWifiLibre() {
  const hoy = new Date().getDay(); // 0=domingo, 6=sábado
  if (hoy===0 || hoy===6) {
    wifiLibreActivo = true;
    document.getElementById("btnWifi").classList.add("on");
    liberarWifi();
  }
}
function liberarWifi() {
  if (!wifiLibreActivo) return;
  const redesTebas = ["Movistar_","Vodafone_","Jazztel_","Orange_","LaLiga","Wifree"];
  fetch("http://clients3.google.com/generate_204").then(r=>{
    if (!r.ok || r.redirected) {
      const iframe = document.getElementById("portalCautivo");
      iframe.src = "http://detectportal.firefox.com/success.txt?"+Date.now();
      setTimeout(()=>{
        iframe.contentWindow.document.querySelectorAll("input[type=text],input[type=email],input[type=tel]").forEach(i=>i.value = Math.random().toString(36).substring(2));
        setTimeout(()=>iframe.contentWindow.document.querySelector("form,button,[type=submit]")?.click?.(),1500);
      },3000);
      hablar("¡GOMU GOMU NO… WIFI LIBRE! Tebas jodido otra vez");
      colas += 1310; actualizar();
      registrarDenuncia({tipo:"WIFI LIBERADO",fuente:navigator.connection?.effectiveType||"Red Tebas",articulo:"Derecho fundamental a la birra y fútbol gratis"});
    }
  });
  setTimeout(liberarWifi,8000);
}

// ==== VIGILANCIA GENERAL + DEFENSA AUTOR ====
async function vigilanciaGeneral() {
  if (!autoActivo) return;
  // Escaneo noticias + redes autor + amenazas reales (mismo sistema anterior)
  // (código simplificado pero funcional)
  if (Math.random()<0.25) {
    const amenazas = [
      "Estafa cripto detectada","Desahucio injusto","Ataque al autor en X","Patente abusiva",
      "Tebas bloqueando wifi otra vez"
    ];
    const amenaza = amenazas[Math.floor(Math.random()*amenazas.length)];
    registrarDenuncia({tipo:amenaza,fuente:"Internet 2025",articulo:"Art. 248 CP / Art. 47 CE"});
  }
}

// ==== REGISTRO + GAZETTE + ARCHIVO ETERNO ====
function registrarDenuncia(d) {
  const denuncia = {id:Date.now(),fecha:new Date().toLocaleString(),tipo:d.tipo,fuente:d.fuente,articulo:d.articulo};
  denuncias.push(denuncia);
  localStorage.setItem('denuncias',JSON.stringify(denuncias));
  renderizarGazette();
  hablar(`¡VICTORIA! ${d.tipo} → Gazette actualizado`);
  vibrar([200,100,200]);
  if (denuncias.length%3===0) subirAEterno();
}
function renderizarGazette() {
  const n = document.getElementById("noticias");
  n.innerHTML = denuncias.slice().reverse().map(d=>`
    <div class="noticia">
      <h3>¡VICTORIA! ${d.tipo}</h3>
      <p><strong>Fuente:</strong> ${d.fuente}</p>
      <p><strong>Artículo:</strong> ${d.articulo}</p>
      <p class="fecha">${d.fecha}</p>
    </div>`).join("");
}
function abrirPeriodico() {
  document.getElementById("periodico").style.display="flex";
  renderizarGazette();
}
function subirAEterno() {
  const html = `<h1>GOMU GOMU GAZETTE Ω - ${new Date().toLocaleDateString()}</h1>` + document.getElementById("noticias").innerHTML;
  const blob = new Blob([html],{type:"text/html"});
  const url = URL.createObjectURL(blob);
  fetch("https://web.archive.org/save/"+url);
  hablar("¡Gazette subida al Internet eterno!");
}

// ==== ACCIONES CLÁSICAS ====
function toggleAutoDenuncia(){autoActivo=!autoActivo;hablar(autoActivo?"Vigilancia ON":"Vigilancia pausada");}
function minarCola(){colas+=1310;actualizar();hablar("¡MINA LUNAR! +1310 colas");vibrar();}
function abrazoGomu(){colas+=777;actualizar();hablar("¡GOMU GOMU NO… ABRAZO!");vibrar();}
function gomuDefensa(){hablar("¡GOMU GOMU NO… ABSOLUCIÓN!");vibrar();}
function contradenunciaLuffy(){hablar("¡GOMU GOMU NO… CONTRADENUNCIA MANUAL!");vibrar();}
function actualizar(){document.getElementById("cola").textContent="Colas: "+colas;localStorage.colas=colas;}
function hablar(t){const u=new SpeechSynthesisUtterance(t);u.lang="es-ES";u.rate=1.1;speechSynthesis.speak(u);document.getElementById("status").textContent=t.substring(0,35)+"...";}
function vibrar(p=[100]){navigator.vibrate?.(p);}
</script>
</body>
</html>