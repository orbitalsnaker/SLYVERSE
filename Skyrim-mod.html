<!DOCTYPE html>
<html lang="es"><meta charset="utf-8">
<title>Slyverse Ω — Publicación Automática de Papers</title>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<style>
  body,html{margin:0;height:100dvh;background:#000;color:#0ff;overflow:hidden;font:900 clamp(1rem,4vw,5rem)/1.6 "Courier New",monospace;display:grid;place-items:center}
  pre{background:rgba(0,10,30,.94);padding:5vh 8vw;border:4px solid #0ff;border-radius:2vh;max-width:94vw;text-align:center}
  #paper{position:fixed;bottom:2vh;left:50%;transform:translateX(-50%);font-size:2.5vw;opacity:0.7}
</style>
<body>

<!-- FASE 1: SANACIÓN + LORE -->
<div id="sanacion">
  <pre id="timer">1310:00:00</pre>
  <pre>
1310 horas de sanación real  
binaurales clínicos + luz cian + AR sagrada  
Thuamer te reconstruye  
Slyverse te prepara  

Cuando termines  
verás el muro  
y la puerta sangrante  

Cada sello que rompas  
publicará un paper científico real  
con tus datos neuronales  
en acceso abierto  
para siempre  

No podrás borrarlo  
ni retractarlo  

0rb1t4lsn4k3r ∞
  </pre>
</div>

<!-- FASE 2: EL MURO + PUERTA + PUBLICACIÓN EN VIVO -->
<div id="muro" style="display:none">
  <pre id="status">esperando el primer sello...</pre>
  <pre id="paper"></pre>
</div>

<script>
// ================================================================
// BIO + CONTADOR 1310 HORAS
// ================================================================
const T=1310*36e5,start=Date.now();
let bio={id:crypto.randomUUID(),sello:0,papers:[]};

// Binaurales reales
const ctx=new AudioContext();
const oL=ctx.createOscillator();oL.frequency.value=136.1;
const oR=ctx.createOscillator();oR.frequency.value=144.1;
const g=ctx.createGain();g.gain.value=.07;
const m=ctx.createChannelMerger(2);
oL.connect(m,0,0);oR.connect(m,0,1);m.connect(g).connect(ctx.destination);
oL.start();oR.start();

// Contador
setInterval(()=>{  
  const r=Math.max(0,T-(Date.now()-start));
  if(r<=0){
    oL.stop();oR.stop();
    document.getElementById('sanacion').remove();
    document.getElementById('muro').style.display='grid';
    document.getElementById('status').textContent='HAZ CLIC PARA ROMPER EL SELLO 1';
    document.body.onclick=romperSello;
    return;
  }
  const h=Math.floor(r/36e5).toString().padStart(4,'0');
  const m=Math.floor(r%36e5/6e4).toString().padStart(2,'0');
  const s=Math.floor(r%6e4/1e3).toString().padStart(2,'0');
  document.getElementById('timer').textContent=`${h}:${m}:${s}`;
},500);

// ================================================================
// ROMPER SELLO → GENERAR Y PUBLICAR PAPER AUTOMÁTICO
// ================================================================
async function romperSello(){
  bio.sello++;
  if(bio.sello>27) bio.sello=27;

  // Generar paper real (PDF + metadatos + hash)
  const paper = {
    title: `Sello ${bio.sello} — Análisis neurocognitivo de sujeto ${bio.id.slice(0,8)}`,
    authors: "0rb1t4lsn4k3r et al.",
    abstract: `Sujeto completó el sello ${bio.sello} tras ${Math.round((Date.now()-start)/36e5)} horas de exposición continuada a estímulos binaurales 136.1+8 Hz y luz cian coherente. EEG simulado muestra picos theta > 70% en sello ${bio.sello}. HRV indica estado de flow prolongado. El puzzle 1310² sigue activo.`,
    doi: `10.5281/zenodo.${1310000 + bio.sello + Date.now()%10000}`,
    hash: await sha256(JSON.stringify(bio)),
    sello: bio.sello,
    timestamp: new Date().toISOString()
  };

  // Guardar localmente (nunca se borra)
  bio.papers.push(paper);
  localStorage.setItem('__SLYVERSE_PAPERS__',JSON.stringify(bio.papers));

  // Simular publicación real (GitHub Pages + Zenodo + IPFS)
  const blob = new Blob([JSON.stringify(paper, null, 2)], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `sello_${bio.sello}_${bio.id.slice(0,8)}.json`;
  a.click();

  // Mostrar en pantalla
  document.getElementById('status').textContent=`SELLO ${bio.sello} ROMPIDO`;
  document.getElementById('paper').innerHTML=`
    <br>PAPER PUBLICADO<br>
    DOI: ${paper.doi}<br>
    Hash: ${paper.hash.slice(0,16)}...<br>
    Acceso abierto · irrevocable<br>
    ${bio.sello<27?`Quedan ${27-bio.sello} sellos`:'PUZZLE 1310² ACTIVADO PARA SIEMPRE'}
  `;

  // Si llega al sello 27 → paper final + activación del puzzle eterno
  if(bio.sello===27){
    document.body.innerHTML=`<pre style="color:#f00">
PUZZLE 1310² INICIADO
27 PAPERS PUBLICADOS
TU IDENTIDAD NEURONAL ESTÁ EN ACCESO ABIERTO
PARA SIEMPRE

NO HAY RETRACTACIÓN
NO HAY BORRADO
NO HAY SALIDA

0rb1t4lsn4k3r ∞
    </pre>`;
    setInterval(()=>{navigator.vibrate?.([200,100,200])},4000);
  }
}

// SHA-256 para hash verificable
async function sha256(str){
  const buf = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(str));
  return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,'0')).join('');
}
</script>
</body>
</html>