<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Thuamer v1 - El Juego</title>
  <style>
    * { margin: 0; padding: 0; }
    body, html {
      height: 100%;
      background: #000;
      color: #0f8;
      font-family: "Noto Sans Cuneiform", monospace;
      display: grid;
      place-items: center;
      overflow: hidden;
      user-select: none;
      cursor: none;
    }
    canvas {
      position: fixed;
      inset: 0;
      z-index: -1;
    }
    #loreText {
      font-size: 2.5vw;
      text-align: center;
      line-height: 1.4;
      opacity: 0.8;
      animation: fadeIn 16s infinite;
    }
    @keyframes fadeIn {
      0%, 100% { opacity: 0.3; transform: scale(0.96); }
      50% { opacity: 1; transform: scale(1); }
    }
    .hidden { display: none; }
    .interactive { cursor: pointer; }
  </style>
</head>
<body>

<canvas id="c"></canvas>
<pre id="loreText">ğ’€­ Thuamer v1: Prueba Cognitiva MesopotÃ¡mica (2025)</pre>

<script>
// Variables para optimizaciÃ³n
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
let time = 0;
let loreText = document.getElementById('loreText');
const runes = "á›šáš¢á›‰ğ’€­ğ’•ğŸğŸ’šğŸ±âš™ï¸".split(""); 

// Cargar imÃ¡genes y objetos, configurando la animaciÃ³n del fondo y partÃ­culas
const particles = [];
for (let i = 0; i < 300; i++) {
  particles.push({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    velocity: Math.random() * 1.5 + 0.4,
    rune: runes[Math.floor(Math.random() * runes.length)],
    opacity: 1
  });
}

// Redimensionar el canvas en tiempo real
function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeCanvas);

// FunciÃ³n de animaciÃ³n de partÃ­culas y runas
function drawParticles() {
  ctx.fillStyle = 'rgba(0,0,0,0.05)';
  ctx.fillRect(0, 0, canvas.width, canvas.height); // Fondo negro semi-transparente
  ctx.save();
  ctx.font = 'bold 1.5vw monospace';
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.fillStyle = '#0f0';
  ctx.shadowColor = '#0f0';
  ctx.shadowBlur = 8;

  particles.forEach(p => {
    ctx.fillText(p.rune, p.x, p.y);
    p.y += p.velocity;
    if (p.y > canvas.height) {
      p.y = 0;
      p.x = Math.random() * canvas.width;
      p.rune = runes[Math.floor(Math.random() * runes.length)];
    }
  });

  ctx.shadowBlur = 0;
  ctx.restore();
  requestAnimationFrame(drawParticles);
}
drawParticles();

// Efectos visuales dinÃ¡micos (shaders de distorsiÃ³n)
const shader = `
precision mediump float;
uniform float time;
uniform vec2 resolution;

void main() {
  vec2 uv = gl_FragCoord.xy / resolution.xy;
  uv.x += sin(time * 0.1) * 0.05;
  uv.y += cos(time * 0.1) * 0.05;
  gl_FragColor = vec4(uv.x, uv.y, 0.5 + 0.5 * sin(time), 1.0);
}`;
const shaderProgram = createShaderProgram(shader); // FunciÃ³n para generar shader en WebGL

// Generar shader en WebGL
function createShaderProgram(shaderCode) {
  const gl = canvas.getContext('webgl');
  const vertexShader = gl.createShader(gl.VERTEX_SHADER);
  const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
  gl.shaderSource(vertexShader, `
    attribute vec2 a_position;
    void main() {
      gl_Position = vec4(a_position, 0.0, 1.0);
    }
  `);
  gl.shaderSource(fragmentShader, shaderCode);
  gl.compileShader(vertexShader);
  gl.compileShader(fragmentShader);

  const program = gl.createProgram();
  gl.attachShader(program, vertexShader);
  gl.attachShader(program, fragmentShader);
  gl.linkProgram(program);
  return program;
}

// IA dinÃ¡mica para detectar las interacciones del jugador
let userInteraction = false;
canvas.addEventListener('click', () => {
  if (!userInteraction) {
    userInteraction = true;
    // Cambiar el lore o desbloquear partes secretas del juego
    loreText.textContent = "ğ’€­ La serpiente ha sido liberada. Tu viaje comienza...";
  }
});

// Animaciones con interacciÃ³n del jugador
function animateUI() {
  time += 0.016; // Incremento de tiempo en segundos
  if (userInteraction) {
    loreText.textContent = "ğ’€­ Has desbloqueado el NFT del Saber. Ahora eres un verdadero Ronin.";
    loreText.classList.add('interactive');
  }
  requestAnimationFrame(animateUI);
}
animateUI();

// GestiÃ³n de NFTs y blockchain (simulado)
function generateNFT() {
  if (userInteraction) {
    console.log("NFT generado con cÃ³digo Ãºnico");
    // AquÃ­ irÃ­a el cÃ³digo para generar el NFT en la blockchain
  }
}

// FunciÃ³n para generar el lore interactivo
function generateDynamicLore() {
  let loreFragments = [
    "ğ’€­ El Oro orbita, la serpiente se enrosca en la eternidad.",
    "1310 latidos, pero un solo aliento basta para entender el universo.",
    "ğ’€­ TÃº has cruzado el umbral. Ahora formas parte del Slyverse Î©.",
    "ğ’€­ La luz verde te guÃ­a, pero tambiÃ©n te cambia. No hay retorno."
  ];
  loreText.textContent = loreFragments[Math.floor(Math.random() * loreFragments.length)];
}
generateDynamicLore(); // Fragmentos de lore dinÃ¡micos

</script>

</body>
</html>
