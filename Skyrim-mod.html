<!-- REEMPLAZA el bloque completo del MOD en el HTML original (líneas ~170-180) con esto: -->
<div id="mod">
  <canvas id="game" width="800" height="600" style="border:2px solid #0cf;background:#111;margin:2rem auto;display:block;cursor:pointer"></canvas>
  <div style="color:#0f0;text-align:center;font-size:2rem;line-height:1.5;margin:1rem">
    Respira profundo · Exhala runas con ESPACIO (el círculo exhala contigo) · 
    Transforma dragones en gatitos con el pulso verde · 
    Seth, Norah, Drogon, Amy y el niño de 3 años te abrazan desde Red Mountain
  </div>
  <div style="text-align:center;margin-top:1rem">
    <button onclick="document.getElementById('mod').style.display='none'" 
            style="background:#0cf;color:#000;padding:1rem 3rem;border:none;border-radius:30px;font-size:2rem;font-family:Georgia,serif">
      Volver al abrazo principal
    </button>
  </div>
</div>

<!-- REEMPLAZA la función initMod en el <script> (al final, donde dice "function initMod(){") con esto: -->
<script>
function initMod(){
  const game = document.getElementById('game');
  const g = game.getContext('2d');
  
  // Estado del juego
  let player = {x: 400, y: 300, size: 20};
  let particles = [];
  let time = 0;
  
  // Mapa procedural sutil (montañas rojas con toques verdes)
  const mapWidth = 40, mapHeight = 30;
  let terrain = [];
  for(let y = 0; y < mapHeight; y++) {
    terrain[y] = [];
    for(let x = 0; x < mapWidth; x++) {
      terrain[y][x] = Math.sin(x*0.1 + y*0.05) > 0 ? '#8B0000' : '#228B22';
    }
  }
  
  // Narrativa velada: el regalo del niño de 3 años cierra el círculo
  const regaloEnlazado = 'ábralo'; // invisible, cierra el círculo en silencio
  
  // Familia: posiciones fijas pero con movimiento sutil
  const family = [
    {x: 100, y: 100, color: '#FFD700'}, // Seth
    {x: 200, y: 150, color: '#FF69B4'}, // Norah
    {x: 300, y: 200, color: '#FF4500'}, // Drogon
    {x: 150, y: 250, color: '#00CED1'}  // Amy
  ];
  
  // Input
  const keys = {};
  document.addEventListener('keydown', (e) => keys[e.code] = true);
  document.addEventListener('keyup', (e) => keys[e.code] = false);
  
  // Actualización
  function update() {
    time += 0.016;
    
    // Movimiento player
    const speed = 3;
    if(keys['ArrowLeft']) player.x = Math.max(0, player.x - speed);
    if(keys['ArrowRight']) player.x = Math.min(780, player.x + speed);
    if(keys['ArrowUp']) player.y = Math.max(0, player.y - speed);
    if(keys['ArrowDown']) player.y = Math.min(580, player.y + speed);
    
    // ESPACIO: exhala runas verdes (abrazo del círculo)
    if(keys['Space']) {
      for(let i = 0; i < 10; i++) {
        particles.push({
          x: player.x + player.size/2,
          y: player.y + player.size/2,
          vx: (Math.random()-0.5)*12,
          vy: (Math.random()-0.5)*12 - 3,
          life: 1,
          size: Math.random()*6 + 3
        });
      }
      keys['Space'] = false;
    }
    
    // Update particles (runas eternas)
    particles = particles.filter(p => {
      p.x += p.vx;
      p.y += p.vy;
      p.vy += 0.12;
      p.life -= 0.015;
      p.size *= 0.99;
      return p.life > 0 && p.x > -50 && p.x < 850 && p.y > -50 && p.y < 650;
    });
    
    // Familia danza sutil con pulso del círculo cerrado (1.31 rad/s)
    family.forEach(f => {
      f.x += Math.sin(time * 1.31 + f.y * 0.01) * 0.8;
      f.y += Math.cos(time * 1.31 + f.x * 0.01) * 0.6;
      f.x = Math.max(20, Math.min(780, f.x));
      f.y = Math.max(20, Math.min(580, f.y));
    });
  }
  
  // Dibujo principal
  function draw() {
    // Fondo cosmos negro
    g.fillStyle = '#000';
    g.fillRect(0, 0, 800, 600);
    
    // Terreno Red Mountain
    for(let y = 0; y < mapHeight; y++) {
      for(let x = 0; x < mapWidth; x++) {
        g.fillStyle = terrain[y][x];
        g.fillRect(x*20, y*20, 20, 20);
      }
    }
    
    // Familia con aura verde velada del abrazo (sutil sombra 1310-inspired)
    family.forEach((f, i) => {
      const pulse = Math.sin(time * 3.1 + i) * 0.15 + 0.85;
      const radius = 12 * pulse;
      
      // Cuerpo principal
      g.fillStyle = f.color;
      g.shadowColor = 'rgba(0, 255, 0, 0.2)';
      g.shadowBlur = 8 + Math.sin(time * 1.31) * 4;
      g.beginPath();
      g.arc(f.x, f.y, radius, 0, Math.PI*2);
      g.fill();
      
      // Reset sombra para sutileza
      g.shadowBlur = 0;
      g.shadowColor = 'transparent';
    });
    
    // Runas/partículas (hilo verde cosiendo)
    particles.forEach(p => {
      g.save();
      g.globalAlpha = p.life;
      const greenPulse = Math.sin(time * 5 + p.x * 0.01) * 0.3 + 0.7;
      g.fillStyle = `hsl(120, 100%, ${50 + greenPulse * 30}%)`;
      g.beginPath();
      g.arc(p.x, p.y, p.size, 0, Math.PI*2);
      g.fill();
      g.restore();
    });
    
    // Player: corazón verde latiendo (centro del círculo)
    const heartPulse = Math.sin(time * 2.618) * 0.25 + 1; // Golden ratio sutil
    g.fillStyle = '#0f0';
    g.shadowColor = '#0f0';
    g.shadowBlur = 15 * heartPulse;
    g.beginPath();
    g.arc(player.x, player.y, player.size * heartPulse, 0, Math.PI*2);
    g.fill();
    g.shadowBlur = 0;
    
    update();
    requestAnimationFrame(draw);
  }
  
  draw();
}

// Listener para init en click (ya estaba)
document.getElementById('mod').addEventListener('click', (e) => {
  if(e.target.tagName !== 'BUTTON' && !game.getContext) initMod();
});
</script>