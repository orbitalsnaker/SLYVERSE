<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>RŌNIN PEN v3 BARRIO — 25 € · 2026</title>
<style>
  :root{--bg:#000;--dark:#0a0a0a;--fg:#0f0;--acc:#0ff;--r:#f00}
  *{margin:0;padding:0;box-sizing:border-box}
  body{background:var(--bg);color:var(--fg);font-family:"Courier New",monospace;overflow:hidden;height:100vh;display:grid;place-items:center}
  .card{background:var(--dark);border:3px solid var(--acc);width:1180px;max-width:96%;height:92vh;box-shadow:0 0 0 120px var(--acc);padding:30px;border-radius:16px;position:relative}
  .header{font-size:16px;letter-spacing:10px;color:var(--acc);text-align:center;margin-bottom:20px;text-shadow:0 0 30px}
  .main{display:grid;grid-template-columns:1fr 500px;gap:32px;height:100%}
  .left{gap:22px;display:grid;grid-template-rows:auto 1fr auto}
  pre,.log{background:#000;border:2px solid var(--acc);padding:16px;border-radius:8px;font-size:12.5px;overflow:auto}
  input,select{background:#000;border:2px solid var(--acc);color:var(--fg);padding:12px;border-radius:6px;font-size:14px}
  .gauge{height:32px;background:#111;border:2px solid #333;border-radius:6px;overflow:hidden;position:relative;margin:8px 0}
  .fill{background:linear-gradient(90deg,#0ff,#f36f6f);height:100%;width:0%;transition:all .4s}
  .label{font-size:14px;color:#0cf;display:flex;justify-content:space-between}
  .value{color:var(--acc);font-weight:bold;font-size:16px}
  .title{font-size:18px;color:var(--acc);letter-spacing:4px;margin:16px 0 8px}
  .price{position:absolute;bottom:30px;left:50%;transform:translateX(-50%);font-size:48px;color:var(--r);text-shadow:0 0 60px var(--r)}
  #humo{position:fixed;inset:0;background:rgba(255,255,255,0.15);pointer-events:none;opacity:0;transition:1s;z-index:999}
  .link{color:#0ff;text-decoration:underline;cursor:pointer}
</style>
</head>
<body>

<div class="card">
  <div class="header">RŌNIN PEN v3 BARRIO // 25 € // 2026</div>
  <div class="price">25 €</div>

  <div class="main">
    <!-- IZQUIERDA -->
    <div class="left">
      <div>
        <div class="title">> BARRIO CONSOLE</div>
        <input id="cmd" placeholder="help | start | stroke 96 | volt 8.3 | haptic 88 | smoke | onimode | buy" autocomplete="off">
        <pre id="log" class="log">
<span style="color:#0ff">RŌNIN PEN v3 BARRIO — firmware 3.0.0 — 08-dic-2025</span>
Motor Faulhaber-like 1724SR · stroke 6-11 mm · haptic 0827 real · WS2812B Sharingan
Precio final real: <span style="color:#f36f6f">25 €</span> (nuevo, con links)
Escribe "buy" para BOM AliExpress · "smoke" para Oni mode
        </pre>
      </div>

      <div>
        <div class="title">> CONTROLES EN VIVO</div>
        <div class="label">Stroke <span class="value" id="stroke">96</span> mm</div>
        <div class="gauge"><div id="fill_s" class="fill"></div></div>
        <input type="range" min="60" max="110" value="96" id="strokeSlider">

        <div class="label">Voltage <span class="value" id="volt">8.3</span> V</div>
        <div class="gauge"><div id="fill_v" class="fill"></div></div>
        <input type="range" min="5" max="9" step="0.1" value="8.3" id="voltSlider">

        <div class="label">Haptic <span class="value" id="haptic">88</span>%</div>
        <div class="gauge"><div id="fill_h" class="fill"></div></div>
        <input type="range" min="0" max="100" value="88" id="hapticSlider">

        <div class="label">Modo <span class="value" id="modo">BARRIO</span></div>
        <select id="modoSelect">
          <option>BARRIO</option>
          <option>ONI</option>
          <option>THETA</option>
          <option>KUNGFU</option>
        </select>
      </div>

      <div style="text-align:center;color:#555;font-size:12px">
        <span class="link" onclick="showBOM()">BOM con links AliExpress →</span> · 100 % open source · CC0 · namasté sin paywall
      </div>
    </div>

    <!-- DERECHA - 3D LIVE -->
    <div class="right">
      <div class="title">> 3D REAL-TIME — GIRA CON RATÓN (TATÚA EN VIVO)</div>
      <canvas id="preview" width="500" height="420"></canvas>
    </div>
  </div>
</div>

<div id="humo"></div>

<div id="bom" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.95);z-index:1000;display:none;padding:40px;overflow-y:auto;color:#0ff">
  <span class="close" onclick="document.getElementById('bom').style.display='none'" style="position:absolute;top:20px;right:30px;font-size:40px;color:#f00;cursor:pointer">×</span>
  <h2 style="text-align:center;margin:20px 0">BOM BARRIO v3 — 25 € TOTAL (NUEVO 2025)</h2>
  <table style="width:100%;border-collapse:collapse;font-size:14px">
    <tr style="background:#0a0a0a"><th>Pieza</th><th>Precio</th><th>Link Nuevo AliExpress</th></tr>
    <tr><td>Motor coreless 1724SR Faulhaber-like (nuevo)</td><td>12 €</td><td><a href="https://www.aliexpress.com/w/wholesale-faulhaber-dc-motor.html" target="_blank">AliExpress Faulhaber 1724SR Clone (12 €, 4.9★)</a></td></tr>
    <tr><td>ESP32-C3 module (nuevo, WiFi+BT)</td><td>1.75 €</td><td><a href="https://www.aliexpress.com/item/1005002748205023.html" target="_blank">AliExpress ESP32-C3 Dev Board (1.75 USD, 4.9★)</a></td></tr>
    <tr><td>Driver TB6612FNG dual motor (nuevo)</td><td>1.50 €</td><td><a href="https://de.aliexpress.com/item/32465698640.html" target="_blank">AliExpress TB6612FNG Module (1.50 €, 4.9★)</a></td></tr>
    <tr><td>Anillo WS2812B 8 LEDs (nuevo)</td><td>1.84 €</td><td><a href="https://www.aliexpress.com/item/4000877848238.html" target="_blank">AliExpress WS2812B Ring 8 LEDs (1.84 €, 4.9★)</a></td></tr>
    <tr><td>Motor haptic 0827 (nuevo, coin vibe)</td><td>0.70 €</td><td><a href="https://www.aliexpress.com/item/32884585655.html" target="_blank">AliExpress 0827 Haptic Motor (0.70 €, 4.9★)</a></td></tr>
    <tr><td>Holder 2S 18650 (nuevo, con pines)</td><td>0.38 €</td><td><a href="https://www.aliexpress.com/item/1005004222712480.html" target="_blank">AliExpress 2S 18650 Holder (0.38 €, 4.9★)</a></td></tr>
    <tr><td>Partes impresas 3D (eccéntrico, grip, carcasa)</td><td>7 €</td><td><a href="https://www.aliexpress.com/w/wholesale-3d-tattoo-machine.html" target="_blank">AliExpress 3D Printed Tattoo Parts Kit (7 € filamento+STL)</a></td></tr>
  </table>
  <p style="text-align:center;margin-top:30px;font-size:18px;color:#0f0">¡Todo nuevo, envíos gratis, 4.9+ ★! Namasté sin paywall. Total: 25 €.</p>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.168.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.168.0/examples/js/controls/OrbitControls.js"></script>
<script>
let stroke=96, volt=8.3, haptic=88, modo="BARRIO";

// consola
const log=document.getElementById("log");
function l(m){log.innerHTML+=m+"<br>";log.scrollTop=log.scrollHeight;}

document.getElementById("cmd").addEventListener("keypress",e=>{
  if(e.key!=="Enter")return;
  const cmd=e.target.value.trim();l("$ "+cmd);e.target.value="";
  if(cmd==="help")l("start | smoke | onimode | theta | kungfu | stroke X | volt X.X | haptic X | buy");
  if(cmd==="smoke"){document.getElementById("humo").style.opacity=0.4;setTimeout(()=>document.getElementById("humo").style.opacity=0,4000);l("Humo Oni activado — tatuaje sagrado");}
  if(cmd==="onimode"){modo="ONI";l("MODO ONI — ojos rojos + haptic max");}
  if(cmd==="buy"){showBOM();}
});

// sliders + select
["stroke","volt","haptic"].forEach(p=>{
  document.getElementById(p+"Slider").addEventListener("input",e=>{
    window[p]=+e.target.value;
    document.getElementById(p).textContent=window[p];
    document.getElementById("fill_"+p[0]).style.width=(window[p]-({stroke:60,volt:5,haptic:0}[p]||0))/({stroke:50,volt:4,haptic:100}[p]||1)*100+"%";
  });
});
document.getElementById("modoSelect").onchange=e=>{modo=e.target.value;document.getElementById("modo").textContent=modo;l("Modo cambiado a "+modo);};

function showBOM(){document.getElementById("bom").style.display="block";}

// 3D MEJORADO (con "tatuaje" simulado)
const scene=new THREE.Scene();scene.background=new THREE.Color(0x000000);
const camera=new THREE.PerspectiveCamera(50,500/420,0.1,1000);
const renderer=new THREE.WebGLRenderer({canvas:document.getElementById("preview"),antialias:true});
renderer.setSize(500,420);
const controls=new THREE.OrbitControls(camera,renderer.domElement);controls.enableDamping=true;

scene.add(new THREE.AmbientLight(0x404040));
const dirLight=new THREE.DirectionalLight(0x00eeff,2);dirLight.position.set(10,10,10);scene.add(dirLight);

const pen=new THREE.Group();

// cuerpo principal negro mate
const body=new THREE.Mesh(new THREE.CylinderGeometry(1,1,8.5,32),new THREE.MeshPhongMaterial({color:0x0a0a0a,metalness:0.9,roughness:0.1}));
pen.add(body);

// grip ergonómico rojo sangre
const grip=new THREE.Mesh(new THREE.CylinderGeometry(1.3,1.5,3.8,32),new THREE.MeshPhongMaterial({color:0xf36f6f,metalness:0.8}));
grip.position.y=-6;grip.rotation.x=Math.PI/2;pen.add(grip);

// eccentric ultra-visible
const ecc=new THREE.Mesh(new THREE.CylinderGeometry(0.7,0.7,0.6,32),new THREE.MeshPhongMaterial({color:0x00eeff,emissive:0x00eeff,emissiveIntensity:2}));
ecc.rotation.x=Math.PI/2;ecc.position.y=4;pen.add(ecc);

// anillo LED Sharingan
const ringGeo=new THREE.RingGeometry(1.1,1.4,32);
const ringMat=new THREE.MeshBasicMaterial({color:0xf00,side:THREE.DoubleSide});
const ring=new THREE.Mesh(ringGeo,ringMat);
ring.rotation.x=Math.PI/2;ring.position.y=4.3;pen.add(ring);

// "piel" simulada para tatuaje
const skin=new THREE.Mesh(new THREE.PlaneGeometry(10,10),new THREE.MeshBasicMaterial({color:0xffdbac,transparent:true,opacity:0.7}));
skin.position.set(0,-5,5);scene.add(skin);

scene.add(pen);
camera.position.set(12,8,12);

function animate(){
  requestAnimationFrame(animate);
  pen.rotation.y += 0.01;
  ecc.position.y = 4 + Math.sin(Date.now()*0.012)*(stroke/110*2.5);
  if(modo==="ONI") ring.material.color.set(0xff0000);
  else ring.material.color.set(0x00eeff);
  // simulación tatuaje: "tinta" cayendo
  skin.material.opacity = 0.7 + Math.sin(Date.now()*0.02)*0.1;
  controls.update();
  renderer.render(scene,camera);
}
animate();
</script>
</body>
</html>