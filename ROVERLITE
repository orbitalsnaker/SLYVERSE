<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>COBETE 667-SLYVERSE Ω — 666€ — EL COHETE QUE NO EXPLOTA Y MINA PLATINO</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box}
  body{background:#000;color:#0f0;font-family:monospace;overflow:hidden;position:relative;height:100vh}
  .scan{pointer-events:none;position:fixed;top:0;left:0;width:100%;height:100%;
        background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,255,0,0.04) 2px,rgba(0,255,0,0.04) 4px);z-index:999}
  .p{position:fixed;background:rgba(0,0,0,0.92);border:3px solid #0f0;padding:12px;box-shadow:0 0 30px #0f0,0 0 50px #f00}
  .g{text-shadow:0 0 12px #0f0,0 0 25px #f00;color:#0ff;font-weight:bold}
  canvas{background:#000;border:2px solid #0f0}
  input{background:#000;border:2px solid #0f0;color:#0f0;width:100%;padding:10px;font-size:14px}
  #log{height:180px;overflow-y:auto;color:#0ff;font-size:11px;background:#000}
  #readme{position:fixed;top:0;left:0;width:100%;height:100%;background:#000;z-index:1000;overflow-y:auto;padding:20px;display:none}
  .close{color:#f00;font-size:40px;position:absolute;top:10px;right:20px;cursor:pointer}
  #instructions{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.95);border:2px solid #0f0;padding:20px;z-index:1001;color:#0f0}
</style>
<script src="https://threejs.org/build/three.min.js"></script>
</head>
<body>

<div class="scan"></div>

<!-- README INTEGRADO — estilo fumaos y barrio 100% -->
<div id="readme">
  <span class="close" onclick="document.getElementById('readme').style.display='none'">×</span>
  <pre style="color:#0f0;font-size:18px;text-align:center;margin:20px 0">
██╗    ██╗███████╗██╗     ██╗      ██████╗ ██████╗ ███╗   ██╗███████╗    667
██║    ██║██╔════╝██║     ██║     ██╔════╝██╔═══██╗████╗  ██║██╔════╝    Ω
██║ █╗ ██║█████╗  ██║     ██║     ██║     ██║   ██║██╔██╗ ██║█████╗      FINAL BOSS
██║███╗██║██╔══╝  ██║     ██║     ██║     ██║   ██║██║╚██╗██║██╔══╝
╚███╔███╔╝███████╗███████╗███████╗╚██████╗╚██████╔╝██║ ╚████║███████╗    666€ EXACTOS
 ╚══╝╚══╝ ╚══════╝╚══════╝╚══════╝ ╚═════╝ ╚═════╝ ╚═╝  ╚═══╝╚══════╝    0rb1t4lsn4k3r 2025
  </pre>

  <div style="max-width:900px;margin:0 auto;color:#0f0;font-size:16px;line-height:1.8">
    <h1 style="color:#f00;text-align:center">README CALLEJERO OFICIAL v4 — ÓRBITA OKUPADA</h1>
    <h2>¿QUÉ COÑO ES ESTO, TÍO?</h2>
    Un cohete espacial que cabe en un .html, cuesta <b>666€ exactos</b> y no explota como los de los pijos ricos.  
    Este COBETE llega a la Luna, entra en órbita, despliega 66 nanorovers y mina platino + helio-3 en flow orbital mientras tú te fumas uno tranquilo.
    <b>MEJORAS 2025 v4:</b> Física orbital propia (Newtoniana barrio-style), vista 3D con Three.js callejero, flota de cobetes para minería masiva, IA optimiza órbitas reales.

    <h2>LO QUE TIENE (y los ricos no)</h2>
    • Precio real: <b>666€</b> (impresora 3D + KNO₃ + levadura + bicarbonato + petardos Raiders)<br>
    • 66 nanorovers de 0,66 g cada uno → minan en órbita y fabrican más<br>
    • Propulsión híbrida: jarfa mode (azúcar + nitrato) o eco mode (levadura + bicarbonato → sin explosión)<br>
    • BOM 667: si eres pibe → pagas 30% alquiler automático del platino minado<br>
    • Si eres empresa, NASA, SpaceX… → te detecta y te maldice eternamente<br>
    • Patente callejera Sabadell + Airweave a nombre de 0rb1t4lsn4k3r → prohibido corps<br>
    • <b>Nuevo v4:</b> Órbitas elípticas, 3D view wireframe verde, flota multi-cobete, minería orbital escalada.

    <h2>LA MALDICIÓN 667 (funciona de verdad)</h2>
    Si eres corp te sale:
    <span style="color:#f00">CORP DETECTADO — USO VETADO — 666 MALDICIONES</span><br>
    La pantalla se da la vuelta y no puedes hacer nada. Protección anticapital open source.

    <h2>CÓMO USARLO (pa los que van fumados)</h2>
    • Escribe <b>readme</b> → vuelves aquí<br>
    • Escribe <b>666</b> → orgullo del precio<br>
    • Escribe <b>nanorovers</b> → ves los 66 bichos minando<br>
    • Escribe <b>jarfa</b> → modo petardos<br>
    • <b>Clásicos:</b> <b>minar</b>, <b>fabricar</b>, <b>retornar</b>, <b>status</b>, <b>ia optimize</b>, <b>avionica</b>, <b>trayectoria</b>, <b>vuelo</b>, <b>diseño</b><br>
    • <b>Nuevos v4:</b> <b>orbitar</b> (sim órbita lunar), <b>3dview</b> (vista 3D orbital), <b>flota N</b> (lanza N cobetes extra para minería masiva)<br>
    • Para IA: Corre Ollama con `ollama run llama3` en local.

    <h2>FILOSOFÍA DEL BLOQUE</h2>
    Con 666 euros y una impresora del chino orbítamos antes que los que tienen 666.000 millones.<br>
    Inspirados en open-source pero propio: física Newtoniana casera, 3D barrio. No inversores, solo bronca y órbita okupada.

    <h1 style="color:#0ff;text-align:center;margin:40px 0">
      0rb1t4lsn4k3r 2025<br>
      Bloque 667 Sabadell — Órbita Lunar Okupada<br>
      <span style="color:#f00">EL BLOQUE YA GANÓ EL ESPACIO</span>
    </h1>
  </div>
</div>

<!-- INSTRUCCIONES VUELO -->
<div id="instructions">
  <span class="close" onclick="document.getElementById('instructions').style.display='none'">×</span>
  <pre style="color:#0f0;text-align:center">
CONTROLES VUELO MANUAL (X-Plane style):
W: Thrust up | S: Thrust down
A: Yaw left | D: Yaw right
Q: Pitch up | E: Pitch down
Presiona ESC para salir del modo vuelo.
¡Órbita con flow callejero!
  </pre>
</div>

<!-- PANTALLA PRINCIPAL DEL COBETE -->
<div class="p g" style="top:5px;left:50%;transform:translateX(-50%);width:900px;text-align:center;font-size:16px;cursor:pointer" onclick="document.getElementById('readme').style.display='block'">
  <b>COBETE 667-SLYVERSE Ω — 666€ EXACTOS — EL COHETE QUE NO EXPLOTA Y MINA</b><br>
  0rb1t4lsn4k3r 2025 — PATENTE CALLEJERA + NANOROVERS 667 — <u>CLIC AQUÍ PARA LEER EL README CALLEJERO</u>
</div>

<div class="p" style="bottom:20px;right:20px;width:300px;height:180px">
  <div class="g">THRUST Ω — KNO₃ + NANO-ECO BOOST</div>
  <canvas id="thrust" width=280 height=60></canvas>
  <div id="level">166% — "666€ y humillamos a Starship"</div>
</div>

<div class="p" style="bottom:200px;right:20px;width:260px;height:260px">
  <div class="g">RADAR 667 — NANOROVERS DETECTADOS</div>
  <canvas id="radar" width=240 height=240></canvas>
</div>

<div class="p" style="top:80px;left:20px;width:560px;height:360px">
  <div class="g">0rb1t4lsn4k3r Ω CORE — 666€ EDITION</div>
  <input id="cmd" placeholder=">> comando rey (prueba: readme, orbitar, 3dview, flota 5, ia optimize)">
  <div id="log"></div>
</div>

<div class="p" style="top:80px;right:20px;width:420px;height:280px">
  <div class="g">NANOROVERS 667 — 0.66g cada uno — 66 unidades</div>
  <canvas id="nanocam" width=400 height=200></canvas>
  <div id="nanoinfo">66 nanorovers desplegados — minando Helio-3 a 666 g/h en órbita</div>
</div>

<div class="p" style="bottom:20px;left:20px;width:300px;height:180px">
  <div class="g">ECO Ω — LEVADURA TURBO + Na + H₂O</div>
  <canvas id="eco" width=280 height=60></canvas>
  <div id="eco_level">133% — "Sin explosión, puro flow orbital"</div>
</div>

<div class="p g" style="top:5px;right:20px;width:360px;">
  BOM 667 Ω<br>
  <span id="bom">Precio final: <b>666€</b><br>Alquiler 30% activo</span>
</div>

<!-- AVIONICA TUNEADA -->
<div class="p" style="bottom:220px;left:20px;width:300px;height:300px">
  <div class="g">AVIONICA 667 — GAUGES TUNEADOS (FAST-inspired)</div>
  <canvas id="avionics" width=280 height=280></canvas>
  <div id="avionics_info">Thrust: 166% | Eco: 133% | Estabilidad: 100%</div>
</div>

<!-- TRAYECTORIA SIM (OpenRocket-style) -->
<div class="p" style="top:450px;left:20px;width:560px;height:200px;display:none" id="traj_panel">
  <div class="g">TRAYECTORIA 667 — ALTITUD vs TIEMPO (RocketPy physics)</div>
  <canvas id="trajectory" width=540 height=180></canvas>
  <div id="traj_info">Apogea: 0m | Periapsis: 0m | Vel orbital: 0m/s</div>
</div>

<!-- NUEVO: 3D VIEW ORBITAL (Three.js callejero) -->
<div class="p" style="top:450px;right:20px;width:420px;height:280px;display:none" id="3d_panel">
  <div class="g">3D VIEW 667 — COBETE EN ÓRBITA (Wireframe barrio)</div>
  <div id="threejs_container" style="width:400px;height:200px"></div>
</div>

<script>
// === LÓGICA COBETE v4: Soluciones propias orbitales ===
const patente = "COBETE 667-SLYVERSE Ω © 0rb1t4lsn4k3r 2025 — ¡EL COHETE QUE NO EXPLOTA Y MINA EN ÓRBITA! 666€ exactos. 66 nanorovers. Patente callejera + Airweave. 30% alquiler solo pibes. Corps vetados y malditos para siempre.";

let thrust=166, ang=0, eco=133, nanoAng=0, platino=0, helio=0, alquilerPagado=0;
let nanorovers = 66, metalesEnTierra = 0, fabricando = false, minando = false, torque = 0;
let masa = 10, diametro = 0.1, estabilidad = 1.0;
let modoVuelo = false, pitch = 0, yaw = 0, roll = 0;
let trayectoria = [];
let flotaSize = 1; // Número de cobetes en flota
let orbita = {apo: 0, peri: 0, velOrb: 0}; // Params orbitales

// Física orbital propia (Newtoniana callejera)
const G = 6.67430e-11; // Constante grav
const M_luna = 7.342e22; // Masa Luna
const R_luna = 1737000; // Radio Luna

function simularOrbita() {
  trayectoria = [];
  let t = 0, r = R_luna + 100000, vel = Math.sqrt(G * M_luna / r) * 1.1; // Vel orbital + boost
  let theta = 0, ecc = 0.2; // Excentricidad propia
  while (t < 3600) { // 1 hora órbita
    let grav = G * M_luna / r**2;
    vel -= grav * 0.1 / masa; // Decel simple
    r += vel * 0.1 * Math.sin(theta);
    theta += 0.01;
    r = R_luna + (orbita.apo + orbita.peri)/2 * (1 + ecc * Math.cos(theta)); // Elíptica propia
    trayectoria.push({t: t, r: r, vel: vel});
    t += 0.1;
  }
  orbita.apo = Math.max(...trayectoria.map(p => p.r - R_luna));
  orbita.peri = Math.min(...trayectoria.map(p => p.r - R_luna));
  orbita.velOrb = Math.sqrt(G * M_luna / ((orbita.apo + orbita.peri)/2 + R_luna));
  document.getElementById('traj_info').textContent = `Apoapsis: \( {orbita.apo.toFixed(0)}m | Periapsis: \){orbita.peri.toFixed(0)}m | Vel orbital: ${orbita.velOrb.toFixed(0)}m/s`;
  dibujarTrayectoria();
  document.getElementById('traj_panel').style.display = 'block';
}

// Dibuja trayectoria (ahora orbital)
function dibujarTrayectoria() {
  const ctx = document.getElementById("trajectory").getContext("2d");
  ctx.fillStyle="#000"; ctx.fillRect(0,0,540,180);
  ctx.strokeStyle="#0f0"; ctx.lineWidth=2; ctx.beginPath();
  for (let i = 0; i < trayectoria.length; i++) {
    const x = (trayectoria[i].t / 3600) * 540;
    const y = 180 - ((trayectoria[i].r - R_luna) / 400000) * 180; // Escala a 400km
    if (i === 0) ctx.moveTo(x, y);
    else ctx.lineTo(x, y);
  }
  ctx.stroke();
}

// 3D View propia con Three.js (wireframe verde)
let scene, camera, renderer, rocketMesh;
function init3D() {
  scene = new THREE.Scene();
  camera = new THREE.PerspectiveCamera(75, 400/200, 0.1, 1000);
  renderer = new THREE.WebGLRenderer({antialias: true});
  renderer.setSize(400, 200);
  document.getElementById('threejs_container').appendChild(renderer.domElement);
  const geometry = new THREE.ConeGeometry(5, 20, 32); // Cohete simple
  const material = new THREE.MeshBasicMaterial({color: 0x00ff00, wireframe: true});
  rocketMesh = new THREE.Mesh(geometry, material);
  scene.add(rocketMesh);
  camera.position.z = 50;
  animate3D();
}
function animate3D() {
  requestAnimationFrame(animate3D);
  rocketMesh.rotation.x += 0.01;
  rocketMesh.rotation.y += 0.01;
  rocketMesh.position.y = Math.sin(Date.now()/1000) * 10; // Sim órbita simple
  renderer.render(scene, camera);
}

// Controles teclado
document.addEventListener('keydown', (e) => {
  if (!modoVuelo) return;
  switch(e.key) {
    case 'w': thrust = Math.min(300, thrust + 10); break;
    case 's': thrust = Math.max(0, thrust - 10); break;
    case 'a': yaw -= 5; break;
    case 'd': yaw += 5; break;
    case 'q': pitch += 5; break;
    case 'e': pitch -= 5; break;
    case 'Escape': modoVuelo = false; document.getElementById('instructions').style.display='none'; break;
  }
  ang += yaw / 100; torque = pitch / 10 + roll;
});

// ANIMACIONES...
setInterval(()=>{ 
  thrust=166+Math.sin(Date.now()/120)*25 + (modoVuelo ? pitch/2 : 0);
  const t=document.getElementById("thrust").getContext("2d");
  t.fillStyle="#000";t.fillRect(0,0,280,60);
  t.fillStyle="#0f0";t.fillRect(0,15,thrust*1.6,40);
  t.fillStyle="#f00";t.fillRect(thrust*1.6-10,5,20,50);
  document.getElementById("level").textContent=`${Math.floor(thrust)}% — "Órbita 667 humilla a Falcon"`;
},100);

setInterval(()=>{ 
  eco=133+Math.sin(Date.now()/200)*30;
  const e=document.getElementById("eco").getContext("2d");
  e.fillStyle="#000";e.fillRect(0,0,280,60);
  e.fillStyle="#0ff";e.fillRect(0,15,eco*1.6,40);
  for(let i=0;i<12;i++) e.fillStyle="#fff",e.beginPath(),e.arc(Math.random()*280,Math.random()*60,Math.random()*4+2,0,Math.PI*2),e.fill();
  document.getElementById("eco_level").textContent=`\( {Math.floor(eco)}% — "Estabilidad orbital \){estabilidad.toFixed(1)}"`;
},140);

setInterval(()=>{
  const n=document.getElementById("nanocam").getContext("2d");
  n.fillStyle="#000";n.fillRect(0,0,400,200);
  for(let i=0;i<100;i++) n.fillStyle="#fff",n.fillRect(Math.random()*400,Math.random()*120,1,1);
  for(let i=0;i<nanorovers * flotaSize;i++){
    let x=200+Math.sin(nanoAng+i*0.8)*120;
    let y=100+Math.cos(nanoAng+i*0.8)*60;
    n.fillStyle="#0f0";n.fillRect(x,y,3,3);
  }
  nanoAng+=0.02;
  if(minando && Math.random()>0.6) helio += 6.66 * (nanorovers / 66) * flotaSize * (orbita.apo / 100000); // Escala con altitud orbital
  document.getElementById("nanoinfo").textContent=`\( {nanorovers * flotaSize} nanorovers 667 — Helio-3: \){helio.toFixed(1)}g a ${Math.floor(666 * (nanorovers / 66) * flotaSize)} g/h orbital`;
},80);

function radar(){
  const r=document.getElementById("radar").getContext("2d");
  r.fillStyle="rgba(0,30,0,0.9)";r.fillRect(0,0,240,240);
  for(let i=1;i<6;i++) r.strokeStyle="#0f0",r.lineWidth=2,r.beginPath(),r.arc(120,120,i*40,0,Math.PI*2),r.stroke();
  r.save();r.translate(120,120);r.rotate(ang + torque / 100);
  r.strokeStyle="#f00";r.lineWidth=7;r.beginPath();r.moveTo(0,0);r.lineTo(120,0);r.stroke();
  r.restore();
  ang+=0.09; requestAnimationFrame(radar);
}
radar();

function drawAvionics() {
  const a = document.getElementById("avionics").getContext("2d");
  a.fillStyle="#000"; a.fillRect(0,0,280,280);
  a.strokeStyle="#0f0"; a.lineWidth=5; a.beginPath(); a.arc(70,70,50,0,Math.PI*2); a.stroke();
  a.save(); a.translate(70,70); a.rotate((thrust/300)*Math.PI*1.5 - Math.PI*0.75);
  a.strokeStyle="#f00"; a.beginPath(); a.moveTo(0,0); a.lineTo(50,0); a.stroke();
  a.restore();
  a.strokeStyle="#0ff"; a.beginPath(); a.arc(210,70,50,0,Math.PI*2); a.stroke();
  a.save(); a.translate(210,70); a.rotate((eco/200)*Math.PI*1.5 - Math.PI*0.75);
  a.strokeStyle="#f00"; a.beginPath(); a.moveTo(0,0); a.lineTo(50,0); a.stroke();
  a.restore();
  a.strokeStyle="#0f0"; a.beginPath(); a.arc(140,210,50,0,Math.PI*2); a.stroke();
  a.save(); a.translate(140,210); a.rotate(estabilidad * Math.PI*1.5 - Math.PI*0.75);
  a.strokeStyle="#f00"; a.beginPath(); a.moveTo(0,0); a.lineTo(50,0); a.stroke();
  a.restore();
  document.getElementById("avionics_info").textContent = `Thrust: \( {Math.floor(thrust)}% | Eco: \){Math.floor(eco)}% | Estab: ${estabilidad.toFixed(1)}`;
  requestAnimationFrame(drawAvionics);
}
drawAvionics();

setInterval(()=>{ 
  if(minando && Math.random()>0.7) platino += 3 * (nanorovers / 66) * flotaSize;
  if(fabricando && platino >= 10 && Math.random() > 0.8) { 
    platino -= 10; nanorovers += 6 * flotaSize; fabricando = false;
    log.innerHTML += `<span class="g">Fabricados \( {6 * flotaSize} rovers nuevos en flota — total: \){nanorovers * flotaSize}. ¡Órbita sin pérdidas!</span><br>`;
    log.scrollTop = log.scrollHeight;
  }
  torque = Math.sin(Date.now()/500) * 10 + pitch / 10;
},100);

setInterval(() => {
  const bom = document.getElementById("bom");
  const esCorp = /corp|inc|nasa|esa|spacex|blueorigin|lockheed|boeing/.test(navigator.userAgent.toLowerCase());
  if (esCorp) {
    bom.innerHTML = `<span style="color:#f00">CORP DETECTADO<br>USO VETADO<br>666 MALDICIONES ETERNAS</span>`;
    document.body.style.filter = "invert(1) hue-rotate(180deg)";
    return;
  }
  const alquiler = Math.floor(platino * 0.3);
  if (alquiler > alquilerPagado) { platino = Math.floor(platino * 0.7); alquilerPagado = alquiler; }
  bom.innerHTML = `Precio final: <b>666€</b><br>Alquiler pagado: \( {alquilerPagado}kg platino<br>Metales en Tierra: \){metalesEnTierra}kg (100% eficiencia)<br>Flota: ${flotaSize} cobetes`;
}, 2500);

async function iaOptimize() {
  const prompt = `Optimiza órbita lunar: thrust=\( {thrust}, eco= \){eco}, masa=\( {masa}, apo= \){orbita.apo}, peri=\( {orbita.peri}, flota= \){flotaSize}. Sugiere nums para órbita estable sin explosiones. Respuesta: "thrust:250, apo:200000, peri:100000, rate:2".`;
  try {
    const response = await fetch('http://localhost:11434/api/generate', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ model: 'llama3', prompt: prompt, stream: false })
    });
    const data = await response.json();
    const suggestions = data.response;
    const matches = suggestions.match(/thrust:(\d+)/);
    if (matches) thrust = parseInt(matches[1]);
    const ecoMatch = suggestions.match(/eco:(\d+)/);
    if (ecoMatch) eco = parseInt(ecoMatch[1]);
    const apoMatch = suggestions.match(/apo:(\d+)/);
    if (apoMatch) orbita.apo = parseInt(apoMatch[1]);
    const periMatch = suggestions.match(/peri:(\d+)/);
    if (periMatch) orbita.peri = parseInt(periMatch[1]);
    return `IA Llama optimizó órbita (Newtoniana propia): ${suggestions}`;
  } catch (e) {
    thrust *= 1.2; eco *= 1.2; orbita.apo *= 1.5; orbita.peri *= 1.5;
    return "IA simulada: Boost orbital 50%. Instala Ollama para real.";
  }
}

const log=document.getElementById("log");
document.getElementById("cmd").addEventListener("keydown",async function(e){
  if(e.key!=="Enter" || !this.value) return;
  const cmd=this.value.toLowerCase().trim();
  this.value="";
  log.innerHTML+=`> ${cmd}<br>`;
  let r = "Comando aceptado, rey del bloque — orbitamos rompiendo";
  switch(true) {
    case cmd === "readme": 
      r = "README callejero abierto — clic arriba o escribe otra vez para cerrar";
      document.getElementById('readme').style.display='block';
      break;
    case cmd === "666": r = "666€ exactos y orbitamos antes que los que tienen 666.000 millones"; break;
    case cmd === "jarfa": r = "Full jarfa mode — me la suda la NASA, yo voy con petardos y KNO₃ orbital"; break;
    case cmd === "nanorovers": r = `${nanorovers * flotaSize}+ nanorovers de 0,66g desplegados — minando en órbita como posesos`; break;
    case cmd === "patente": r = patente; break;
    case cmd === "maldicion": r = "2620 maldiciones eternas a Elon, Bezos y todos los corps. Órbita GitHub forever."; break;
    case cmd === "bloque": r = "Bloque 667 Sabadell hasta la órbita lunar y vuelta, cabrones"; break;
    case cmd === "minar": 
      minando = !minando;
      r = minando ? "Minería orbital activada — rovers minando al 100% sin pérdidas" : "Minería pausada";
      break;
    case cmd === "fabricar": 
      if (platino >= 10) { fabricando = true; r = "Fabricación orbital iniciada — usando 10kg platino para nuevos rovers en flota."; }
      else { r = "No hay platino suficiente (necesitas 10kg). Mina más en órbita!"; }
      break;
    case cmd === "retornar": 
      if (platino + helio >= 5) {
        const carga = Math.floor(platino + helio);
        metalesEnTierra += carga * flotaSize; platino = 0; helio = 0;
        r = `Flota de retorno lanzada — \( {carga * flotaSize}kg metales a Tierra intactos. Total: \){metalesEnTierra}kg`;
      } else { r = "No hay metales suficientes (mín 5kg). Mina más!"; }
      break;
    case cmd === "status": 
      r = `Status orbital: \( {nanorovers * flotaSize} rovers, Platino: \){platino.toFixed(1)}kg, Helio: \( {helio.toFixed(1)}g, Metales Tierra: \){metalesEnTierra}kg, Flota: ${flotaSize}`;
      break;
    case cmd === "ia optimize":
      r = await iaOptimize();
      break;
    case cmd === "avionica":
      r = `Avionica orbital: Thrust \( {Math.floor(thrust)}%, Eco \){Math.floor(eco)}%, Torque ${torque.toFixed(1)} — Gauges activos.`;
      break;
    case cmd === "trayectoria":
      simularTrayectoria(); // Antigua, para compat
      r = "Trayectoria simulada — mira el gráfico.";
      break;
    case cmd === "orbitar":
      simularOrbita();
      r = "Órbita simulada (Newtoniana propia) — mira el gráfico elíptico.";
      break;
    case cmd === "vuelo":
      modoVuelo = true;
      document.getElementById('instructions').style.display='block';
      r = "Modo vuelo orbital activado — usa WASD/QE. ESC para salir.";
      break;
    case cmd === "diseño":
      masa = prompt("Nueva masa (kg)?", masa) || masa;
      diametro = prompt("Nuevo diámetro (m)?", diametro) || diametro;
      estabilidad = (diametro / masa > 0.05) ? 1.2 : 0.8;
      r = `Diseño orbital actualizado: Masa \( {masa}kg, Diám \){diametro}m, Estab ${estabilidad.toFixed(1)}. ¡Chequea órbita!`;
      break;
    case cmd.startsWith("flota "):
      flotaSize = parseInt(cmd.split(" ")[1]) || 1;
      r = `Flota ampliada a ${flotaSize} cobetes — minería masiva activada, rey!`;
      break;
    case cmd === "3dview":
      document.getElementById('3d_panel').style.display = 'block';
      init3D();
      r = "Vista 3D orbital activada — wireframe verde, puro barrio en espacio.";
      break;
  }
  log.innerHTML+=`<span class="g">${r}</span><br>`;
  log.scrollTop=log.scrollHeight;
  const voz=new SpeechSynthesisUtterance(r);
  voz.lang="es-ES";voz.rate=1;speechSynthesis.speak(voz);
});

// Inicio épico
alert("COBETE 667-SLYVERSE Ω v4 CARGADO — Órbita propia, 3D barrio, flota anti-corp — 666€ — Escribe 'orbitar' para simular órbita lunar pro.");
</script>
</body>
</html>