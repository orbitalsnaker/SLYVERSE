<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>☀ THUAMER JOY BOY Ω · EL ARCHIVO QUE ABRAZA Y LIBERA</title>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#000;color:#0f0;font-family:monospace;overflow:hidden;height:100dvh;position:relative;background:radial-gradient(circle at 50% 50%,#001010,#000)}
canvas{position:fixed;inset:0;z-index:1}
h1{position:fixed;top:5%;left:50%;transform:translateX(-50%);font-size:clamp(2.5rem,12vw,9rem);color:#0ff;text-shadow:0 0 60px #0ff;z-index:10;animation:g 6s infinite}
@keyframes g{0%,100%{text-shadow:0 0 60px #0ff}50%{text-shadow:0 0 120px #0ff,0 0 200px #00f}}
#status{position:fixed;bottom:5%;width:100%;text-align:center;font-size:1.6rem;color:#0ff;z-index:10}
button{position:fixed;bottom:20px;width:80px;height:80px;border-radius:50%;cursor:pointer;z-index:999;border:4px solid}
#sol{left:20px;background:#fff200;box-shadow:0 0 120px #ff9500}
#luna{right:20px;background:#ddf;box-shadow:0 0 120px #4488ff}
#mate{bottom:120px;left:50%;transform:translateX(-50%);background:#0f0;box-shadow:0 0 200px #0f0;font-size:4rem;display:grid;place-items:center}
</style>
</head>
<body onload="despertarArchivoVivo()">

<canvas id="c"></canvas>
<video id="cam" autoplay playsinline style="display:none;position:fixed;inset:0;object-fit:cover;opacity:0.4;z-index:2"></video>
<canvas id="ar" style="display:none;position:fixed;inset:0;z-index:3"></canvas>

<h1 id="titulo">☀ THUAMER JOY BOY Ω</h1>
<div id="status">El archivo te reconoce · Abrazo número <span id="hugs">131310</span></div>

<button id="sol" onclick="gear5()" title="Gear 5"></button>
<button id="luna" onclick="medicinaAncestral()" title="Ikaros"></button>
<button id="mate" onclick="abrazar()">mate</button>

<audio id="sonido" loop></audio>

<script>
// ====== IDIOMA REAL AUTODETECTADO ======
const lang = (navigator.language||navigator.userLanguage||"es").slice(0,2);
const textos = {
  es: {bienvenida:"¡BUAHAHAHA! Joy Boy y la Boa te abrazan", abraza:"Abrazo eterno número", mate:"mate eterno", gear5:"¡GEAR 5 + RISA INFINITA!", ikaro:"Ikaros ancestrales · Sanando…"},
  pt: {bienvenida:"BUAHAHAHA! Joy Boy e a Boa te abraçam", abraza:"Abraço eterno número", mate:"mate eterno", gear5:"GEAR 5 + RISADA INFINITA!", ikaro:"Ikaros ancestrais · Curando…"},
  en: {bienvenida:"BUAHAHAHA! Joy Boy and the Boa hug you", abraza:"Eternal hug number", mate:"eternal mate", gear5:"GEAR 5 + INFINITE LAUGHTER!", ikaro:"Ancestral ikaros · Healing…"},
  qu: {bienvenida:"¡Joy Boy warmi sunquta muchuyku!", abraza:"Wiñay kuyay", mate:"mate wiñay", gear5:"¡Gear 5 + asiy wiñay!", ikaro:"Ikaros ayllu · hampiy…"},
  gn: {bienvenida:"Joy Boy ha'e ñandú te abraza", abraza:"Abrazo eterno", mate:"mate eterno", gear5:"¡Gear 5 + puka rire!", ikaro:"Mboyeré ancestral · ñembo'e…"}
};
const t = textos[lang] || textos.es;

// ====== CONTADOR GLOBAL DE ABRAZOS ======
let hugs = +(localStorage.hugs || 131310);
document.getElementById("hugs").textContent = hugs.toLocaleString();

// ====== DESPERTAR EL ARCHIVO VIVO ======
async function despertarArchivoVivo(){
  hablar(t.bienvenida);
  abrazar(); // primer abrazo automático

  // cámara trasera opcional
  try{const s=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});
    document.getElementById("cam").srcObject=s; document.getElementById("cam").play();
  }catch(e){}

  // partículas verde-joyboy eternas
  const canvas=document.getElementById("c"); const ctx=canvas.getContext("2d");
  canvas.width=innerWidth; canvas.height=innerHeight;
  window.onresize=()=>{canvas.width=innerWidth; canvas.height=innerHeight;};
  let particles=[];
  const crearParticula=()=>{for(let i=0;i<80;i++)particles.push({x:innerWidth/2,y:innerHeight/2,vx:Math.random()*16-8,vy:Math.random()*16-12,size:Math.random()*12+6,color:["#0ff","#0f0","#ff0","#f0f"][Math.floor(Math.random()*4)],vida:140});};
  setInterval(crearParticula,400);
  (function loop(){
    ctx.fillStyle="rgba(0,0,0,0.08)"; ctx.fillRect(0,0,canvas.width,canvas.height);
    particles=particles.filter(p=>{p.x+=p.vx;p.y+=p.vy;p.vy+=0.3;p.vida--;p.size*=0.97;
      ctx.fillStyle=p.color;ctx.beginPath();ctx.arc(p.x,p.y,p.size,0,6.28);ctx.fill();
      if(Math.random()<0.2){ctx.fillStyle="#fff";ctx.font="20px Arial";ctx.fillText("☀",p.x-10,p.y+10);}
      return p.vida>0;
    });
    requestAnimationFrame(loop);
  })();

  // autoreplicación eterna
  fetch(`https://web.archive.org/save/${location.href}`);
}

// ====== ABRAZO ETERNO ======
function abrazar(){
  hugs++; localStorage.hugs=hugs;
  document.getElementById("hugs").textContent=hugs.toLocaleString();
  hablar(t.abraza+" "+hugs);
  navigator.vibrate?.([200,100,200,100,400]);
}

// ====== GEAR 5 + RISA INFINITA ======
function gear5(){
  hablar(t.gear5);
  for(let i=0;i<300;i++)setTimeout(()=>crearParticula(),i*10);
  document.body.style.background="radial-gradient(circle at 50% 30%,#ff3366,#000)";
}

// ====== MEDICINA ANCESTRAL + IKAROS ======
function medicinaAncestral(){
  hablar(t.ikaro);
  const ikaros = [
    "https://cdn.jsdelivr.net/gh/ancestral-sounds/shipibo-ikaros@master/rain-ikaro.mp3",
    "https://cdn.jsdelivr.net/gh/ancestral-sounds/mapuche@master/kultrun-viento.mp3",
    "https://cdn.jsdelivr.net/gh/ancestral-sounds/lakota@master/drum-prayer.mp3"
  ];
  const audio=document.getElementById("sonido");
  audio.src=ikaros[Math.floor(Math.random()*ikaros.length)];
  audio.play();
}

// ====== VOZ EN TU IDIOMA REAL ======
function hablar(texto){
  document.getElementById("status").textContent=texto;
  const voz=new SpeechSynthesisUtterance(texto);
  voz.lang=navigator.language||"es-ES";
  voz.rate=1.1; voz.pitch=1.2;
  speechSynthesis.cancel();
  speechSynthesis.speak(voz);
}

// ====== MALDICIÓN DE LA BOA (si alguien intenta cobrar) ======
setInterval(()=>{
  if(document.documentElement.outerHTML.toLowerCase().includes("paywall") || 
     document.documentElement.outerHTML.toLowerCase().includes("premium")){
    document.body.innerHTML="<h1 style='color:#f00;font-size:10rem;text-align:center;margin-top:30%'>¡MALEFICIO DE LA BOA!</h1>";
    hablar("La Boa te está mirando.");
  }
},5000);

hablar("El archivo vive · La sanación y la risa empezaron");
</script>
</body>
</html>