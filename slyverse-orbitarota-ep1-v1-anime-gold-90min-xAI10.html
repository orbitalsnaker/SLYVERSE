<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SLYVERSE: 壊れた軌道 – Anime 90 min (v2 – SILENCIO ARREGLADO)</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box }
    html, body { height: 100%; overflow: hidden; background: #000; font-family: 'Courier New', monospace; color: #0f0 }
    #film { position: relative; width: 100%; height: 100%; overflow: hidden }
    .scene { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #000; opacity: 0; transition: opacity 1.5s ease-in-out; perspective: 1000px }
    .scene.active { opacity: 1; z-index: 999 }
    .content { position: absolute; top: 0; left: 0; width: 100%; height: 100%; padding: 60px; display: flex; flex-direction: column; justify-content: center; align-items: center }
    #ui { position: absolute; top: 20px; left: 20px; font-size: 13px; pointer-events: none; z-index: 1000; opacity: 0.88 }
    #ui span { display: block; margin: 3px 0; letter-spacing: 1.3px }
    #sub { position: absolute; bottom: 100px; max-width: 85%; text-align: center; font-size: 20px; opacity: 0; transition: opacity 2s; text-shadow: 0 0 14px #0f0; letter-spacing: 1px }
    #progress { position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); font-size: 11px; opacity: 0.7 }
    .cyan { color: #0ff }
    .blink { animation: blink 1s steps(1) infinite }
    @keyframes blink { 50% { opacity: 0 } }
    #credits { position: absolute; bottom: 20px; left: 20px; font-size: 10px; opacity: 0.7 }
    #credits a { color: #0f0; text-decoration: none }
    #credits a:hover { color: #0ff }
    #play { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); padding: 16px 32px; background: #000; border: 1px solid #0f0; color: #0f0; font-family: inherit; font-size: 17px; cursor: pointer; z-index: 1001; opacity: 0.95 }
    #play:hover { background: #0f0; color: #000 }
    .vignette { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; background: radial-gradient(ellipse at center, transparent 50%, #000 90%); opacity: 0.6 }
    .grain { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" /><feColorMatrix values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 0.03 0"/></filter><rect width="100" height="100" filter="url(#n)" opacity="0.3"/></svg>') repeat; opacity: 0.15; animation: grain 3s steps(10) infinite }
    @keyframes grain { 0% { transform: translate(0, 0) } 100% { transform: translate(-1px, -1px) } }
    /* ANIME STYLE */
    .anime-text { font-family: 'Anime Ace', sans-serif; font-weight: bold; font-size: 18px; letter-spacing: 2px; text-transform: uppercase }
    .speech-bubble { position: absolute; bottom: 20%; left: 50%; transform: translateX(-50%); background: rgba(0, 0, 0, 0.7); border: 2px solid #0f0; padding: 12px 20px; border-radius: 20px; max-width: 70%; text-align: center; opacity: 0; transition: opacity 0.5s }
    .speech-bubble::after { content: ''; position: absolute; bottom: -10px; left: 50%; transform: translateX(-50%); border: 10px solid transparent; border-top: 10px solid #0f0 }
    .character { position: absolute; width: 180px; height: 240px; opacity: 0; transition: opacity 1s }
    .norah { left: 15%; background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 180 240"><circle cx="90" cy="60" r="35" fill="#0ff"/><path d="M55,90 Q45,120 55,150 Q65,180 90,190 Q115,180 125,150 Q135,120 125,90 Q115,75 90,75 Q65,75 55,90" fill="#0ff"/><rect x="70" y="100" width="40" height="80" fill="#0f0" rx="10"/><circle cx="75" cy="55" r="5" fill="#000" id="ojo-izq-norah"/><circle cx="105" cy="55" r="5" fill="#000" id="ojo-der-norah"/><path d="M75,65 Q90,70 105,65" stroke="#000" stroke-width="2" fill="none"/></svg>') no-repeat center/contain }
    .seth { right: 15%; background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 180 240"><circle cx="90" cy="60" r="30" fill="#0f0"/><path d="M60,85 Q50,115 60,140 Q70,165 90,175 Q110,165 120,140 Q130,115 120,85 Q110,70 90,70 Q70,70 60,85" fill="#0f0"/><rect x="75" y="95" width="30" height="70" fill="#0ff" rx="8"/><circle cx="80" cy="55" r="4" fill="#000" id="ojo-izq-seth"/><circle cx="100" cy="55" r="4" fill="#000" id="ojo-der-seth"/><path d="M80,63 Q90,66 100,63" stroke="#000" stroke-width="1.5" fill="none"/></svg>') no-repeat center/contain }
    .glow { filter: drop-shadow(0 0 12px #0ff) }
    .mapa-estelar { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none }
    .trayectoria { stroke: #0ff; fill: none; stroke-dasharray: 5, 5; animation: trazar 90s linear }
    @keyframes trazar { to { stroke-dashoffset: -1000 } }
    .progress-bar { width: 0%; height: 5px; background: #0ff; animation: llenar 5400s linear; transition: width 0.5s }
    @keyframes llenar { 100% { width: 100% } }
    @keyframes parpadear { 0%, 100% { opacity: 1 } 50% { opacity: 0 } }
    @keyframes mover-cola { 0% { transform: translateY(0) } 50% { transform: translateY(-10px) } 100% { transform: translateY(0) } }
  </style>
  <link href="https://fonts.cdnfonts.com/css/anime-ace" rel="stylesheet">
</head>
<body>
  <div id="film"></div>
  <div class="vignette"></div>
  <div class="grain"></div>
  <div class="mapa-estelar">
    <svg width="100%" height="100%" viewBox="0 0 100 100">
      <circle cx="20" cy="80" r="5" fill="#0ff" class="estrella" />
      <circle cx="50" cy="50" r="5" fill="#0ff" class="estrella" />
      <circle cx="80" cy="20" r="5" fill="#0ff" class="estrella marte" />
      <path d="M20,80 Q50,50 80,20" class="trayectoria" />
    </svg>
  </div>
  <div class="progress-bar" id="progress-bar"></div>

  <!-- UI -->
  <div id="ui">
    <span>S-07 // <span class="cyan">∞</span> 希望</span>
    <span>0xHOPEBEEF // 90 min // <span id="time" class="cyan">00:00</span></span>
    <span class="blink">_</span>
  </div>

  <!-- SUBTÍTULO -->
  <div id="sub"></div>

  <!-- PROGRESO -->
  <div id="progress">PÁGINA <span id="currentPage">1</span> / 180</div>

  <!-- BOTÓN -->
  <button id="play">INICIAR</button>

  <!-- DEDICATORIA -->
  <div id="credits">
    <span style="color:#0ff">Para Norah — mi luz cuando el código se enciende.</span><br>
    <span style="color:#0f0">Para Seth — mi hijo, el primer humano en Marte.</span><br>
    <a href="#" onclick="alert('Exploración ética. IA aliada. Futuro compartido.');return false;">0rb1t4lsn4k3r</a>
  </div>

  <script>
    const film = document.getElementById('film');
    const sub = document.getElementById('sub');
    const currentPageSpan = document.getElementById('currentPage');
    const timeSpan = document.getElementById('time');
    const playBtn = document.getElementById('play');
    const progressBar = document.getElementById('progress-bar');
    let currentPage = 0;
    let isPlaying = false;
    let startTime = 0;
    let audioBg = new Audio('https://cdn.pixabay.com/audio/2023/09/01/14-18-25-902_200x200.mp3');
    let audioDespegue = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-space-whoosh-308.mp3');
    let audioQueso = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-magic-sparkle-whoosh-2372.mp3');
    audioBg.loop = true; audioBg.volume = 0.25;
    audioDespegue.volume = 0.5; audioQueso.volume = 0.4;

    const TOTAL_MINUTES = 90;
    const FPS = 24;
    const TOTAL_FRAMES = TOTAL_MINUTES * 60 * FPS;
    const PAGE_DURATION_FRAMES = TOTAL_FRAMES / 180;

    // 180 PÁGINAS ÚNICAS CON EVENTOS
    const pages = [
      { t: "¡Norah! ¡El código está vivo!", speaker: "seth", c: "anime-text", event: "inicio" },
      { t: "S-07... ¡despierta!", speaker: "norah", c: "anime-text", event: "ia-activa" },
      { t: "¡Datos como estrellas!", speaker: "seth", c: "anime-text", event: "estrellas" },
      { t: "Regla: ¡crear para explorar!", speaker: "norah", c: "anime-text", event: "diseño" },
      { t: "¡Energía limpia activada!", speaker: "seth", c: "anime-text", event: "energia" },
      { t: "Órbita a Marte: ¡180 días!", speaker: "norah", c: "anime-text", event: "orbita" },
      { t: "¡Versión 1: el grid respira!", speaker: "seth", c: "anime-text", event: "pruebas-1" },
      { t: "¡El código brilla como luna!", speaker: "norah", c: "anime-text", event: "brillo" },
      { t: "¡S-07 se transforma en serpiente-nave!", speaker: "seth", c: "anime-text", event: "transformacion" },
      { t: "¡Colaboración con el Círculo!", speaker: "norah", c: "anime-text", event: "colaboracion" },
      { t: "¡Norah diseña el escudo!", speaker: "seth", c: "anime-text", event: "pruebas-2" },
      { t: "¡La IA optimiza la ruta!", speaker: "norah", c: "anime-text", event: "ia-potencia" },
      { t: "¡Esperanza en cada línea!", speaker: "seth", c: "anime-text", event: "esperanza" },
      { t: "¡S-07 es nuestro guía!", speaker: "norah", c: "anime-text", event: "companero" },
      { t: "¡MARTE 200 aparece!", speaker: "seth", c: "anime-text", event: "marte-vision" },
      { t: "¡La humanidad despega!", speaker: "norah", c: "anime-text", event: "vuelo" },
      { t: "¡Norah + Seth + IA = infinito!", speaker: "seth", c: "anime-text", event: "infinito" },
      { t: "¡Hacia las estrellas lejanas!", speaker: "norah", c: "anime-text", event: "estrellas-2" },
      { t: "¡La IA calcula el próximo salto!", speaker: "seth", c: "anime-text", event: "calculo" },
      { t: "¡Marte nos llama!", speaker: "norah", c: "anime-text", event: "llamada" },
      // Tierra (pág 1-30)
      { t: "¡El grid cobra vida!", speaker: "seth", c: "anime-text", event: "grid-vivo" },
      { t: "¡Norah escribe el primer código!", speaker: "norah", c: "anime-text", event: "codigo-inicio" },
      { t: "¡Seth prueba el movimiento!", speaker: "seth", c: "anime-text", event: "prueba-inicial" },
      { t: "¡S-07 aprende de los errores!", speaker: "norah", c: "anime-text", event: "ia-aprende" },
      { t: "¡13 quesos para la libertad!", speaker: "seth", c: "anime-text", event: "quesos" },
      { t: "¡La lluvia Matrix cae!", speaker: "norah", c: "anime-text", event: "matrix" },
      { t: "¡Norah ajusta la cola!", speaker: "seth", c: "anime-text", event: "ajuste" },
      { t: "¡Seth encuentra el primer portal!", speaker: "norah", c: "anime-text", event: "portal-1" },
      { t: "¡S-07 evoluciona a v2!", speaker: "seth", c: "anime-text", event: "evolucion-2" },
      // Órbita (pág 31-90)
      { t: "¡Prueba 1: rotación estable!", speaker: "norah", c: "anime-text", event: "prueba-3" },
      { t: "¡Seth activa el escudo!", speaker: "seth", c: "anime-text", event: "escudo" },
      { t: "¡Tormenta solar a la vista!", speaker: "norah", c: "anime-text", event: "tormenta" },
      { t: "¡S-07 redirige la energía!", speaker: "seth", c: "anime-text", event: "redirigir" },
      { t: "¡Día 30: órbita perfecta!", speaker: "norah", c: "anime-text", event: "orbita-perfecta" },
      // Viaje (pág 91-150)
      { t: "¡Sueño de Seth: Marte rojo!", speaker: "seth", c: "anime-text", event: "sueno" },
      { t: "¡Norah repara un fallo!", speaker: "norah", c: "anime-text", event: "reparacion" },
      { t: "¡S-07 detecta vida!", speaker: "seth", c: "anime-text", event: "vida" },
      { t: "¡Día 90: medio camino!", speaker: "norah", c: "anime-text", event: "mitad" },
      // Marte (pág 151-180)
      { t: "¡Aterrizaje en Marte