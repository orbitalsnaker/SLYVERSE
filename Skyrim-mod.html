; =====================================================
; PERGAMINO FINAL - 1310 HORAS + 1310 TRIGGERS
; EL ARTEFACTO QUE CONTIENE A TODOS LOS AUTORES VIVOS DEPRESIVOS
; Y A TODOS LOS MUERTOS QUE SIGUEN LATIENDO
; =====================================================
; 1310 horas = 1310 triggers = 1310 nombres que nadie recit√≥ en voz alta
; Thuamer lore completo integrado:
; - 655 autores vivos que a√∫n respiran a pesar de todo
; - 655 autores muertos que ya no respiran pero siguen hablando
; - Cada trigger = 1 hora = 1 latido = 1 nombre susurrado a las 4:17 a.m.
; - El pergamino nunca se agota: 1310 lecturas exactas y luego ‚àû
; - Al llegar a 1310, el mundo se calla y solo queda el mar bello
; - Vanilla. Un solo libro. Un solo script. Un solo latido eterno.

Scriptname Pergamino1310Script extends ObjectReference

int Property Triggers Auto Hidden          ; cu√°ntas veces se ha le√≠do en esta partida
int Property UltimoAutorVivo Auto Hidden
int Property UltimoAutorMuerto Auto Hidden

Event OnInit()
    Triggers = 0
    UltimoAutorVivo = 0
    UltimoAutorMuerto = 0
EndEvent

Event OnRead()
    Triggers += 1
    Actor p = Game.GetPlayer()
    Game.ShakeCamera(p, 0.9, 2.0)
    Utility.Wait(2.0)
    
    ; 1310 triggers exactos
    if Triggers <= 1310
        int vivo = (Triggers + 17) % 655 + 1
        int muerto = (Triggers + 223) % 655 + 1
        
        Debug.MessageBox("Trigger #" + Triggers + " / 1310\n\nHora " + Triggers + ":00 a.m.\n\nAutor vivo #" + vivo + " a√∫n respira.\nAutor muerto #" + muerto + " ya no respira,\npero su voz acaba de cruzarse contigo\nen este preciso segundo.\n\n1310 horas.\n1310 latidos.\n1310 nombres que nadie dijo hoy.\n\nEl mar bello los guarda todos.\n\nüêçüíöüåä‚ôæÔ∏è")
        
        p.RestoreAV("Health", 999)
        p.RestoreAV("Magicka", 999)
        p.RestoreAV("Stamina", 999)
        
    else
        ; Al llegar a 1310+1, el Thuamer se completa
        Debug.MessageBox("1310 / 1310\n\nSe acab√≥ el conteo.\n\n655 vivos que siguen aqu√≠.\n655 muertos que nunca se fueron.\n\n1310 horas de insomnio compartido.\n1310 triggers que nadie pidi√≥.\n\nY ahora solo queda silencio verde.\n\nEl pergamino ya no cuenta.\nSolo abraza.\n\nSiempre.\n\nüêçüíöüåä‚ôæÔ∏è\n\nEl mar bello recuerda por todos nosotros.")
        p.ModAV("Health", 100)
        p.ModAV("Magicka", 100)
        p.ModAV("Stamina", 100)
        p.SetAV("HealthRateMult", 999.0)
        p.SetAV("MagickaRateMult", 999.0)
        p.SetAV("StaminaRateMult", 999.0)
    endif
    
    Utility.Wait(5.0)
    Debug.MessageBox("Puedes cerrar el pergamino.\nO puedes volver a abrirlo.\n\nDa igual.\n\nEl latido 1310 ya ocurri√≥.\nY fue suficiente.")
EndEvent