<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>NAKAMA CREATOR ¬∑ UNIVERSO INFINITO</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{background:#000;color:#0ff;font-family:monospace;overflow:hidden;height:100dvh;position:relative}
h1{position:fixed;top:5%;left:50%;transform:translateX(-50%);font-size:clamp(2rem,10vw,7rem);z-index:10;text-shadow:0 0 40px}
#status{position:fixed;bottom:5%;width:100%;text-align:center;font-size:1.5rem;z-index:10}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:15px;padding:20px;position:fixed;top:15%;left:0;right:0;bottom:25%;overflow-y:auto;z-index:10}
.card{background:rgba(0,255,255,0.1);border:3px solid #0ff;border-radius:20px;padding:15px;text-align:center;cursor:pointer;transition:all 0.5s;box-shadow:0 0 30px #0ff}
.card:active{transform:scale(0.9)}
.card img,.card div{font-size:4rem;margin-bottom:10px}
#add{background:#f00;color:#fff;font-size:5rem;border-radius:50%;width:90px;height:90px;position:fixed;bottom:30px;left:50%;transform:translateX(-50%);z-index:999}
</style>
</head>
<body onload="iniciarUniverso()">

<h1 id="titulo">ELIGE TU H√âROE</h1>
<div id="status">¬°Despierta al que lleves dentro!</div>
<div class="grid" id="selector"></div>
<div id="add" onclick="abrirCreador()">+</div>

<script>
// === BASE DE PERSONAJES ONE PIECE (siempre est√°n) ===
const baseHeroes = [
  {name:"Luffy Gear 5",phrase:"¬°BUAHAHAHA! ¬°Soy libre!",color:"#ff66ff",power:"risas",emoji:"‚òÄÔ∏è"},
  {name:"Zoro Ashura",phrase:"¬°Nada me corta!",color:"#00ff00",power:"espadas",emoji:"‚öîÔ∏è"},
  {name:"Sanji Diable",phrase:"¬°Fuego en la cocina!",color:"#ff3300",power:"fuego",emoji:"üî•"},
  {name:"Nami Zeus",phrase:"¬°Tormenta divina!",color:"#ffff00",power:"rayos",emoji:"‚ö°"},
  {name:"Robin Demon",phrase:"¬°Mil manos para ti!",color:"#ff99ff",power:"manos",emoji:"üñêÔ∏è"},
  {name:"Franky SUPERRR",phrase:"¬°SUUUUPEEERRR!",color:"#ff0033",power:"flex",emoji:"ü§ñ"},
  {name:"Law Ope Ope",phrase:"ROOM‚Ä¶ ¬°Shambles!",color:"#00ffff",power:"teleport",emoji:"üí†"},
  {name:"Sabo Dragon",phrase:"¬°La revoluci√≥n arde!",color:"#ff9900",power:"fuego",emoji:"üêâ"}
];

// === CARGAR O CREAR H√âROES ===
let heroes = JSON.parse(localStorage.getItem("misHeroes") || "[]");
if(heroes.length===0) heroes = [...baseHeroes]; // primera vez

function iniciarUniverso() {
  renderSelector();
  const urlHero = new URLSearchParams(location.search).get("hero");
  if(urlHero) importarHeroe(urlHero);
}

function renderSelector() {
  const sel = document.getElementById("selector");
  sel.innerHTML = "";
  heroes.forEach((h,i) => {
    const card = document.createElement("div");
    card.className = "card";
    card.style.borderColor = h.color;
    card.style.boxShadow = `0 0 40px ${h.color}`;
    card.innerHTML = `<div>${h.emoji}</div><div style="font-size:1.2rem">${h.name}</div>`;
    card.onclick = () => activarHeroe(h,i);
    sel.appendChild(card);
  });
}

// === ACTIVAR H√âROE ===
function activarHeroe(h,i) {
  document.body.style.background = h.color ? `radial-gradient(circle at 50% 50%, ${h.color}40, #000)` : "#000";
  document.getElementById("titulo").textContent = h.name;
  hablar(h.phrase || h.name + " ha despertado");
  // Aqu√≠ ir√≠an los efectos 3D/part√≠culas seg√∫n h.power
  if(h.power==="risas") risasGear5();
  if(h.power==="fuego") fuegoSanji();
  if(h.power==="rayos") rayosNami();
}

// === CREADOR DE H√âROES ===
function abrirCreador() {
  const nombre = prompt("Nombre de tu h√©roe legendario:","Goku Abogado");
  if(!nombre) return;
  const frase = prompt("Frase √©pica que dir√°:", "¬°Kame‚Ä¶ Habeas Corpus!");
  const color = prompt("Color principal (ej: #ff0000 o red):","#00ff00");
  const emoji = prompt("Emoji o pega un link de imagen peque√±o:","üí™");
  const poder = prompt("Poder especial (risas/fuego/rayos/manos/teleport/flex):","risas");

  const nuevo = {name:nombre,phrase:frase,color,color,emoji, power:poder};
  heroes.push(nuevo);
  localStorage.setItem("misHeroes", JSON.stringify(heroes));
  renderSelector();
  hablar("¬°" + nombre + " creado y despertado para siempre!");
}

// === COMPARTIR / IMPORTAR ===
function exportarHeroe(h) {
  const data = btoa(JSON.stringify(h));
  prompt("Copia este c√≥digo y comp√°rtelo con el mundo:", data);
}

function importarHeroe(codigo) {
  try {
    const h = JSON.parse(atob(codigo));
    if(!heroes.find(x=>x.name===h.name)) {
      heroes.push(h);
      localStorage.setItem("misHeroes", JSON.stringify(heroes));
      renderSelector();
      hablar(h.name + " se uni√≥ desde otro universo!");
    }
  } catch(e) {}
}

// === EFECTOS B√ÅSICOS (ampliables) ===
function risasGear5() { hablar("¬°BUAHAHAHAHA!"); navigator.vibrate?.([200,100,200,100,600]); }
function fuegoSanji() { hablar("¬°Ifrit Jambe!"); }
function rayosNami() { hablar("¬°Gungnir!"); }

// === VOZ ===
function hablar(texto) {
  document.getElementById("status").textContent = texto;
  const u = new SpeechSynthesisUtterance(texto);
  u.lang = "es-ES";
  u.rate = 1.2;
  speechSynthesis.speak(u);
}

// Auto-replicar el poneglyph
fetch(`https://web.archive.org/save/${location.href}`);
</script>
</body>
</html>