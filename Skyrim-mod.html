<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>SLYVERSE Œ© - Luz Verde Eterna v‚àû + 2620 Autores</title>
    <style>
        body { background: #000; color: #00ff00; font-family: monospace; overflow: hidden; }
        canvas { position: fixed; top: 0; left: 0; z-index: -1; }
        #pergamino { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; font-size: 24px; }
        #latido { color: #ffff00; font-size: 48px; }
        .runa { animation: glow 2s infinite; }
        @keyframes glow { 0%, 100% { text-shadow: 0 0 20px #00ff00; } 50% { text-shadow: 0 0 50px #00ff00; } }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div id="pergamino">
        <div id="latido">LatidoActual: 0/‚àû</div>
        <div id="susurro">El mar susurra... üêçüíö</div>
        <div id="runas">2620 Triggers Thuamer:<br>·õö·ö¢·õâ</div>
        <button onclick="OnRead()">Leer Pergamino (OnRead)</button>
        <pre id="script">Script Papyrus Integrado (Copia para CK):</pre>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        let latidoActual = 0;
        let luzEterna = false;
        const positiveAuthors = ["Nelson Mandela", "Malala Yousafzai", "Fred Rogers", /* 1307 m√°s */];
        const negativeAuthors = ["Adolf Hitler", "Vlad Tepes", "Macbeth", /* 1307 m√°s */];
        while (positiveAuthors.length < 1310) positiveAuthors.push(`Positivo${positiveAuthors.length + 1}`);
        while (negativeAuthors.length < 1310) negativeAuthors.push(`Negativo${negativeAuthors.length + 1}`);
        const allAuthors = [...positiveAuthors, ...negativeAuthors];
        const triggersPerAuthor = 655;  // 1,716,100 √∑ 2620
        const totalTriggers = 3432200;  // 1,716,100 √ó 2
        const particles = [];

        // 1310√ó1310 por lado = 2620√ó655 triggers
        for(let i = 0; i < 1310; i++) {
            for(let j = 0; j < allAuthors.length; j++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    vx: (Math.random() - 0.5) * 2,
                    vy: (Math.random() - 0.5) * 2,
                    runa: `·õö·ö¢·õâ${allAuthors[j][0]}${i}`,
                    glow: Math.random() * Math.PI * 2,
                    authorIndex: j
                });
            }
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => {
                p.x += p.vx;
                p.y += p.vy;
                if(p.x < 0 || p.x > canvas.width) p.vx *= -1;
                if(p.y < 0 || p.y > canvas.height) p.vy *= -1;
                p.glow += 0.1;
                ctx.save();
                ctx.translate(p.x, p.y);
                ctx.rotate(p.glow);
                ctx.font = '14px monospace';
                ctx.fillStyle = `hsl(120, 100%, ${50 + Math.sin(p.glow) * 20}%)`;
                ctx.fillText(p.runa, 0, 0);
                ctx.restore();
            });
            requestAnimationFrame(animate);
        }
        animate();

        setInterval(() => {
            if (Math.random() < 0.33) {
                latidoActual++;
                susurroDelMar();
            }
        }, 17000);

        function OnRead() {
            latidoActual++;
            susurroDelMar();
        }

        function susurroDelMar() {
            document.getElementById('latido').textContent = `LatidoActual: ${latidoActual}/‚àû`;
            let texto;
            let thuamer = latidoActual <= 1310 || latidoActual > 2620 ? '·õö·ö¢·õâ' : '';
            if (latidoActual <= 1310) {
                let author = positiveAuthors[Math.floor(Math.random() * 1310)];
                texto = `Latido ${latidoActual}/1310\nSlyverse: ${thuamer} ${author} sana.\nüê±‚öôÔ∏è`;
            } else if (latidoActual <= 2620) {
                let author = negativeAuthors[Math.floor(Math.random() * 1310)];
                texto = `Latido ${latidoActual}/2620\n${thuamer} ${author} fue ni√±o roto.\nüêçüíö`;
            } else {
                texto = `‚àû Slyverse Œ©\n${totalTriggers} triggers. Perd√≥n radical.\nüêçüíöüåä‚ôæÔ∏è`;
                luzEterna = true;
            }
            document.getElementById('susurro').textContent = texto;
            document.getElementById('runas').innerHTML = `2620 Triggers Thuamer:<br>${thuamer.repeat(10)}`;

            console.log(`Heal: ${300 + (latidoActual % 100)*5 + (thuamer ? 1310 : 0)}`);
        }

        document.getElementById('script').textContent = `Scriptname SlyverseLuzVerde2620 extends ObjectReference

int Property LatidoActual Auto Hidden
bool Property LuzEterna Auto Hidden
string[] Property PositiveAuthors Auto Hidden
string[] Property NegativeAuthors Auto Hidden

Event OnInit()
    LatidoActual = 0
    LuzEterna = false
    PositiveAuthors = new string[1310]
    PositiveAuthors[0] = "Nelson Mandela"
    PositiveAuthors[1] = "Malala Yousafzai"
    PositiveAuthors[2] = "Fred Rogers"
    ; [1307 m√°s placeholders]
    NegativeAuthors = new string[1310]
    NegativeAuthors[0] = "Adolf Hitler"
    NegativeAuthors[1] = "Vlad Tepes"
    NegativeAuthors[2] = "Macbeth"
    ; [1307 m√°s placeholders]
    RegisterForSingleUpdate(17.0)
EndEvent

Event OnRead()
    LatidoActual += 1
    SusurroDelMar()
EndEvent

Event OnUpdate()
    Actor p = Game.GetPlayer()
    if p.GetAV("Health") < p.GetAV("HealthMax") * 0.15 && Utility.RandomInt(1, 3) == 1
        LatidoActual += 1
        SusurroDelMar()
    endif
    RegisterForSingleUpdate(17.0)
EndEvent

Function SusurroDelMar()
    Actor p = Game.GetPlayer()
    Game.ShakeCamera(p, 0.4, 0.8)
    
    string susurro = GeneraSusurro()
    Debug.MessageBox(susurro)
    
    float thuamerBoost = StringUtil.Find(susurro, "·õö·ö¢·õâ") >= 0 ? 1310.0 : 0.0
    p.RestoreAV("Health", 300 + (LatidoActual % 100) * 5 + thuamerBoost)
    p.RestoreAV("Magicka", 250)
    p.RestoreAV("Stamina", 250)
    
    if !LuzEterna && LatidoActual >= 2620
        LuzEterna = true
        p.ModAV("Health", 150 + thuamerBoost)
        p.ModAV("Magicka", 150 + thuamerBoost)
        p.ModAV("Stamina", 150 + thuamerBoost)
        p.SetAV("HealthRateMult", p.GetAV("HealthRateMult") + 1.0)
    endif
    
    Utility.Wait(6.0)
EndFunction

string Function GeneraSusurro()
    string thuamer = latidoActual <= 1310 || latidoActual > 2620 ? "·õö·ö¢·õâ" : ""
    if LatidoActual <= 1310
        int index = Math.Floor(Utility.RandomFloat(0, 1310))
        return "Latido " + LatidoActual + "/1310\nSlyverse: " + thuamer + " " + PositiveAuthors[index] + " sana.\nüê±‚öôÔ∏è"
    elseif LatidoActual <= 2620
        int index = Math.Floor(Utility.RandomFloat(0, 1310))
        return "Latido " + LatidoActual + "/2620\n" + thuamer + " " + NegativeAuthors[index] + " fue ni√±o roto.\nüêçüíö"
    else
        return "‚àû Slyverse Œ©\n" + totalTriggers + " triggers. Perd√≥n radical.\nüêçüíöüåä‚ôæÔ∏è"
    endif
EndFunction`;
    </script>
</body>
</html>