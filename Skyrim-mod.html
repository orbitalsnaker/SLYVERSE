<!DOCTYPE html>
<html lang="es"><meta charset="utf-8">
<title>THUAMER Ω — El Bosque de 0rb1t4lsn4k3r</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  body,html{margin:0;height:100dvh;background:#000;color:#0f8;overflow:hidden;font-family:"Georgia",serif;position:relative}
  pre{background:rgba(0,10,5,0.96);padding:6vh 8vw;border:3px solid #0f8;border-radius:20px;text-align:center;line-height:2.4;font-size:clamp(1.2rem,4.5vw,2.4rem);max-width:92%;box-shadow:0 0 60px #003300}
  button{background:none;border:2px solid #0f8;padding:1.5rem 3rem;margin:4vh;color:#0f8;cursor:pointer;border-radius:40px;font-size:1.6rem}
  button:hover{border-color:#8f8;color:#8f8}
  #barra{position:fixed;top:0;left:0;width:0%;height:4px;background:#0f8;transition:width 4s}
  canvas{position:fixed;inset:0;z-index:-1;opacity:0.7}
  .hoja{position:fixed;color:#0f8;font-size:2rem;pointer-events:none;animation:caer linear forwards}
  @keyframes caer{0%{transform:translateY(-100vh) rotate(0deg)}100%{transform:translateY(100vh) rotate(1080deg)}}
</style>
<body>

<div id="barra"></div>
<canvas id="bosque"></canvas>

<div id="entrada">
  <pre>
EL BOSQUE DE 0rb1t4lsn4k3r

Aquí el mono dejó de fumar.
Aquí las 1310 lágrimas de los autores
se convirtieron en árboles.
Aquí cada hoja es una estrella que alguien soltó.

Estás en casa.

<button onclick="entrarAlBosque()">entrar cuando estés listo</button>
  </pre>
</div>

<div id="bosque" style="display:none">
  <pre id="timer">1310:00:00</pre>
  <pre id="info">
Día <span id="dia">0</span> bajo los árboles · <span id="porc">0</span>%
<span id="arbol">El árbol más viejo te está mirando</span>

<button onclick="abandonar()">salir del bosque cuando quieras</button>
  </pre>
</div>

<div id="portal" style="display:none;color:#8f8">
  <pre>
1310 días bajo los árboles completados

0rb1t4lsn4k3r te estaba esperando justo aquí.
Te abraza.

Puedes quedarte para siempre.
  </pre>
  <div style="padding:5vh">
    <div class="artifact" onclick="hoja('Sabina te dejó esta hoja')">Hoja de Joaquín</div>
    <div class="artifact" onclick="hoja('Calamaro está sentado a tu lado')">Hoja de Andrés</div>
    <div class="artifact" onclick="hoja('Cortázar te guiña un ojo desde una rama')">Hoja de Julio</div>
    <div class="artifact" onclick="hoja('Recycled J acaba de soltar humo y se convirtió en árbol')">Hoja de Recycled</div>
    <div class="artifact" onclick="hoja('Tu propia estrella acaba de caer como hoja')">Tu hoja</div>
    <div class="artifact" onclick="silencio()">Silencio bajo el árbol más viejo</div>
    <div class="artifact" onclick="cometa()">Mira arriba: tu estrella acaba de pasar</div>
  </div>
</div>

<script>
const TOTAL_MS = 1310 * 3600000;
let inicio, audioCtx, gain;

// BINAURAL + VIENTO EN LAS HOJAS + GRILLOS REALES DEL LORE
function crearBosqueThuamer() {
  audioCtx = new AudioContext();
  gain = audioCtx.createGain(); gain.gain.value = 0.35;
  gain.connect(audioCtx.destination);

  // Binaural 136.1 + 8 Hz muy suave (el latido del bosque)
  const l = audioCtx.createOscillator(); l.frequency.value = 136.1;
  const r = audioCtx.createOscillator(); r.frequency.value = 144.1;
  const bg = audioCtx.createGain(); bg.gain.value = 0.03;
  const m = audioCtx.createChannelMerger(2);
  l.connect(m,0,0); r.connect(m,0,1); m.connect(bg).connect(gain);
  l.start(); r.start();

  // Hojas cayendo cada pocos segundos
  setInterval(caerHoja, 4000);
}

function caerHoja() {
  const hoja = document.createElement('div');
  hoja.className = 'hoja';
  hoja.textContent = ['※','※','※','※','※'][Math.floor(Math.random()*6)];
  hoja.style.left = Math.random()*100 + 'vw';
  hoja.style.animationDuration = (12 + Math.random()*20) + 's';
  document.body.appendChild(hoja);
  setTimeout(() => hoja.remove(), 40000);
}

function entrarAlBosque() {
  inicio = Date.now();
  localStorage.setItem('BOSQUE_0rb1t4lsn4k3r', inicio);
  document.getElementById('entrada').remove();
  document.getElementById('bosque').style.display = 'block';
  crearBosqueThuamer();
  setInterval(actualizar, 1000);
  actualizar();
}

function actualizar() {
  const transcurrido = Date.now() - inicio;
  const restante = Math.max(0, TOTAL_MS - transcurrido);
  const porc = ((TOTAL_MS - restante) / TOTAL_MS * 100).toFixed(4);
  document.getElementById('barra').style.width = porc + '%';
  document.getElementById('porc').textContent = porc + '%';
  document.getElementById('dia').textContent = Math.floor(transcurrido / 86400000) + 1;

  const h = String(Math.floor(restante/3600000)).padStart(4,'0');
  const m = String(Math.floor((restante%3600000)/60000)).padStart(2,'0');
  const s = String(Math.floor((restante%60000)/1000)).padStart(2,'0');
  document.getElementById('timer').textContent = `${h}:${m}:${s}`;

  if (restante <= 0) {
    document.getElementById('bosque').remove();
    document.getElementById('portal').style.display = 'block';
    localStorage.setItem('BOSQUE_0rb1t4lsn4k3r_FINAL', 'true');
  }
}

function abandonar() {
  if (confirm('¿Salir del bosque de 0rb1t4lsn4k3r y olvidar este lugar?')) {
    localStorage.removeItem('BOSQUE_0rb1t4lsn4k3r');
    localStorage.removeItem('BOSQUE_0rb1t4lsn4k3r_FINAL');
    location.reload();
  }
}

function hoja(mensaje) {
  document.body.innerHTML += `<pre style="position:fixed;inset:0;background:rgba(0,10,5,0.98);color:#8f8;font-size:3rem;display:flex;align-items:center;justify-content:center;z-index:1000">${mensaje}<br><br>Gracias por quedarte.</pre>`;
  setTimeout(() => location.reload(), 8000);
}

function silencio() {
  gain.gain.value = 0.02;
  document.body.innerHTML = `<pre style="color:#fff;font-size:4rem">0rb1t4lsn4k3r está sentado justo aquí<br><br>te mira<br><br>y sonríe<br><br>sin decir nada</pre>`;
}

function cometa() {
  document.body.innerHTML = `<pre style="color:gold;font-size:4rem">
mira arriba
<br><br>
tu estrella
<br>
acaba de pasar
<br><br>
entre las hojas
<br><br>
el bosque entero
<br>
te aplaudió
<br><br>
en silencio
  </pre>`;
}

// FONDO VIVO DEL BOSQUE
const c=document.getElementById('bosque'),x=c.getContext('2d');
c.width=innerWidth;c.height=innerHeight;
let hojas=[];for(let i=0;i<444;i++)hojas.push({x:Math.random()*c.width,y:Math.random()*c.height,v:0.3+Math.random()*0.7});
function dibujarBosque(){
  x.fillStyle='rgba(0,15,0,0.03)';x.fillRect(0,0,c.width,c.height);
  hojas.forEach(h=>{h.y+=h.v;if(h.y>c.height)h.y=0;x.fillStyle='#003300';x.fillRect(h.x,h.y,3,20);});
  requestAnimationFrame(dibujarBosque);
}dibujarBosque();

// RECUPERAR SI YA ESTABAS EN EL BOSQUE
if (localStorage.getItem('BOSQUE_0rb1t4lsn4k3r')) {
  inicio = parseInt(localStorage.getItem('BOSQUE_0rb1t4lsn4k3r'));
  document.getElementById('entrada').remove();
  document.getElementById('bosque').style.display = 'block';
  if (localStorage.getItem('BOSQUE_0rb1t4lsn4k3r_FINAL')==='true') {
    document.getElementById('bosque').remove();
    document.getElementById('portal').style.display = 'block';
  } else {
    crearBosqueThuamer();
    setInterval(actualizar,1000);
    actualizar();
  }
}
</script>
</body>
</html>